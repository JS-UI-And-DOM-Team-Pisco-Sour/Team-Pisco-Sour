/*! jQuery v1.11.3 | (c) 2005, 2015 jQuery Foundation, Inc. | jquery.org/license */

/*! KineticJS v5.1.0 2014-03-27 http://www.kineticjs.com by Eric Rowell @ericdrowell - MIT License https://github.com/ericdrowell/KineticJS/wiki/License*/

/*!
* @license CreateJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011-2015 gskinner.com, inc.
*
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/

define("common/global-constants",[],function(){return{STAGE_WIDTH:.7*window.innerWidth,STAGE_HEIGHT:.9*window.innerHeight,KEYS:{A:65,E:69,Q:81,W:87}}}),define("common/player-constants",[],function(){return{WIDTH:155,HEIGHT:160,DEATH_ANIMATION_FRAMES_COUNT:49,SMOKE_ANIMATION_FRAMES_COUNT:40,SMOKE_ANIMATION_WIDTH:128,SMOKE_ANIMATION_HEIGHT:128,INITIAL_HEALTH:1e3,ATTACK_SPEED:20,FACING_DIRECTIONS:{UP:2,DOWN:6,LEFT:0,RIGHT:4,UP_LEFT:7,UP_RIGHT:5,DOWN_LEFT:1,DOWN_RIGHT:3,DEFAULT:3},EXPLOSION_WIDTH:256,EXPLOSION_HEIGHT:256,EXPLOSION_SCALE:2.6,EXPLOSION_FRAME_RATE:30,BULLET_WIDTH:28,BULLET_HEIGHT:28,BULLET_RADIUS:12,BULLET_SHOT_SCALE:.2,BULLET_SHOT_FRAMERATE:10,SHIFT:30,HEALTH_REDUCED_ON_ENEMY_COLLISION:200,HEALTH_INCREASED_ON_ENEMY_HIT:15}}),define("common/enemy-constants",[],function(){return{WIDTH:99.2,HEIGHT:111,RADIUS:30,FRAME_COUNT:10,SPAWN_FRAME_INTERVAL:25,SPEED:3,SCALE:.6}}),define("game-objects/contracts/game-object",[],function(){var e=function(){var e=function(e){this.image=new Image,this.image.src=e,this.kineticImage=null};return e}();return e}),define("game-objects/characters/hero",["../contracts/game-object","../../common/global-constants","../../common/player-constants"],function(e,t,n){var r=function(e){function r(e,n){var r=e<=40||e>=t.STAGE_WIDTH-50,i=n<=50||n>=t.STAGE_HEIGHT-40;return{x:r,y:i}}var i=function(t,r,i,s){e.call(this,t),this.health=r,this.isDead=!1,this.smallTeleportationAmount=150,this.averageTeleportationAmount=300,this.largeTeleportationAmount=450,this.facingDirection=n.FACING_DIRECTIONS.DEFAULT,this.layer=i,this.attackSpeed=s,this.score=0};return i.prototype=e.prototype,i.prototype.checkDirectionAndTeleport=function(e){var t=this.kineticImage.getX()+n.WIDTH/2,i=this.kineticImage.getY()+n.HEIGHT/2,s=this.getDisplacement(e),o=t+s.x,u=i+s.y,a=r(o,u);a.x||this.kineticImage.setX(o-n.WIDTH/2),a.y||this.kineticImage.setY(u-n.HEIGHT/2),this.layer.draw()},i.prototype.getDisplacement=function(e){switch(this.facingDirection){case n.FACING_DIRECTIONS.UP:return{x:0,y:+e};case n.FACING_DIRECTIONS.DOWN:return{x:0,y:-e};case n.FACING_DIRECTIONS.LEFT:return{x:-e,y:0};case n.FACING_DIRECTIONS.RIGHT:return{x:+e,y:0};case n.FACING_DIRECTIONS.UP_LEFT:return{x:-e*Math.cos(.25*Math.PI),y:-e*Math.sin(.25*Math.PI)};case n.FACING_DIRECTIONS.UP_RIGHT:return{x:+e*Math.cos(.25*Math.PI),y:-e*Math.sin(.25*Math.PI)};case n.FACING_DIRECTIONS.DOWN_LEFT:return{x:-e*Math.cos(.25*Math.PI),y:+e*Math.sin(.25*Math.PI)};case n.FACING_DIRECTIONS.DOWN_RIGHT:return{x:+e*Math.cos(.25*Math.PI),y:+e*Math.sin(.25*Math.PI)}}},i.prototype.getCenter=function(){return{x:this.kineticImage.getX()+n.WIDTH/2,y:this.kineticImage.getY()+n.HEIGHT/2}},i.prototype.loadToStage=function(e){this.kineticImage=new Kinetic.Image({x:50,y:50,image:this.image,width:n.WIDTH,height:n.HEIGHT,crop:{x:n.FACING_DIRECTIONS.DOWN_RIGHT*n.WIDTH,y:0,width:n.WIDTH,height:n.HEIGHT}}),this.layer.add(this.kineticImage),e.add(this.layer)},i}(e);return r}),define("game-objects/characters/enemy",["../contracts/game-object","../../common/player-constants","../../common/enemy-constants"],function(e,t,n){var r=function(e){var r=function(t,r){e.call(this,t),this.speed=n.SPEED,this.frame=r};return r.prototype=e.prototype,r.prototype.attackPlayer=function(e){var r=e.getX()+t.WIDTH/2,i=e.getY()+t.HEIGHT/2,s=this.getX(),o=this.getY(),u=Math.atan2(i-o,r-s);this.setX(s+Math.cos(u)*n.SPEED),this.setY(o+Math.sin(u)*n.SPEED)},r}(e);return r}),define("helpers/game-state-helper",["../common/global-constants","../common/player-constants","../common/enemy-constants"],function(e,t,n){function r(t){return t.getX()<-30||t.getX()>e.STAGE_WIDTH+30||t.getY()<-30||t.getY()>e.STAGE_HEIGHT+30?!0:!1}function i(e,r){for(var i in e)if(e.hasOwnProperty(i)){var s=e[i].enemy.getX()+n.SCALE*n.WIDTH/2,o=e[i].enemy.getY()+n.SCALE*n.HEIGHT/2,u=r.getX()+t.BULLET_RADIUS,a=r.getY()+t.BULLET_RADIUS;if((s-u)*(s-u)+(o-a)*(o-a)<=(n.RADIUS+t.BULLET_RADIUS)*(n.RADIUS+t.BULLET_RADIUS))return i}return null}function s(e,t){e[t].enemy.destroy(),e.splice(t,1)}function o(e,r){var i=!1,s=50,o=e.kineticImage.getX()+t.WIDTH/2,u=e.kineticImage.getY()+t.HEIGHT/2,a=r.getX(),f=r.getX()+n.WIDTH,l=r.getY(),c=r.getY()+n.HEIGHT,h=a<=o&&o<=f,p=h&&Math.abs(l-u)<=s,d=h&&Math.abs(c-u)<=s,v=(a-o)*(a-o)+(l-u)*(l-u)<=s,m=(f-o)*(f-o)+(l-u)*(l-u)<=s,g=(a-o)*(a-o)+(c-u)*(c-u)<=s,y=(f-o)*(f-o)+(c-u)*(c-u)<=s,b=v||m,w=g||y;if(p||d)i=!0;if(b||w)i=!0;return i}function u(e,n,r,i,s){function l(){a.setX(e-t.EXPLOSION_WIDTH/2*r),a.setY(n-t.EXPLOSION_HEIGHT/2*r),a.setCrop({x:o*256,y:u*256,width:256,height:256}),a.setScale({x:r,y:r}),s.draw(),o++,o%8===0&&(o=0,u++),u===6&&clearTimeout(f);var f=setTimeout(l,i)}var o=0,u=0,a,f=new Image;a=new Kinetic.Image({x:e-t.EXPLOSION_WIDTH/2*r,y:n-t.EXPLOSION_HEIGHT/2*r,image:f,width:256,height:256,crop:{x:0,y:0,width:256,height:256}}),s.add(a),f.src="assets/images/explosion.png",l()}function a(e,n,r,i){var s=0,o=0,u,a=new Image;u=new Kinetic.Image({x:e-t.EXPLOSION_WIDTH/2*r,y:n-t.EXPLOSION_HEIGHT/2*r,image:a,width:256,height:256,crop:{x:0,y:0,width:256,height:256}}),i.add(u),a.src="assets/images/poof.png",function f(){u.setX(e-t.EXPLOSION_WIDTH/2*r),u.setY(n-t.EXPLOSION_HEIGHT/2*r),u.setCrop({x:s*128,y:(4-o)*128,width:128,height:128}),u.setScale({x:r,y:r}),i.draw(),o++,o===6&&cancelAnimationFrame(a);var a=requestAnimationFrame(f)}()}return{bulletLeftField:r,getDeadEnemyIndex:i,removeEnemy:s,checkIfPlayerCollidedWithEnemy:o,runExplosionAt:u,runPoofAt:a}}),!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function g(e){var t="length"in e&&e.length,n=h.type(e);return"function"===n||h.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function S(e,t,n){if(h.isFunction(t))return h.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return h.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(E.test(t))return h.filter(t,e,n);t=h.filter(t,e)}return h.grep(e,function(e){return h.inArray(e,t)>=0!==n})}function A(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function _(e){var t=M[e]={};return h.each(e.match(O)||[],function(e,n){t[n]=!0}),t}function P(){T.addEventListener?(T.removeEventListener("DOMContentLoaded",H,!1),e.removeEventListener("load",H,!1)):(T.detachEvent("onreadystatechange",H),e.detachEvent("onload",H))}function H(){(T.addEventListener||"load"===event.type||"complete"===T.readyState)&&(P(),h.ready())}function q(e,t,n){if(void 0===n&&1===e.nodeType){var r="data-"+t.replace(I,"-$1").toLowerCase();if(n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:F.test(n)?h.parseJSON(n):n}catch(i){}h.data(e,t,n)}else n=void 0}return n}function R(e){var t;for(t in e)if(("data"!==t||!h.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function U(e,t,r,i){if(h.acceptData(e)){var s,o,u=h.expando,a=e.nodeType,f=a?h.cache:e,l=a?e[u]:e[u]&&u;if(l&&f[l]&&(i||f[l].data)||void 0!==r||"string"!=typeof t)return l||(l=a?e[u]=n.pop()||h.guid++:u),f[l]||(f[l]=a?{}:{toJSON:h.noop}),("object"==typeof t||"function"==typeof t)&&(i?f[l]=h.extend(f[l],t):f[l].data=h.extend(f[l].data,t)),o=f[l],i||(o.data||(o.data={}),o=o.data),void 0!==r&&(o[h.camelCase(t)]=r),"string"==typeof t?(s=o[t],null==s&&(s=o[h.camelCase(t)])):s=o,s}}function z(e,t,n){if(h.acceptData(e)){var r,i,s=e.nodeType,o=s?h.cache:e,u=s?e[h.expando]:h.expando;if(o[u]){if(t&&(r=n?o[u]:o[u].data)){h.isArray(t)?t=t.concat(h.map(t,h.camelCase)):t in r?t=[t]:(t=h.camelCase(t),t=t in r?[t]:t.split(" ")),i=t.length;while(i--)delete r[t[i]];if(n?!R(r):!h.isEmptyObject(r))return}(n||(delete o[u].data,R(o[u])))&&(s?h.cleanData([e],!0):l.deleteExpando||o!=o.window?delete o[u]:o[u]=null)}}}function et(){return!0}function tt(){return!1}function nt(){try{return T.activeElement}catch(e){}}function rt(e){var t=it.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function wt(e,t){var n,r,i=0,s=typeof e.getElementsByTagName!==B?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==B?e.querySelectorAll(t||"*"):void 0;if(!s)for(s=[],n=e.childNodes||e;null!=(r=n[i]);i++)!t||h.nodeName(r,t)?s.push(r):h.merge(s,wt(r,t));return void 0===t||t&&h.nodeName(e,t)?h.merge([e],s):s}function Et(e){J.test(e.type)&&(e.defaultChecked=e.checked)}function St(e,t){return h.nodeName(e,"table")&&h.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function xt(e){return e.type=(null!==h.find.attr(e,"type"))+"/"+e.type,e}function Tt(e){var t=vt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Nt(e,t){for(var n,r=0;null!=(n=e[r]);r++)h._data(n,"globalEval",!t||h._data(t[r],"globalEval"))}function Ct(e,t){if(1===t.nodeType&&h.hasData(e)){var n,r,i,s=h._data(e),o=h._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;i>r;r++)h.event.add(t,n,u[n][r])}o.data&&(o.data=h.extend({},o.data))}}function kt(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!l.noCloneEvent&&t[h.expando]){i=h._data(t);for(r in i.events)h.removeEvent(t,r,i.handle);t.removeAttribute(h.expando)}"script"===n&&t.text!==e.text?(xt(t).text=e.text,Tt(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),l.html5Clone&&e.innerHTML&&!h.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&J.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function Ot(t,n){var r,i=h(n.createElement(t)).appendTo(n.body),s=e.getDefaultComputedStyle&&(r=e.getDefaultComputedStyle(i[0]))?r.display:h.css(i[0],"display");return i.detach(),s}function Mt(e){var t=T,n=At[e];return n||(n=Ot(e,t),"none"!==n&&n||(Lt=(Lt||h("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Lt[0].contentWindow||Lt[0].contentDocument).document,t.write(),t.close(),n=Ot(e,t),Lt.detach()),At[e]=n),n}function jt(e,t){return{get:function(){var n=e();if(null!=n)return n?void delete this.get:(this.get=t).apply(this,arguments)}}}function Vt(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Xt.length;while(i--)if(t=Xt[i]+n,t in e)return t;return r}function $t(e,t){for(var n,r,i,s=[],o=0,u=e.length;u>o;o++)r=e[o],r.style&&(s[o]=h._data(r,"olddisplay"),n=r.style.display,t?(s[o]||"none"!==n||(r.style.display=""),""===r.style.display&&V(r)&&(s[o]=h._data(r,"olddisplay",Mt(r.nodeName)))):(i=V(r),(n&&"none"!==n||!i)&&h._data(r,"olddisplay",i?n:h.css(r,"display"))));for(o=0;u>o;o++)r=e[o],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?s[o]||"":"none"));return e}function Jt(e,t,n){var r=Rt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function Kt(e,t,n,r,i){for(var s=n===(r?"border":"content")?4:"width"===t?1:0,o=0;4>s;s+=2)"margin"===n&&(o+=h.css(e,n+X[s],!0,i)),r?("content"===n&&(o-=h.css(e,"padding"+X[s],!0,i)),"margin"!==n&&(o-=h.css(e,"border"+X[s]+"Width",!0,i))):(o+=h.css(e,"padding"+X[s],!0,i),"padding"!==n&&(o+=h.css(e,"border"+X[s]+"Width",!0,i)));return o}function Qt(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,s=Pt(e),o=l.boxSizing&&"border-box"===h.css(e,"boxSizing",!1,s);if(0>=i||null==i){if(i=Ht(e,t,s),(0>i||null==i)&&(i=e.style[t]),Dt.test(i))return i;r=o&&(l.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+Kt(e,t,n||(o?"border":"content"),r,s)+"px"}function Gt(e,t,n,r,i){return new Gt.prototype.init(e,t,n,r,i)}function on(){return setTimeout(function(){Yt=void 0}),Yt=h.now()}function un(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=X[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function an(e,t,n){for(var r,i=(sn[t]||[]).concat(sn["*"]),s=0,o=i.length;o>s;s++)if(r=i[s].call(n,t,e))return r}function fn(e,t,n){var r,i,s,o,u,a,f,c,p=this,d={},v=e.style,m=e.nodeType&&V(e),g=h._data(e,"fxshow");n.queue||(u=h._queueHooks(e,"fx"),null==u.unqueued&&(u.unqueued=0,a=u.empty.fire,u.empty.fire=function(){u.unqueued||a()}),u.unqueued++,p.always(function(){p.always(function(){u.unqueued--,h.queue(e,"fx").length||u.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[v.overflow,v.overflowX,v.overflowY],f=h.css(e,"display"),c="none"===f?h._data(e,"olddisplay")||Mt(e.nodeName):f,"inline"===c&&"none"===h.css(e,"float")&&(l.inlineBlockNeedsLayout&&"inline"!==Mt(e.nodeName)?v.zoom=1:v.display="inline-block")),n.overflow&&(v.overflow="hidden",l.shrinkWrapBlocks()||p.always(function(){v.overflow=n.overflow[0],v.overflowX=n.overflow[1],v.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],en.exec(i)){if(delete t[r],s=s||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;m=!0}d[r]=g&&g[r]||h.style(e,r)}else f=void 0;if(h.isEmptyObject(d))"inline"===("none"===f?Mt(e.nodeName):f)&&(v.display=f);else{g?"hidden"in g&&(m=g.hidden):g=h._data(e,"fxshow",{}),s&&(g.hidden=!m),m?h(e).show():p.done(function(){h(e).hide()}),p.done(function(){var t;h._removeData(e,"fxshow");for(t in d)h.style(e,t,d[t])});for(r in d)o=an(m?g[r]:0,r,p),r in g||(g[r]=o.start,m&&(o.end=o.start,o.start="width"===r||"height"===r?1:0))}}function ln(e,t){var n,r,i,s,o;for(n in e)if(r=h.camelCase(n),i=t[r],s=e[n],h.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=h.cssHooks[r],o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}function cn(e,t,n){var r,i,s=0,o=rn.length,u=h.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;for(var t=Yt||on(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;a>o;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),1>s&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:h.extend({},t),opts:h.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Yt||on(),duration:n.duration,tweens:[],createTween:function(t,n){var r=h.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;for(ln(l,f.opts.specialEasing);o>s;s++)if(r=rn[s].call(f,e,l,f.opts))return r;return h.map(l,an,f),h.isFunction(f.opts.start)&&f.opts.start.call(e,f),h.fx.timer(h.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function Fn(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(O)||[];if(h.isFunction(n))while(r=s[i++])"+"===r.charAt(0)?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function In(e,t,n,r){function o(u){var a;return i[u]=!0,h.each(e[u]||[],function(e,u){var f=u(t,n,r);return"string"!=typeof f||s||i[f]?s?!(a=f):void 0:(t.dataTypes.unshift(f),o(f),!1)}),a}var i={},s=e===Hn;return o(t.dataTypes[0])||!i["*"]&&o("*")}function qn(e,t){var n,r,i=h.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((i[r]?e:n||(n={}))[r]=t[r]);return n&&h.extend(!0,e,n),e}function Rn(e,t,n){var r,i,s,o,u=e.contents,a=e.dataTypes;while("*"===a[0])a.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(o in u)if(u[o]&&u[o].test(i)){a.unshift(o);break}if(a[0]in n)s=a[0];else{for(o in n){if(!a[0]||e.converters[o+" "+a[0]]){s=o;break}r||(r=o)}s=s||r}return s?(s!==a[0]&&a.unshift(s),n[s]):void 0}function Un(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift())if("*"===s)s=a;else if("*"!==a&&a!==s){if(o=f[a+" "+s]||f["* "+s],!o)for(i in f)if(u=i.split(" "),u[1]===s&&(o=f[a+" "+u[0]]||f["* "+u[0]])){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}return{state:"success",data:t}}function Jn(e,t,n,r){var i;if(h.isArray(t))h.each(t,function(t,i){n||Wn.test(e)?r(e,i):Jn(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==h.type(t))r(e,t);else for(i in t)Jn(e+"["+i+"]",t[i],n,r)}function Yn(){try{return new e.XMLHttpRequest}catch(t){}}function Zn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function ir(e){return h.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var n=[],r=n.slice,i=n.concat,s=n.push,o=n.indexOf,u={},a=u.toString,f=u.hasOwnProperty,l={},c="1.11.3",h=function(e,t){return new h.fn.init(e,t)},p=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,d=/^-ms-/,v=/-([\da-z])/gi,m=function(e,t){return t.toUpperCase()};h.fn=h.prototype={jquery:c,constructor:h,selector:"",length:0,toArray:function(){return r.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:r.call(this)},pushStack:function(e){var t=h.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return h.each(this,e,t)},map:function(e){return this.pushStack(h.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:s,sort:n.sort,splice:n.splice},h.extend=h.fn.extend=function(){var e,t,n,r,i,s,o=arguments[0]||{},u=1,a=arguments.length,f=!1;for("boolean"==typeof o&&(f=o,o=arguments[u]||{},u++),"object"==typeof o||h.isFunction(o)||(o={}),u===a&&(o=this,u--);a>u;u++)if(null!=(i=arguments[u]))for(r in i)e=o[r],n=i[r],o!==n&&(f&&n&&(h.isPlainObject(n)||(t=h.isArray(n)))?(t?(t=!1,s=e&&h.isArray(e)?e:[]):s=e&&h.isPlainObject(e)?e:{},o[r]=h.extend(f,s,n)):void 0!==n&&(o[r]=n));return o},h.extend({expando:"jQuery"+(c+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===h.type(e)},isArray:Array.isArray||function(e){return"array"===h.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!h.isArray(e)&&e-parseFloat(e)+1>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==h.type(e)||e.nodeType||h.isWindow(e))return!1;try{if(e.constructor&&!f.call(e,"constructor")&&!f.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(l.ownLast)for(t in e)return f.call(e,t);for(t in e);return void 0===t||f.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?u[a.call(e)]||"object":typeof e},globalEval:function(t){t&&h.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(d,"ms-").replace(v,m)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=g(e);if(n){if(o){for(;s>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(o){for(;s>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(p,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(g(Object(e))?h.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(o)return o.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){var n=+t.length,r=0,i=e.length;while(n>r)e[i++]=t[r++];if(n!==n)while(void 0!==t[r])e[i++]=t[r++];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],s=0,o=e.length,u=!n;o>s;s++)r=!t(e[s],s),r!==u&&i.push(e[s]);return i},map:function(e,t,n){var r,s=0,o=e.length,u=g(e),a=[];if(u)for(;o>s;s++)r=t(e[s],s,n),null!=r&&a.push(r);else for(s in e)r=t(e[s],s,n),null!=r&&a.push(r);return i.apply([],a)},guid:1,proxy:function(e,t){var n,i,s;return"string"==typeof t&&(s=e[t],t=e,e=s),h.isFunction(e)?(n=r.call(arguments,2),i=function(){return e.apply(t||this,n.concat(r.call(arguments)))},i.guid=e.guid=e.guid||h.guid++,i):void 0},now:function(){return+(new Date)},support:l}),h.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){u["[object "+t+"]"]=t.toLowerCase()});var y=function(e){function ot(e,t,r,i){var s,u,f,l,c,d,g,y,S,x;if((t?t.ownerDocument||t:E)!==p&&h(t),t=t||p,r=r||[],l=t.nodeType,"string"!=typeof e||!e||1!==l&&9!==l&&11!==l)return r;if(!i&&v){if(11!==l&&(s=Z.exec(e)))if(f=s[1]){if(9===l){if(u=t.getElementById(f),!u||!u.parentNode)return r;if(u.id===f)return r.push(u),r}else if(t.ownerDocument&&(u=t.ownerDocument.getElementById(f))&&b(t,u)&&u.id===f)return r.push(u),r}else{if(s[2])return D.apply(r,t.getElementsByTagName(e)),r;if((f=s[3])&&n.getElementsByClassName)return D.apply(r,t.getElementsByClassName(f)),r}if(n.qsa&&(!m||!m.test(e))){if(y=g=w,S=t,x=1!==l&&e,1===l&&"object"!==t.nodeName.toLowerCase()){d=o(e),(g=t.getAttribute("id"))?y=g.replace(tt,"\\$&"):t.setAttribute("id",y),y="[id='"+y+"'] ",c=d.length;while(c--)d[c]=y+gt(d[c]);S=et.test(e)&&vt(t.parentNode)||t,x=d.join(",")}if(x)try{return D.apply(r,S.querySelectorAll(x)),r}catch(T){}finally{g||t.removeAttribute("id")}}}return a(e.replace(z,"$1"),t,r,i)}function ut(){function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function at(e){return e[w]=!0,e}function ft(e){var t=p.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function lt(e,t){var n=e.split("|"),i=e.length;while(i--)r.attrHandle[n[i]]=t}function ct(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||L)-(~e.sourceIndex||L);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ht(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function pt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function dt(e){return at(function(t){return t=+t,at(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function vt(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function mt(){}function gt(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function yt(e,t,n){var r=t.dir,i=n&&"parentNode"===r,s=x++;return t.first?function(t,n,s){while(t=t[r])if(1===t.nodeType||i)return e(t,n,s)}:function(t,n,o){var u,a,f=[S,s];if(o){while(t=t[r])if((1===t.nodeType||i)&&e(t,n,o))return!0}else while(t=t[r])if(1===t.nodeType||i){if(a=t[w]||(t[w]={}),(u=a[r])&&u[0]===S&&u[1]===s)return f[2]=u[2];if(a[r]=f,f[2]=e(t,n,o))return!0}}}function bt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function wt(e,t,n){for(var r=0,i=t.length;i>r;r++)ot(e,t[r],n);return n}function Et(e,t,n,r,i){for(var s,o=[],u=0,a=e.length,f=null!=t;a>u;u++)(s=e[u])&&(!n||n(s,r,i))&&(o.push(s),f&&t.push(u));return o}function St(e,t,n,r,i,s){return r&&!r[w]&&(r=St(r)),i&&!i[w]&&(i=St(i,s)),at(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||wt(t||"*",u.nodeType?[u]:u,[]),m=!e||!s&&t?v:Et(v,h,e,u,a),g=n?i||(s?e:d||r)?[]:o:m;if(n&&n(m,g,u,a),r){f=Et(g,p),r(f,[],u,a),l=f.length;while(l--)(c=f[l])&&(g[p[l]]=!(m[p[l]]=c))}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?H(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=Et(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):D.apply(o,g)})}function xt(e){for(var t,n,i,s=e.length,o=r.relative[e[0].type],u=o||r.relative[" "],a=o?1:0,l=yt(function(e){return e===t},u,!0),c=yt(function(e){return H(t,e)>-1},u,!0),h=[function(e,n,r){var i=!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r));return t=null,i}];s>a;a++)if(n=r.relative[e[a].type])h=[yt(bt(h),n)];else{if(n=r.filter[e[a].type].apply(null,e[a].matches),n[w]){for(i=++a;s>i;i++)if(r.relative[e[i].type])break;return St(a>1&&bt(h),a>1&&gt(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(z,"$1"),n,i>a&&xt(e.slice(a,i)),s>i&&xt(e=e.slice(i)),s>i&&gt(e))}h.push(n)}return bt(h)}function Tt(e,t){var n=t.length>0,i=e.length>0,s=function(s,o,u,a,l){var c,h,d,v=0,m="0",g=s&&[],y=[],b=f,w=s||i&&r.find.TAG("*",l),E=S+=null==b?1:Math.random()||.1,x=w.length;for(l&&(f=o!==p&&o);m!==x&&null!=(c=w[m]);m++){if(i&&c){h=0;while(d=e[h++])if(d(c,o,u)){a.push(c);break}l&&(S=E)}n&&((c=!d&&c)&&v--,s&&g.push(c))}if(v+=m,n&&m!==v){h=0;while(d=t[h++])d(g,y,o,u);if(s){if(v>0)while(m--)g[m]||y[m]||(y[m]=M.call(a));y=Et(y)}D.apply(a,y),l&&!s&&y.length>0&&v+t.length>1&&ot.uniqueSort(a)}return l&&(S=E,f=b),g};return n?at(s):s}var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w="sizzle"+1*new Date,E=e.document,S=0,x=0,T=ut(),N=ut(),C=ut(),k=function(e,t){return e===t&&(c=!0),0},L=1<<31,A={}.hasOwnProperty,O=[],M=O.pop,_=O.push,D=O.push,P=O.slice,H=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",j="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",I=F.replace("w","w#"),q="\\["+j+"*("+F+")(?:"+j+"*([*^$|!~]?=)"+j+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+j+"*\\]",R=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+q+")*)|.*)\\)|)",U=new RegExp(j+"+","g"),z=new RegExp("^"+j+"+|((?:^|[^\\\\])(?:\\\\.)*)"+j+"+$","g"),W=new RegExp("^"+j+"*,"+j+"*"),X=new RegExp("^"+j+"*([>+~]|"+j+")"+j+"*"),V=new RegExp("="+j+"*([^\\]'\"]*?)"+j+"*\\]","g"),$=new RegExp(R),J=new RegExp("^"+I+"$"),K={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F.replace("w","w*")+")"),ATTR:new RegExp("^"+q),PSEUDO:new RegExp("^"+R),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+j+"*(even|odd|(([+-]|)(\\d*)n|)"+j+"*(?:([+-]|)"+j+"*(\\d+)|))"+j+"*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^"+j+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+j+"*((?:-\\d)?\\d*)"+j+"*\\)|)(?=[^-]|$)","i")},Q=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/[+~]/,tt=/'|\\/g,nt=new RegExp("\\\\([\\da-f]{1,6}"+j+"?|("+j+")|.)","ig"),rt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},it=function(){h()};try{D.apply(O=P.call(E.childNodes),E.childNodes),O[E.childNodes.length].nodeType}catch(st){D={apply:O.length?function(e,t){_.apply(e,P.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}n=ot.support={},s=ot.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},h=ot.setDocument=function(e){var t,i,o=e?e.ownerDocument||e:E;return o!==p&&9===o.nodeType&&o.documentElement?(p=o,d=o.documentElement,i=o.defaultView,i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",it,!1):i.attachEvent&&i.attachEvent("onunload",it)),v=!s(o),n.attributes=ft(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ft(function(e){return e.appendChild(o.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Y.test(o.getElementsByClassName),n.getById=ft(function(e){return d.appendChild(e).id=w,!o.getElementsByName||!o.getElementsByName(w).length}),n.getById?(r.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&v){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},r.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){return e.getAttribute("id")===t}}):(delete r.find.ID,r.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),r.find.TAG=n.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if("*"===e){while(n=s[i++])1===n.nodeType&&r.push(n);return r}return s},r.find.CLASS=n.getElementsByClassName&&function(e,t){return v?t.getElementsByClassName(e):void 0},g=[],m=[],(n.qsa=Y.test(o.querySelectorAll))&&(ft(function(e){d.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+j+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+j+"*(?:value|"+B+")"),e.querySelectorAll("[id~="+w+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||m.push(".#.+[+~]")}),ft(function(e){var t=o.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+j+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=Y.test(y=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&ft(function(e){n.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),g.push("!=",R)}),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=Y.test(d.compareDocumentPosition),b=t||Y.test(d.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&1===r.nodeType&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},k=t?function(e,t){if(e===t)return c=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===o||e.ownerDocument===E&&b(E,e)?-1:t===o||t.ownerDocument===E&&b(E,t)?1:l?H(l,e)-H(l,t):0:4&r?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,r=0,i=e.parentNode,s=t.parentNode,u=[e],a=[t];if(!i||!s)return e===o?-1:t===o?1:i?-1:s?1:l?H(l,e)-H(l,t):0;if(i===s)return ct(e,t);n=e;while(n=n.parentNode)u.unshift(n);n=t;while(n=n.parentNode)a.unshift(n);while(u[r]===a[r])r++;return r?ct(u[r],a[r]):u[r]===E?-1:a[r]===E?1:0},o):p},ot.matches=function(e,t){return ot(e,null,null,t)},ot.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&h(e),t=t.replace(V,"='$1']"),!(!n.matchesSelector||!v||g&&g.test(t)||m&&m.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return ot(t,p,null,[e]).length>0},ot.contains=function(e,t){return(e.ownerDocument||e)!==p&&h(e),b(e,t)},ot.attr=function(e,t){(e.ownerDocument||e)!==p&&h(e);var i=r.attrHandle[t.toLowerCase()],s=i&&A.call(r.attrHandle,t.toLowerCase())?i(e,t,!v):void 0;return void 0!==s?s:n.attributes||!v?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},ot.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ot.uniqueSort=function(e){var t,r=[],i=0,s=0;if(c=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(k),c){while(t=e[s++])t===e[s]&&(i=r.push(s));while(i--)e.splice(r[i],1)}return l=null,e},i=ot.getText=function(e){var t,n="",r=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===s||4===s)return e.nodeValue}else while(t=e[r++])n+=i(t);return n},r=ot.selectors={cacheLength:50,createPseudo:at,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(nt,rt),e[3]=(e[3]||e[4]||e[5]||"").replace(nt,rt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ot.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ot.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return K.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&$.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(nt,rt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+j+")"+e+"("+j+"|$)"))&&T(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ot.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(U," ")+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;d=v="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&y){l=m[w]||(m[w]={}),f=l[e]||[],p=f[0]===S&&f[1],h=f[0]===S&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(1===c.nodeType&&++h&&c===t){l[e]=[S,p,h];break}}else if(y&&(f=(t[w]||(t[w]={}))[e])&&f[0]===S)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:1===c.nodeType)&&++h&&(y&&((c[w]||(c[w]={}))[e]=[S,h]),c===t))break;return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||ot.error("unsupported pseudo: "+e);return i[w]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?at(function(e,n){var r,s=i(e,t),o=s.length;while(o--)r=H(e,s[o]),e[r]=!(n[r]=s[o])}):function(e){return i(e,0,n)}):i}},pseudos:{not:at(function(e){var t=[],n=[],r=u(e.replace(z,"$1"));return r[w]?at(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)(s=o[u])&&(e[u]=!(t[u]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),t[0]=null,!n.pop()}}),has:at(function(e){return function(t){return ot(e,t).length>0}}),contains:at(function(e){return e=e.replace(nt,rt),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:at(function(e){return J.test(e||"")||ot.error("unsupported lang: "+e),e=e.replace(nt,rt).toLowerCase(),function(t){var n;do if(n=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:dt(function(){return[0]}),last:dt(function(e,t){return[t-1]}),eq:dt(function(e,t,n){return[0>n?n+t:n]}),even:dt(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:dt(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:dt(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:dt(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},r.pseudos.nth=r.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=ht(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=pt(t);return mt.prototype=r.filters=r.pseudos,r.setFilters=new mt,o=ot.tokenize=function(e,t){var n,i,s,o,u,a,f,l=N[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=r.preFilter;while(u){(!n||(i=W.exec(u)))&&(i&&(u=u.slice(i[0].length)||u),a.push(s=[])),n=!1,(i=X.exec(u))&&(n=i.shift(),s.push({value:n,type:i[0].replace(z," ")}),u=u.slice(n.length));for(o in r.filter)!(i=K[o].exec(u))||f[o]&&!(i=f[o](i))||(n=i.shift(),s.push({value:n,type:o,matches:i}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ot.error(e):N(e,a).slice(0)},u=ot.compile=function(e,t){var n,r=[],i=[],s=C[e+" "];if(!s){t||(t=o(e)),n=t.length;while(n--)s=xt(t[n]),s[w]?r.push(s):i.push(s);s=C(e,Tt(i,r)),s.selector=e}return s},a=ot.select=function(e,t,i,s){var a,f,l,c,h,p="function"==typeof e&&e,d=!s&&o(e=p.selector||e);if(i=i||[],1===d.length){if(f=d[0]=d[0].slice(0),f.length>2&&"ID"===(l=f[0]).type&&n.getById&&9===t.nodeType&&v&&r.relative[f[1].type]){if(t=(r.find.ID(l.matches[0].replace(nt,rt),t)||[])[0],!t)return i;p&&(t=t.parentNode),e=e.slice(f.shift().value.length)}a=K.needsContext.test(e)?0:f.length;while(a--){if(l=f[a],r.relative[c=l.type])break;if((h=r.find[c])&&(s=h(l.matches[0].replace(nt,rt),et.test(f[0].type)&&vt(t.parentNode)||t))){if(f.splice(a,1),e=s.length&&gt(f),!e)return D.apply(i,s),i;break}}}return(p||u(e,d))(s,t,!v,i,et.test(e)&&vt(t.parentNode)||t),i},n.sortStable=w.split("").sort(k).join("")===w,n.detectDuplicates=!!c,h(),n.sortDetached=ft(function(e){return 1&e.compareDocumentPosition(p.createElement("div"))}),ft(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||lt("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ft(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||lt("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),ft(function(e){return null==e.getAttribute("disabled")})||lt(B,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),ot}(e);h.find=y,h.expr=y.selectors,h.expr[":"]=h.expr.pseudos,h.unique=y.uniqueSort,h.text=y.getText,h.isXMLDoc=y.isXML,h.contains=y.contains;var b=h.expr.match.needsContext,w=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,E=/^.[^:#\[\.,]*$/;h.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?h.find.matchesSelector(r,e)?[r]:[]:h.find.matches(e,h.grep(t,function(e){return 1===e.nodeType}))},h.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(h(e).filter(function(){for(t=0;i>t;t++)if(h.contains(r[t],this))return!0}));for(t=0;i>t;t++)h.find(e,r[t],n);return n=this.pushStack(i>1?h.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(S(this,e||[],!1))},not:function(e){return this.pushStack(S(this,e||[],!0))},is:function(e){return!!S(this,"string"==typeof e&&b.test(e)?h(e):e||[],!1).length}});var x,T=e.document,N=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=h.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:N.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||x).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof h?t[0]:t,h.merge(this,h.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:T,!0)),w.test(n[1])&&h.isPlainObject(t))for(n in t)h.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if(r=T.getElementById(n[2]),r&&r.parentNode){if(r.id!==n[2])return x.find(e);this.length=1,this[0]=r}return this.context=T,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):h.isFunction(e)?"undefined"!=typeof x.ready?x.ready(e):e(h):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),h.makeArray(e,this))};C.prototype=h.fn,x=h(T);var k=/^(?:parents|prev(?:Until|All))/,L={children:!0,contents:!0,next:!0,prev:!0};h.extend({dir:function(e,t,n){var r=[],i=e[t];while(i&&9!==i.nodeType&&(void 0===n||1!==i.nodeType||!h(i).is(n)))1===i.nodeType&&r.push(i),i=i[t];return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),h.fn.extend({has:function(e){var t,n=h(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(h.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,s=[],o=b.test(e)||"string"!=typeof e?h(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&h.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?h.unique(s):s)},index:function(e){return e?"string"==typeof e?h.inArray(this[0],h(e)):h.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(h.unique(h.merge(this.get(),h(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),h.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h.dir(e,"parentNode")},parentsUntil:function(e,t,n){return h.dir(e,"parentNode",n)},next:function(e){return A(e,"nextSibling")},prev:function(e){return A(e,"previousSibling")},nextAll:function(e){return h.dir(e,"nextSibling")},prevAll:function(e){return h.dir(e,"previousSibling")},nextUntil:function(e,t,n){return h.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return h.dir(e,"previousSibling",n)},siblings:function(e){return h.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return h.sibling(e.firstChild)},contents:function(e){return h.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:h.merge([],e.childNodes)}},function(e,t){h.fn[e]=function(n,r){var i=h.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=h.filter(r,i)),this.length>1&&(L[e]||(i=h.unique(i)),k.test(e)&&(i=i.reverse())),this.pushStack(i)}});var O=/\S+/g,M={};h.Callbacks=function(e){e="string"==typeof e?M[e]||_(e):h.extend({},e);var t,n,r,i,s,o,u=[],a=!e.once&&[],f=function(c){for(n=e.memory&&c,r=!0,s=o||0,o=0,i=u.length,t=!0;u&&i>s;s++)if(u[s].apply(c[0],c[1])===!1&&e.stopOnFalse){n=!1;break}t=!1,u&&(a?a.length&&f(a.shift()):n?u=[]:l.disable())},l={add:function(){if(u){var r=u.length;!function s(t){h.each(t,function(t,n){var r=h.type(n);"function"===r?e.unique&&l.has(n)||u.push(n):n&&n.length&&"string"!==r&&s(n)})}(arguments),t?i=u.length:n&&(o=r,f(n))}return this},remove:function(){return u&&h.each(arguments,function(e,n){var r;while((r=h.inArray(n,u,r))>-1)u.splice(r,1),t&&(i>=r&&i--,s>=r&&s--)}),this},has:function(e){return e?h.inArray(e,u)>-1:!!u&&!!u.length},empty:function(){return u=[],i=0,this},disable:function(){return u=a=n=void 0,this},disabled:function(){return!u},lock:function(){return a=void 0,n||l.disable(),this},locked:function(){return!a},fireWith:function(e,n){return!u||r&&!a||(n=n||[],n=[e,n.slice?n.slice():n],t?a.push(n):f(n)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},h.extend({Deferred:function(e){var t=[["resolve","done",h.Callbacks("once memory"),"resolved"],["reject","fail",h.Callbacks("once memory"),"rejected"],["notify","progress",h.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return h.Deferred(function(n){h.each(t,function(t,s){var o=h.isFunction(e[t])&&e[t];i[s[1]](function(){var e=o&&o.apply(this,arguments);e&&h.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s[0]+"With"](this===r?n.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?h.extend(e,r):r}},i={};return r.pipe=r.then,h.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[1^e][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=r.call(arguments),i=n.length,s=1!==i||e&&h.isFunction(e.promise)?i:0,o=1===s?e:h.Deferred(),u=function(e,t,n){return function(i){t[e]=this,n[e]=arguments.length>1?r.call(arguments):i,n===a?o.notifyWith(t,n):--s||o.resolveWith(t,n)}},a,f,l;if(i>1)for(a=new Array(i),f=new Array(i),l=new Array(i);i>t;t++)n[t]&&h.isFunction(n[t].promise)?n[t].promise().done(u(t,l,n)).fail(o.reject).progress(u(t,f,a)):--s;return s||o.resolveWith(l,n),o.promise()}});var D;h.fn.ready=function(e){return h.ready.promise().done(e),this},h.extend({isReady:!1,readyWait:1,holdReady:function(e){e?h.readyWait++:h.ready(!0)},ready:function(e){if(e===!0?!--h.readyWait:!h.isReady){if(!T.body)return setTimeout(h.ready);h.isReady=!0,e!==!0&&--h.readyWait>0||(D.resolveWith(T,[h]),h.fn.triggerHandler&&(h(T).triggerHandler("ready"),h(T).off("ready")))}}}),h.ready.promise=function(t){if(!D)if(D=h.Deferred(),"complete"===T.readyState)setTimeout(h.ready);else if(T.addEventListener)T.addEventListener("DOMContentLoaded",H,!1),e.addEventListener("load",H,!1);else{T.attachEvent("onreadystatechange",H),e.attachEvent("onload",H);var n=!1;try{n=null==e.frameElement&&T.documentElement}catch(r){}n&&n.doScroll&&!function i(){if(!h.isReady){try{n.doScroll("left")}catch(e){return setTimeout(i,50)}P(),h.ready()}}()}return D.promise(t)};var B="undefined",j;for(j in h(l))break;l.ownLast="0"!==j,l.inlineBlockNeedsLayout=!1,h(function(){var e,t,n,r;n=T.getElementsByTagName("body")[0],n&&n.style&&(t=T.createElement("div"),r=T.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),typeof t.style.zoom!==B&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",l.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(r))}),function(){var e=T.createElement("div");if(null==l.deleteExpando){l.deleteExpando=!0;try{delete e.test}catch(t){l.deleteExpando=!1}}e=null}(),h.acceptData=function(e){var t=h.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return 1!==n&&9!==n?!1:!t||t!==!0&&e.getAttribute("classid")===t};var F=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,I=/([A-Z])/g;h.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?h.cache[e[h.expando]]:e[h.expando],!!e&&!R(e)},data:function(e,t,n){return U(e,t,n)},removeData:function(e,t){return z(e,t)},_data:function(e,t,n){return U(e,t,n,!0)},_removeData:function(e,t){return z(e,t,!0)}}),h.fn.extend({data:function(e,t){var n,r,i,s=this[0],o=s&&s.attributes;if(void 0===e){if(this.length&&(i=h.data(s),1===s.nodeType&&!h._data(s,"parsedAttrs"))){n=o.length;while(n--)o[n]&&(r=o[n].name,0===r.indexOf("data-")&&(r=h.camelCase(r.slice(5)),q(s,r,i[r])));h._data(s,"parsedAttrs",!0)}return i}return"object"==typeof e?this.each(function(){h.data(this,e)}):arguments.length>1?this.each(function(){h.data(this,e,t)}):s?q(s,e,h.data(s,e)):void 0},removeData:function(e){return this.each(function(){h.removeData(this,e)})}}),h.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=h._data(e,t),n&&(!r||h.isArray(n)?r=h._data(e,t,h.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=h.queue(e,t),r=n.length,i=n.shift(),s=h._queueHooks(e,t),o=function(){h.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return h._data(e,n)||h._data(e,n,{empty:h.Callbacks("once memory").add(function(){h._removeData(e,t+"queue"),h._removeData(e,n)})})}}),h.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?h.queue(this[0],e):void 0===t?this:this.each(function(){var n=h.queue(this,e,t);h._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&h.dequeue(this,e)})},dequeue:function(e){return this.each(function(){h.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=h.Deferred(),s=this,o=this.length,u=function(){--r||i.resolveWith(s,[s])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(o--)n=h._data(s[o],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(u));return u(),i.promise(t)}});var W=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,X=["Top","Right","Bottom","Left"],V=function(e,t){return e=t||e,"none"===h.css(e,"display")||!h.contains(e.ownerDocument,e)},$=h.access=function(e,t,n,r,i,s,o){var u=0,a=e.length,f=null==n;if("object"===h.type(n)){i=!0;for(u in n)h.access(e,t,u,n[u],!0,s,o)}else if(void 0!==r&&(i=!0,h.isFunction(r)||(o=!0),f&&(o?(t.call(e,r),t=null):(f=t,t=function(e,t,n){return f.call(h(e),n)})),t))for(;a>u;u++)t(e[u],n,o?r:r.call(e[u],u,t(e[u],n)));return i?e:f?t.call(e):a?t(e[0],n):s},J=/^(?:checkbox|radio)$/i;!function(){var e=T.createElement("input"),t=T.createElement("div"),n=T.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",l.leadingWhitespace=3===t.firstChild.nodeType,l.tbody=!t.getElementsByTagName("tbody").length,l.htmlSerialize=!!t.getElementsByTagName("link").length,l.html5Clone="<:nav></:nav>"!==T.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,n.appendChild(e),l.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,n.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",l.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,l.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){l.noCloneEvent=!1}),t.cloneNode(!0).click()),null==l.deleteExpando){l.deleteExpando=!0;try{delete t.test}catch(r){l.deleteExpando=!1}}}(),function(){var t,n,r=T.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(l[t+"Bubbles"]=n in e)||(r.setAttribute(n,"t"),l[t+"Bubbles"]=r.attributes[n].expando===!1);r=null}();var K=/^(?:input|select|textarea)$/i,Q=/^key/,G=/^(?:mouse|pointer|contextmenu)|click/,Y=/^(?:focusinfocus|focusoutblur)$/,Z=/^([^.]*)(?:\.(.+)|)$/;h.event={global:{},add:function(e,t,n,r,i){var s,o,u,a,f,l,c,p,d,v,m,g=h._data(e);if(g){n.handler&&(a=n,n=a.handler,i=a.selector),n.guid||(n.guid=h.guid++),(o=g.events)||(o=g.events={}),(l=g.handle)||(l=g.handle=function(e){return typeof h===B||e&&h.event.triggered===e.type?void 0:h.event.dispatch.apply(l.elem,arguments)},l.elem=e),t=(t||"").match(O)||[""],u=t.length;while(u--)s=Z.exec(t[u])||[],d=m=s[1],v=(s[2]||"").split(".").sort(),d&&(f=h.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=h.event.special[d]||{},c=h.extend({type:d,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&h.expr.match.needsContext.test(i),namespace:v.join(".")},a),(p=o[d])||(p=o[d]=[],p.delegateCount=0,f.setup&&f.setup.call(e,r,v,l)!==!1||(e.addEventListener?e.addEventListener(d,l,!1):e.attachEvent&&e.attachEvent("on"+d,l))),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),h.event.global[d]=!0);e=null}},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,p,d,v,m,g=h.hasData(e)&&h._data(e);if(g&&(l=g.events)){t=(t||"").match(O)||[""],f=t.length;while(f--)if(u=Z.exec(t[f])||[],d=m=u[1],v=(u[2]||"").split(".").sort(),d){c=h.event.special[d]||{},d=(r?c.delegateType:c.bindType)||d,p=l[d]||[],u=u[2]&&new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=p.length;while(s--)o=p[s],!i&&m!==o.origType||n&&n.guid!==o.guid||u&&!u.test(o.namespace)||r&&r!==o.selector&&("**"!==r||!o.selector)||(p.splice(s,1),o.selector&&p.delegateCount--,c.remove&&c.remove.call(e,o));a&&!p.length&&(c.teardown&&c.teardown.call(e,v,g.handle)!==!1||h.removeEvent(e,d,g.handle),delete l[d])}else for(d in l)h.event.remove(e,d+t[f],n,r,!0);h.isEmptyObject(l)&&(delete g.handle,h._removeData(e,"events"))}},trigger:function(t,n,r,i){var s,o,u,a,l,c,p,d=[r||T],v=f.call(t,"type")?t.type:t,m=f.call(t,"namespace")?t.namespace.split("."):[];if(u=c=r=r||T,3!==r.nodeType&&8!==r.nodeType&&!Y.test(v+h.event.triggered)&&(v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),o=v.indexOf(":")<0&&"on"+v,t=t[h.expando]?t:new h.Event(v,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=m.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:h.makeArray(n,[t]),l=h.event.special[v]||{},i||!l.trigger||l.trigger.apply(r,n)!==!1)){if(!i&&!l.noBubble&&!h.isWindow(r)){for(a=l.delegateType||v,Y.test(a+v)||(u=u.parentNode);u;u=u.parentNode)d.push(u),c=u;c===(r.ownerDocument||T)&&d.push(c.defaultView||c.parentWindow||e)}p=0;while((u=d[p++])&&!t.isPropagationStopped())t.type=p>1?a:l.bindType||v,s=(h._data(u,"events")||{})[t.type]&&h._data(u,"handle"),s&&s.apply(u,n),s=o&&u[o],s&&s.apply&&h.acceptData(u)&&(t.result=s.apply(u,n),t.result===!1&&t.preventDefault());if(t.type=v,!i&&!t.isDefaultPrevented()&&(!l._default||l._default.apply(d.pop(),n)===!1)&&h.acceptData(r)&&o&&r[v]&&!h.isWindow(r)){c=r[o],c&&(r[o]=null),h.event.triggered=v;try{r[v]()}catch(g){}h.event.triggered=void 0,c&&(r[o]=c)}return t.result}},dispatch:function(e){e=h.event.fix(e);var t,n,i,s,o,u=[],a=r.call(arguments),f=(h._data(this,"events")||{})[e.type]||[],l=h.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){u=h.event.handlers.call(this,e,f),t=0;while((s=u[t++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,o=0;while((i=s.handlers[o++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,n=((h.event.special[i.origType]||{}).handle||i.handler).apply(s.elem,a),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,s,o=[],u=t.delegateCount,a=e.target;if(u&&a.nodeType&&(!e.button||"click"!==e.type))for(;a!=this;a=a.parentNode||this)if(1===a.nodeType&&(a.disabled!==!0||"click"!==e.type)){for(i=[],s=0;u>s;s++)r=t[s],n=r.selector+" ",void 0===i[n]&&(i[n]=r.needsContext?h(n,this).index(a)>=0:h.find(n,this,null,[a]).length),i[n]&&i.push(r);i.length&&o.push({elem:a,handlers:i})}return u<t.length&&o.push({elem:this,handlers:t.slice(u)}),o},fix:function(e){if(e[h.expando])return e;var t,n,r,i=e.type,s=e,o=this.fixHooks[i];o||(this.fixHooks[i]=o=G.test(i)?this.mouseHooks:Q.test(i)?this.keyHooks:{}),r=o.props?this.props.concat(o.props):this.props,e=new h.Event(s),t=r.length;while(t--)n=r[t],e[n]=s[n];return e.target||(e.target=s.srcElement||T),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,o.filter?o.filter(e,s):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,s=t.button,o=t.fromElement;return null==e.pageX&&null!=t.clientX&&(r=e.target.ownerDocument||T,i=r.documentElement,n=r.body,e.pageX=t.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&o&&(e.relatedTarget=o===e.target?t.toElement:o),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==nt()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===nt()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return h.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return h.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=h.extend(new h.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?h.event.trigger(i,null,t):h.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},h.removeEvent=T.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===B&&(e[r]=null),e.detachEvent(r,n))},h.Event=function(e,t){return this instanceof h.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?et:tt):this.type=e,t&&h.extend(this,t),this.timeStamp=e&&e.timeStamp||h.now(),void (this[h.expando]=!0)):new h.Event(e,t)},h.Event.prototype={isDefaultPrevented:tt,isPropagationStopped:tt,isImmediatePropagationStopped:tt,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=et,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=et,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=et,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},h.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){h.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;return(!i||i!==r&&!h.contains(r,i))&&(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),l.submitBubbles||(h.event.special.submit={setup:function(){return h.nodeName(this,"form")?!1:void h.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=h.nodeName(t,"input")||h.nodeName(t,"button")?t.form:void 0;n&&!h._data(n,"submitBubbles")&&(h.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),h._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&h.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return h.nodeName(this,"form")?!1:void h.event.remove(this,"._submit")}}),l.changeBubbles||(h.event.special.change={setup:function(){return K.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(h.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),h.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),h.event.simulate("change",this,e,!0)})),!1):void h.event.add(this,"beforeactivate._change",function(e){var t=e.target;K.test(t.nodeName)&&!h._data(t,"changeBubbles")&&(h.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||h.event.simulate("change",this.parentNode,e,!0)}),h._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return h.event.remove(this,"._change"),!K.test(this.nodeName)}}),l.focusinBubbles||h.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){h.event.simulate(t,e.target,h.event.fix(e),!0)};h.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=h._data(r,t);i||r.addEventListener(e,n,!0),h._data(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=h._data(r,t)-1;i?h._data(r,t,i):(r.removeEventListener(e,n,!0),h._removeData(r,t))}}}),h.fn.extend({on:function(e,t,n,r,i){var s,o;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(s in e)this.on(s,t,n,e[s],i);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),r===!1)r=tt;else if(!r)return this;return 1===i&&(o=r,r=function(e){return h().off(e),o.apply(this,arguments)},r.guid=o.guid||(o.guid=h.guid++)),this.each(function(){h.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,h(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=tt),this.each(function(){h.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){h.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?h.event.trigger(e,t,n,!0):void 0}});var it="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",st=/ jQuery\d+="(?:null|\d+)"/g,ot=new RegExp("<(?:"+it+")[\\s/>]","i"),ut=/^\s+/,at=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ft=/<([\w:]+)/,lt=/<tbody/i,ct=/<|&#?\w+;/,ht=/<(?:script|style|link)/i,pt=/checked\s*(?:[^=]|=\s*.checked.)/i,dt=/^$|\/(?:java|ecma)script/i,vt=/^true\/(.*)/,mt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,gt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:l.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},yt=rt(T),bt=yt.appendChild(T.createElement("div"));gt.optgroup=gt.option,gt.tbody=gt.tfoot=gt.colgroup=gt.caption=gt.thead,gt.th=gt.td,h.extend({clone:function(e,t,n){var r,i,s,o,u,a=h.contains(e.ownerDocument,e);if(l.html5Clone||h.isXMLDoc(e)||!ot.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(bt.innerHTML=e.outerHTML,bt.removeChild(s=bt.firstChild)),!(l.noCloneEvent&&l.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||h.isXMLDoc(e)))for(r=wt(s),u=wt(e),o=0;null!=(i=u[o]);++o)r[o]&&kt(i,r[o]);if(t)if(n)for(u=u||wt(e),r=r||wt(s),o=0;null!=(i=u[o]);o++)Ct(i,r[o]);else Ct(e,s);return r=wt(s,"script"),r.length>0&&Nt(r,!a&&wt(e,"script")),r=u=i=null,s},buildFragment:function(e,t,n,r){for(var i,s,o,u,a,f,c,p=e.length,d=rt(t),v=[],m=0;p>m;m++)if(s=e[m],s||0===s)if("object"===h.type(s))h.merge(v,s.nodeType?[s]:s);else if(ct.test(s)){u=u||d.appendChild(t.createElement("div")),a=(ft.exec(s)||["",""])[1].toLowerCase(),c=gt[a]||gt._default,u.innerHTML=c[1]+s.replace(at,"<$1></$2>")+c[2],i=c[0];while(i--)u=u.lastChild;if(!l.leadingWhitespace&&ut.test(s)&&v.push(t.createTextNode(ut.exec(s)[0])),!l.tbody){s="table"!==a||lt.test(s)?"<table>"!==c[1]||lt.test(s)?0:u:u.firstChild,i=s&&s.childNodes.length;while(i--)h.nodeName(f=s.childNodes[i],"tbody")&&!f.childNodes.length&&s.removeChild(f)}h.merge(v,u.childNodes),u.textContent="";while(u.firstChild)u.removeChild(u.firstChild);u=d.lastChild}else v.push(t.createTextNode(s));u&&d.removeChild(u),l.appendChecked||h.grep(wt(v,"input"),Et),m=0;while(s=v[m++])if((!r||-1===h.inArray(s,r))&&(o=h.contains(s.ownerDocument,s),u=wt(d.appendChild(s),"script"),o&&Nt(u),n)){i=0;while(s=u[i++])dt.test(s.type||"")&&n.push(s)}return u=null,d},cleanData:function(e,t){for(var r,i,s,o,u=0,a=h.expando,f=h.cache,c=l.deleteExpando,p=h.event.special;null!=(r=e[u]);u++)if((t||h.acceptData(r))&&(s=r[a],o=s&&f[s])){if(o.events)for(i in o.events)p[i]?h.event.remove(r,i):h.removeEvent(r,i,o.handle);f[s]&&(delete f[s],c?delete r[a]:typeof r.removeAttribute!==B?r.removeAttribute(a):r[a]=null,n.push(s))}}}),h.fn.extend({text:function(e){return $(this,function(e){return void 0===e?h.text(this):this.empty().append((this[0]&&this[0].ownerDocument||T).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=St(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=St(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?h.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||h.cleanData(wt(n)),n.parentNode&&(t&&h.contains(n.ownerDocument,n)&&Nt(wt(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){1===e.nodeType&&h.cleanData(wt(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&h.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return h.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(st,""):void 0;if(!("string"!=typeof e||ht.test(e)||!l.htmlSerialize&&ot.test(e)||!l.leadingWhitespace&&ut.test(e)||gt[(ft.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(at,"<$1></$2>");try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(h.cleanData(wt(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,h.cleanData(wt(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=i.apply([],e);var n,r,s,o,u,a,f=0,c=this.length,p=this,d=c-1,v=e[0],m=h.isFunction(v);if(m||c>1&&"string"==typeof v&&!l.checkClone&&pt.test(v))return this.each(function(n){var r=p.eq(n);m&&(e[0]=v.call(this,n,r.html())),r.domManip(e,t)});if(c&&(a=h.buildFragment(e,this[0].ownerDocument,!1,this),n=a.firstChild,1===a.childNodes.length&&(a=n),n)){for(o=h.map(wt(a,"script"),xt),s=o.length;c>f;f++)r=a,f!==d&&(r=h.clone(r,!0,!0),s&&h.merge(o,wt(r,"script"))),t.call(this[f],r,f);if(s)for(u=o[o.length-1].ownerDocument,h.map(o,Tt),f=0;s>f;f++)r=o[f],dt.test(r.type||"")&&!h._data(r,"globalEval")&&h.contains(u,r)&&(r.src?h._evalUrl&&h._evalUrl(r.src):h.globalEval((r.text||r.textContent||r.innerHTML||"").replace(mt,"")));a=n=null}return this}}),h.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){h.fn[e]=function(e){for(var n,r=0,i=[],o=h(e),u=o.length-1;u>=r;r++)n=r===u?this:this.clone(!0),h(o[r])[t](n),s.apply(i,n.get());return this.pushStack(i)}});var Lt,At={};!function(){var e;l.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,n,r;return n=T.getElementsByTagName("body")[0],n&&n.style?(t=T.createElement("div"),r=T.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),typeof t.style.zoom!==B&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(T.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(r),e):void 0}}();var _t=/^margin/,Dt=new RegExp("^("+W+")(?!px)[a-z%]+$","i"),Pt,Ht,Bt=/^(top|right|bottom|left)$/;e.getComputedStyle?(Pt=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)},Ht=function(e,t,n){var r,i,s,o,u=e.style;return n=n||Pt(e),o=n?n.getPropertyValue(t)||n[t]:void 0,n&&(""!==o||h.contains(e.ownerDocument,e)||(o=h.style(e,t)),Dt.test(o)&&_t.test(t)&&(r=u.width,i=u.minWidth,s=u.maxWidth,u.minWidth=u.maxWidth=u.width=o,o=n.width,u.width=r,u.minWidth=i,u.maxWidth=s)),void 0===o?o:o+""}):T.documentElement.currentStyle&&(Pt=function(e){return e.currentStyle},Ht=function(e,t,n){var r,i,s,o,u=e.style;return n=n||Pt(e),o=n?n[t]:void 0,null==o&&u&&u[t]&&(o=u[t]),Dt.test(o)&&!Bt.test(t)&&(r=u.left,i=e.runtimeStyle,s=i&&i.left,s&&(i.left=e.currentStyle.left),u.left="fontSize"===t?"1em":o,o=u.pixelLeft+"px",u.left=r,s&&(i.left=s)),void 0===o?o:o+""||"auto"}),!function(){var t,n,r,i,s,o,u;if(t=T.createElement("div"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=t.getElementsByTagName("a")[0],n=r&&r.style){n.cssText="float:left;opacity:.5",l.opacity="0.5"===n.opacity,l.cssFloat=!!n.cssFloat,t.style.backgroundClip="content-box",t.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===t.style.backgroundClip,l.boxSizing=""===n.boxSizing||""===n.MozBoxSizing||""===n.WebkitBoxSizing,h.extend(l,{reliableHiddenOffsets:function(){return null==o&&a(),o},boxSizingReliable:function(){return null==s&&a(),s},pixelPosition:function(){return null==i&&a(),i},reliableMarginRight:function(){return null==u&&a(),u}});function a(){var t,n,r,a;n=T.getElementsByTagName("body")[0],n&&n.style&&(t=T.createElement("div"),r=T.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",i=s=!1,u=!0,e.getComputedStyle&&(i="1%"!==(e.getComputedStyle(t,null)||{}).top,s="4px"===(e.getComputedStyle(t,null)||{width:"4px"}).width,a=t.appendChild(T.createElement("div")),a.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",a.style.marginRight=a.style.width="0",t.style.width="1px",u=!parseFloat((e.getComputedStyle(a,null)||{}).marginRight),t.removeChild(a)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",a=t.getElementsByTagName("td"),a[0].style.cssText="margin:0;border:0;padding:0;display:none",o=0===a[0].offsetHeight,o&&(a[0].style.display="",a[1].style.display="none",o=0===a[0].offsetHeight),n.removeChild(r))}}}(),h.swap=function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i};var Ft=/alpha\([^)]*\)/i,It=/opacity\s*=\s*([^)]*)/,qt=/^(none|table(?!-c[ea]).+)/,Rt=new RegExp("^("+W+")(.*)$","i"),Ut=new RegExp("^([+-])=("+W+")","i"),zt={position:"absolute",visibility:"hidden",display:"block"},Wt={letterSpacing:"0",fontWeight:"400"},Xt=["Webkit","O","Moz","ms"];h.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ht(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":l.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,s,o,u=h.camelCase(t),a=e.style;if(t=h.cssProps[u]||(h.cssProps[u]=Vt(a,u)),o=h.cssHooks[t]||h.cssHooks[u],void 0===n)return o&&"get"in o&&void 0!==(i=o.get(e,!1,r))?i:a[t];if(s=typeof n,"string"===s&&(i=Ut.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(h.css(e,t)),s="number"),null!=n&&n===n&&("number"!==s||h.cssNumber[u]||(n+="px"),l.clearCloneStyle||""!==n||0!==t.indexOf("background")||(a[t]="inherit"),!(o&&"set"in o&&void 0===(n=o.set(e,n,r)))))try{a[t]=n}catch(f){}}},css:function(e,t,n,r){var i,s,o,u=h.camelCase(t);return t=h.cssProps[u]||(h.cssProps[u]=Vt(e.style,u)),o=h.cssHooks[t]||h.cssHooks[u],o&&"get"in o&&(s=o.get(e,!0,n)),void 0===s&&(s=Ht(e,t,r)),"normal"===s&&t in Wt&&(s=Wt[t]),""===n||n?(i=parseFloat(s),n===!0||h.isNumeric(i)?i||0:s):s}}),h.each(["height","width"],function(e,t){h.cssHooks[t]={get:function(e,n,r){return n?qt.test(h.css(e,"display"))&&0===e.offsetWidth?h.swap(e,zt,function(){return Qt(e,t,r)}):Qt(e,t,r):void 0},set:function(e,n,r){var i=r&&Pt(e);return Jt(e,n,r?Kt(e,t,r,l.boxSizing&&"border-box"===h.css(e,"boxSizing",!1,i),i):0)}}}),l.opacity||(h.cssHooks.opacity={get:function(e,t){return It.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=h.isNumeric(t)?"alpha(opacity="+100*t+")":"",s=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===h.trim(s.replace(Ft,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=Ft.test(s)?s.replace(Ft,i):s+" "+i)}}),h.cssHooks.marginRight=jt(l.reliableMarginRight,function(e,t){return t?h.swap(e,{display:"inline-block"},Ht,[e,"marginRight"]):void 0}),h.each({margin:"",padding:"",border:"Width"},function(e,t){h.cssHooks[e+t]={expand:function(n){for(var r=0,i={},s="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+X[r]+t]=s[r]||s[r-2]||s[0];return i}},_t.test(e)||(h.cssHooks[e+t].set=Jt)}),h.fn.extend({css:function(e,t){return $(this,function(e,t,n){var r,i,s={},o=0;if(h.isArray(t)){for(r=Pt(e),i=t.length;i>o;o++)s[t[o]]=h.css(e,t[o],!1,r);return s}return void 0!==n?h.style(e,t,n):h.css(e,t)},e,t,arguments.length>1)},show:function(){return $t(this,!0)},hide:function(){return $t(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){V(this)?h(this).show():h(this).hide()})}}),h.Tween=Gt,Gt.prototype={constructor:Gt,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(h.cssNumber[n]?"":"px")},cur:function(){var e=Gt.propHooks[this.prop];return e&&e.get?e.get(this):Gt.propHooks._default.get(this)},run:function(e){var t,n=Gt.propHooks[this.prop];return this.options.duration?this.pos=t=h.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Gt.propHooks._default.set(this),this}},Gt.prototype.init.prototype=Gt.prototype,Gt.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=h.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){h.fx.step[e.prop]?h.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[h.cssProps[e.prop]]||h.cssHooks[e.prop])?h.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Gt.propHooks.scrollTop=Gt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},h.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},h.fx=Gt.prototype.init,h.fx.step={};var Yt,Zt,en=/^(?:toggle|show|hide)$/,tn=new RegExp("^(?:([+-])=|)("+W+")([a-z%]*)$","i"),nn=/queueHooks$/,rn=[fn],sn={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=tn.exec(t),s=i&&i[3]||(h.cssNumber[e]?"":"px"),o=(h.cssNumber[e]||"px"!==s&&+r)&&tn.exec(h.css(n.elem,e)),u=1,a=20;if(o&&o[3]!==s){s=s||o[3],i=i||[],o=+r||1;do u=u||".5",o/=u,h.style(n.elem,e,o+s);while(u!==(u=n.cur()/r)&&1!==u&&--a)}return i&&(o=n.start=+o||+r||0,n.unit=s,n.end=i[1]?o+(i[1]+1)*i[2]:+i[2]),n}]};h.Animation=h.extend(cn,{tweener:function(e,t){h.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],sn[n]=sn[n]||[],sn[n].unshift(t)},prefilter:function(e,t){t?rn.unshift(e):rn.push(e)}}),h.speed=function(e,t,n){var r=e&&"object"==typeof e?h.extend({},e):{complete:n||!n&&t||h.isFunction(e)&&e,duration:e,easing:n&&t||t&&!h.isFunction(t)&&t};return r.duration=h.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in h.fx.speeds?h.fx.speeds[r.duration]:h.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){h.isFunction(r.old)&&r.old.call(this),r.queue&&h.dequeue(this,r.queue)},r},h.fn.extend({fadeTo:function(e,t,n,r){return this.filter(V).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=h.isEmptyObject(e),s=h.speed(t,n,r),o=function(){var t=cn(this,h.extend({},e),s);(i||h._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",s=h.timers,o=h._data(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&nn.test(i)&&r(o[i]);for(i=s.length;i--;)s[i].elem!==this||null!=e&&s[i].queue!==e||(s[i].anim.stop(n),t=!1,s.splice(i,1));(t||!n)&&h.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=h._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=h.timers,o=r?r.length:0;for(n.finish=!0,h.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;o>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),h.each(["toggle","show","hide"],function(e,t){var n=h.fn[t];h.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(un(t,!0),e,r,i)}}),h.each({slideDown:un("show"),slideUp:un("hide"),slideToggle:un("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){h.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),h.timers=[],h.fx.tick=function(){var e,t=h.timers,n=0;for(Yt=h.now();n<t.length;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||h.fx.stop(),Yt=void 0},h.fx.timer=function(e){h.timers.push(e),e()?h.fx.start():h.timers.pop()},h.fx.interval=13,h.fx.start=function(){Zt||(Zt=setInterval(h.fx.tick,h.fx.interval))},h.fx.stop=function(){clearInterval(Zt),Zt=null},h.fx.speeds={slow:600,fast:200,_default:400},h.fn.delay=function(e,t){return e=h.fx?h.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e,t,n,r,i;t=T.createElement("div"),t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=t.getElementsByTagName("a")[0],n=T.createElement("select"),i=n.appendChild(T.createElement("option")),e=t.getElementsByTagName("input")[0],r.style.cssText="top:1px",l.getSetAttribute="t"!==t.className,l.style=/top/.test(r.getAttribute("style")),l.hrefNormalized="/a"===r.getAttribute("href"),l.checkOn=!!e.value,l.optSelected=i.selected,l.enctype=!!T.createElement("form").enctype,n.disabled=!0,l.optDisabled=!i.disabled,e=T.createElement("input"),e.setAttribute("value",""),l.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),l.radioValue="t"===e.value}();var hn=/\r/g;h.fn.extend({val:function(e){var t,n,r,i=this[0];if(arguments.length)return r=h.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,h(this).val()):e,null==i?i="":"number"==typeof i?i+="":h.isArray(i)&&(i=h.map(i,function(e){return null==e?"":e+""})),t=h.valHooks[this.type]||h.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return t=h.valHooks[i.type]||h.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(hn,""):null==n?"":n)}}),h.extend({valHooks:{option:{get:function(e){var t=h.find.attr(e,"value");return null!=t?t:h.trim(h.text(e))}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,s="select-one"===e.type||0>i,o=s?null:[],u=s?i+1:r.length,a=0>i?u:s?i:0;u>a;a++)if(n=r[a],!(!n.selected&&a!==i||(l.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&h.nodeName(n.parentNode,"optgroup"))){if(t=h(n).val(),s)return t;o.push(t)}return o},set:function(e,t){var n,r,i=e.options,s=h.makeArray(t),o=i.length;while(o--)if(r=i[o],h.inArray(h.valHooks.option.get(r),s)>=0)try{r.selected=n=!0}catch(u){r.scrollHeight}else r.selected=!1;return n||(e.selectedIndex=-1),i}}}}),h.each(["radio","checkbox"],function(){h.valHooks[this]={set:function(e,t){return h.isArray(t)?e.checked=h.inArray(h(e).val(),t)>=0:void 0}},l.checkOn||(h.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var pn,dn,vn=h.expr.attrHandle,mn=/^(?:checked|selected)$/i,gn=l.getSetAttribute,yn=l.input;h.fn.extend({attr:function(e,t){return $(this,h.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){h.removeAttr(this,e)})}}),h.extend({attr:function(e,t,n){var r,i,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===B?h.prop(e,t,n):(1===s&&h.isXMLDoc(e)||(t=t.toLowerCase(),r=h.attrHooks[t]||(h.expr.match.bool.test(t)?dn:pn)),void 0===n?r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=h.find.attr(e,t),null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):void h.removeAttr(e,t))},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(O);if(s&&1===e.nodeType)while(n=s[i++])r=h.propFix[n]||n,h.expr.match.bool.test(n)?yn&&gn||!mn.test(n)?e[r]=!1:e[h.camelCase("default-"+n)]=e[r]=!1:h.attr(e,n,""),e.removeAttribute(gn?n:r)},attrHooks:{type:{set:function(e,t){if(!l.radioValue&&"radio"===t&&h.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),dn={set:function(e,t,n){return t===!1?h.removeAttr(e,n):yn&&gn||!mn.test(n)?e.setAttribute(!gn&&h.propFix[n]||n,n):e[h.camelCase("default-"+n)]=e[n]=!0,n}},h.each(h.expr.match.bool.source.match(/\w+/g),function(e,t){var n=vn[t]||h.find.attr;vn[t]=yn&&gn||!mn.test(t)?function(e,t,r){var i,s;return r||(s=vn[t],vn[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,vn[t]=s),i}:function(e,t,n){return n?void 0:e[h.camelCase("default-"+t)]?t.toLowerCase():null}}),yn&&gn||(h.attrHooks.value={set:function(e,t,n){return h.nodeName(e,"input")?void (e.defaultValue=t):pn&&pn.set(e,t,n)}}),gn||(pn={set:function(e,t,n){var r=e.getAttributeNode(n);return r||e.setAttributeNode(r=e.ownerDocument.createAttribute(n)),r.value=t+="","value"===n||t===e.getAttribute(n)?t:void 0}},vn.id=vn.name=vn.coords=function(e,t,n){var r;return n?void 0:(r=e.getAttributeNode(t))&&""!==r.value?r.value:null},h.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:void 0},set:pn.set},h.attrHooks.contenteditable={set:function(e,t,n){pn.set(e,""===t?!1:t,n)}},h.each(["width","height"],function(e,t){h.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),l.style||(h.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var bn=/^(?:input|select|textarea|button|object)$/i,wn=/^(?:a|area)$/i;h.fn.extend({prop:function(e,t){return $(this,h.prop,e,t,arguments.length>1)},removeProp:function(e){return e=h.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),h.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,s,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return s=1!==o||!h.isXMLDoc(e),s&&(t=h.propFix[t]||t,i=h.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=h.find.attr(e,"tabindex");return t?parseInt(t,10):bn.test(e.nodeName)||wn.test(e.nodeName)&&e.href?0:-1}}}}),l.hrefNormalized||h.each(["href","src"],function(e,t){h.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),l.optSelected||(h.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),h.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){h.propFix[this.toLowerCase()]=this}),l.enctype||(h.propFix.enctype="encoding");var En=/[\t\r\n\f]/g;h.fn.extend({addClass:function(e){var t,n,r,i,s,o,u=0,a=this.length,f="string"==typeof e&&e;if(h.isFunction(e))return this.each(function(t){h(this).addClass(e.call(this,t,this.className))});if(f)for(t=(e||"").match(O)||[];a>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(En," "):" ")){s=0;while(i=t[s++])r.indexOf(" "+i+" ")<0&&(r+=i+" ");o=h.trim(r),n.className!==o&&(n.className=o)}return this},removeClass:function(e){var t,n,r,i,s,o,u=0,a=this.length,f=0===arguments.length||"string"==typeof e&&e;if(h.isFunction(e))return this.each(function(t){h(this).removeClass(e.call(this,t,this.className))});if(f)for(t=(e||"").match(O)||[];a>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(En," "):"")){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");o=e?h.trim(r):"",n.className!==o&&(n.className=o)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(h.isFunction(e)?function(n){h(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n){var t,r=0,i=h(this),s=e.match(O)||[];while(t=s[r++])i.hasClass(t)?i.removeClass(t):i.addClass(t)}else(n===B||"boolean"===n)&&(this.className&&h._data(this,"__className__",this.className),this.className=this.className||e===!1?"":h._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(En," ").indexOf(t)>=0)return!0;return!1}}),h.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){h.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),h.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var Sn=h.now(),xn=/\?/,Tn=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;h.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,r=null,i=h.trim(t+"");return i&&!h.trim(i.replace(Tn,function(e,t,i,s){return n&&t&&(r=0),0===r?e:(n=i||t,r+=!s-!i,"")}))?Function("return "+i)():h.error("Invalid JSON: "+t)},h.parseXML=function(t){var n,r;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(r=new DOMParser,n=r.parseFromString(t,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t))}catch(i){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||h.error("Invalid XML: "+t),n};var Nn,Cn,kn=/#.*$/,Ln=/([?&])_=[^&]*/,An=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,On=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Mn=/^(?:GET|HEAD)$/,_n=/^\/\//,Dn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Pn={},Hn={},Bn="*/".concat("*");try{Cn=location.href}catch(jn){Cn=T.createElement("a"),Cn.href="",Cn=Cn.href}Nn=Dn.exec(Cn.toLowerCase())||[],h.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Cn,type:"GET",isLocal:On.test(Nn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Bn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":h.parseJSON,"text xml":h.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?qn(qn(e,h.ajaxSettings),t):qn(h.ajaxSettings,e)},ajaxPrefilter:Fn(Pn),ajaxTransport:Fn(Hn),ajax:function(e,t){function x(e,t,n,r){var f,g,y,w,S,x=t;2!==b&&(b=2,o&&clearTimeout(o),a=void 0,s=r||"",E.readyState=e>0?4:0,f=e>=200&&300>e||304===e,n&&(w=Rn(l,E,n)),w=Un(l,w,E,f),f?(l.ifModified&&(S=E.getResponseHeader("Last-Modified"),S&&(h.lastModified[i]=S),S=E.getResponseHeader("etag"),S&&(h.etag[i]=S)),204===e||"HEAD"===l.type?x="nocontent":304===e?x="notmodified":(x=w.state,g=w.data,y=w.error,f=!y)):(y=x,(e||!x)&&(x="error",0>e&&(e=0))),E.status=e,E.statusText=(t||x)+"",f?d.resolveWith(c,[g,x,E]):d.rejectWith(c,[E,x,y]),E.statusCode(m),m=void 0,u&&p.trigger(f?"ajaxSuccess":"ajaxError",[E,l,f?g:y]),v.fireWith(c,[E,x]),u&&(p.trigger("ajaxComplete",[E,l]),--h.active||h.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,r,i,s,o,u,a,f,l=h.ajaxSetup({},t),c=l.context||l,p=l.context&&(c.nodeType||c.jquery)?h(c):h.event,d=h.Deferred(),v=h.Callbacks("once memory"),m=l.statusCode||{},g={},y={},b=0,w="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!f){f={};while(t=An.exec(s))f[t[1].toLowerCase()]=t[2]}t=f[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return b||(l.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else E.always(e[E.status]);return this},abort:function(e){var t=e||w;return a&&a.abort(t),x(0,t),this}};if(d.promise(E).complete=v.add,E.success=E.done,E.error=E.fail,l.url=((e||l.url||Cn)+"").replace(kn,"").replace(_n,Nn[1]+"//"),l.type=t.method||t.type||l.method||l.type,l.dataTypes=h.trim(l.dataType||"*").toLowerCase().match(O)||[""],null==l.crossDomain&&(n=Dn.exec(l.url.toLowerCase()),l.crossDomain=!(!n||n[1]===Nn[1]&&n[2]===Nn[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(Nn[3]||("http:"===Nn[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=h.param(l.data,l.traditional)),In(Pn,l,t,E),2===b)return E;u=h.event&&l.global,u&&0===h.active++&&h.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!Mn.test(l.type),i=l.url,l.hasContent||(l.data&&(i=l.url+=(xn.test(i)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=Ln.test(i)?i.replace(Ln,"$1_="+Sn++):i+(xn.test(i)?"&":"?")+"_="+Sn++)),l.ifModified&&(h.lastModified[i]&&E.setRequestHeader("If-Modified-Since",h.lastModified[i]),h.etag[i]&&E.setRequestHeader("If-None-Match",h.etag[i])),(l.data&&l.hasContent&&l.contentType!==!1||t.contentType)&&E.setRequestHeader("Content-Type",l.contentType),E.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+Bn+"; q=0.01":""):l.accepts["*"]);for(r in l.headers)E.setRequestHeader(r,l.headers[r]);if(!l.beforeSend||l.beforeSend.call(c,E,l)!==!1&&2!==b){w="abort";for(r in{success:1,error:1,complete:1})E[r](l[r]);if(a=In(Hn,l,t,E)){E.readyState=1,u&&p.trigger("ajaxSend",[E,l]),l.async&&l.timeout>0&&(o=setTimeout(function(){E.abort("timeout")},l.timeout));try{b=1,a.send(g,x)}catch(S){if(!(2>b))throw S;x(-1,S)}}else x(-1,"No Transport");return E}return E.abort()},getJSON:function(e,t,n){return h.get(e,t,n,"json")},getScript:function(e,t){return h.get(e,void 0,t,"script")}}),h.each(["get","post"],function(e,t){h[t]=function(e,n,r,i){return h.isFunction(n)&&(i=i||r,r=n,n=void 0),h.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),h._evalUrl=function(e){return h.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},h.fn.extend({wrapAll:function(e){if(h.isFunction(e))return this.each(function(t){h(this).wrapAll(e.call(this,t))});if(this[0]){var t=h(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(h.isFunction(e)?function(t){h(this).wrapInner(e.call(this,t))}:function(){var t=h(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=h.isFunction(e);return this.each(function(n){h(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){h.nodeName(this,"body")||h(this).replaceWith(this.childNodes)}).end()}}),h.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!l.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||h.css(e,"display"))},h.expr.filters.visible=function(e){return!h.expr.filters.hidden(e)};var zn=/%20/g,Wn=/\[\]$/,Xn=/\r?\n/g,Vn=/^(?:submit|button|image|reset|file)$/i,$n=/^(?:input|select|textarea|keygen)/i;h.param=function(e,t){var n,r=[],i=function(e,t){t=h.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=h.ajaxSettings&&h.ajaxSettings.traditional),h.isArray(e)||e.jquery&&!h.isPlainObject(e))h.each(e,function(){i(this.name,this.value)});else for(n in e)Jn(n,e[n],t,i);return r.join("&").replace(zn,"+")},h.fn.extend({serialize:function(){return h.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=h.prop(this,"elements");return e?h.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!h(this).is(":disabled")&&$n.test(this.nodeName)&&!Vn.test(e)&&(this.checked||!J.test(e))}).map(function(e,t){var n=h(this).val();return null==n?null:h.isArray(n)?h.map(n,function(e){return{name:t.name,value:e.replace(Xn,"\r\n")}}):{name:t.name,value:n.replace(Xn,"\r\n")}}).get()}}),h.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Yn()||Zn()}:Yn;var Kn=0,Qn={},Gn=h.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in Qn)Qn[e](void 0,!0)}),l.cors=!!Gn&&"withCredentials"in Gn,Gn=l.ajax=!!Gn,Gn&&h.ajaxTransport(function(e){if(!e.crossDomain||l.cors){var t;return{send:function(n,r){var i,s=e.xhr(),o=++Kn;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)s[i]=e.xhrFields[i];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)void 0!==n[i]&&s.setRequestHeader(i,n[i]+"");s.send(e.hasContent&&e.data||null),t=function(n,i){var u,a,f;if(t&&(i||4===s.readyState))if(delete Qn[o],t=void 0,s.onreadystatechange=h.noop,i)4!==s.readyState&&s.abort();else{f={},u=s.status,"string"==typeof s.responseText&&(f.text=s.responseText);try{a=s.statusText}catch(l){a=""}u||!e.isLocal||e.crossDomain?1223===u&&(u=204):u=f.text?200:404}f&&r(u,a,f,s.getAllResponseHeaders())},e.async?4===s.readyState?setTimeout(t):s.onreadystatechange=Qn[o]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),h.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return h.globalEval(e),e}}}),h.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),h.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=T.head||h("head")[0]||T.documentElement;return{send:function(r,i){t=T.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||i(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var er=[],tr=/(=)\?(?=&|$)|\?\?/;h.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=er.pop()||h.expando+"_"+Sn++;return this[e]=!0,e}}),h.ajaxPrefilter("json jsonp",function(t,n,r){var i,s,o,u=t.jsonp!==!1&&(tr.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&tr.test(t.data)&&"data");return u||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=h.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,u?t[u]=t[u].replace(tr,"$1"+i):t.jsonp!==!1&&(t.url+=(xn.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return o||h.error(i+" was not called"),o[0]},t.dataTypes[0]="json",s=e[i],e[i]=function(){o=arguments},r.always(function(){e[i]=s,t[i]&&(t.jsonpCallback=n.jsonpCallback,er.push(i)),o&&h.isFunction(s)&&s(o[0]),o=s=void 0}),"script"):void 0}),h.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||T;var r=w.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=h.buildFragment([e],t,i),i&&i.length&&h(i).remove(),h.merge([],r.childNodes))};var nr=h.fn.load;h.fn.load=function(e,t,n){if("string"!=typeof e&&nr)return nr.apply(this,arguments);var r,i,s,o=this,u=e.indexOf(" ");return u>=0&&(r=h.trim(e.slice(u,e.length)),e=e.slice(0,u)),h.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(s="POST"),o.length>0&&h.ajax({url:e,type:s,dataType:"html",data:t}).done(function(e){i=arguments,o.html(r?h("<div>").append(h.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){o.each(n,i||[e.responseText,t,e])}),this},h.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){h.fn[t]=function(e){return this.on(t,e)}}),h.expr.filters.animated=function(e){return h.grep(h.timers,function(t){return e===t.elem}).length};var rr=e.document.documentElement;h.offset={setOffset:function(e,t,n){var r,i,s,o,u,a,f,l=h.css(e,"position"),c=h(e),p={};"static"===l&&(e.style.position="relative"),u=c.offset(),s=h.css(e,"top"),a=h.css(e,"left"),f=("absolute"===l||"fixed"===l)&&h.inArray("auto",[s,a])>-1,f?(r=c.position(),o=r.top,i=r.left):(o=parseFloat(s)||0,i=parseFloat(a)||0),h.isFunction(t)&&(t=t.call(e,n,u)),null!=t.top&&(p.top=t.top-u.top+o),null!=t.left&&(p.left=t.left-u.left+i),"using"in t?t.using.call(e,p):c.css(p)}},h.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){h.offset.setOffset(this,e,t)});var t,n,r={top:0,left:0},i=this[0],s=i&&i.ownerDocument;if(s)return t=s.documentElement,h.contains(t,i)?(typeof i.getBoundingClientRect!==B&&(r=i.getBoundingClientRect()),n=ir(s),{top:r.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:r.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):r},position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===h.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),h.nodeName(e[0],"html")||(n=e.offset()),n.top+=h.css(e[0],"borderTopWidth",!0),n.left+=h.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-h.css(r,"marginTop",!0),left:t.left-n.left-h.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||rr;while(e&&!h.nodeName(e,"html")&&"static"===h.css(e,"position"))e=e.offsetParent;return e||rr})}}),h.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);h.fn[e]=function(r){return $(this,function(e,r,i){var s=ir(e);return void 0===i?s?t in s?s[t]:s.document.documentElement[r]:e[r]:void (s?s.scrollTo(n?h(s).scrollLeft():i,n?i:h(s).scrollTop()):e[r]=i)},e,r,arguments.length,null)}}),h.each(["top","left"],function(e,t){h.cssHooks[t]=jt(l.pixelPosition,function(e,n){return n?(n=Ht(e,t),Dt.test(n)?h(e).position()[t]+"px":n):void 0})}),h.each({Height:"height",Width:"width"},function(e,t){h.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){h.fn[r]=function(r,i){var s=arguments.length&&(n||"boolean"!=typeof r),o=n||(r===!0||i===!0?"margin":"border");return $(this,function(t,n,r){var i;return h.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?h.css(t,n,o):h.style(t,n,r,o)},t,s?r:void 0,s,null)}})}),h.fn.size=function(){return this.length},h.fn.andSelf=h.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return h});var sr=e.jQuery,or=e.$;return h.noConflict=function(t){return e.$===h&&(e.$=or),t&&e.jQuery===h&&(e.jQuery=sr),h},typeof t===B&&(e.jQuery=e.$=h),h}),define("../../../lib/jquery-1.11.3.min",function(){}),define("health",["../../../lib/jquery-1.11.3.min"],function(){function i(t,i){var o=e.data("total"),u=e.data("value");i.health-=t,r+=t;var a=u-r,f=r/o*100+"%";n.css({display:"block",width:f}),e.data("value",a),s(r,f,i.health)}function s(e,t,n){var r=$(".log");r.empty(),typeof e!="undefined"&&typeof t!="undefined"&&(n>=1e3?r.append("<p> ("+n+" / 1000)</p>"):n<=900&&n>=100?r.append("<p> (0"+n+" / 1000)</p>"):n<100&&n>=10?r.append("<p> (00"+n+" / 1000)</p>"):n<10&&n>0?r.append("<p> (000"+n+" / 1000)</p>"):n<=0&&r.append("<p> (0000 / 1000)</p>"))}var e=$(".health-bar"),t=e.find(".bar"),n=e.find(".hit"),r=0;return i}),define("game-objects/bullet",["./contracts/game-object","../common/global-constants","../common/player-constants","../helpers/game-state-helper","../health"],function(e,t,n,r,i){var s=function(e){var s=function(t,n,r){e.call(this,r),this.kineticImage=new Kinetic.Image({x:t,y:n,image:this.image,width:28,height:28,crop:{x:0,y:0,width:128,height:128}})};return s.prototype.shoot=function(e,s,o,u,a,f,l){var c=this,h=e-c.kineticImage.getX(),p=s-c.kineticImage.getY(),d=Math.sqrt(h*h+p*p),v=h/d*u.attackSpeed,m=p/d*u.attackSpeed,g=new Kinetic.Animation(function(){c.kineticImage.setX(c.kineticImage.getX()+v),c.kineticImage.setY(c.kineticImage.getY()+m);var e=r.getDeadEnemyIndex(o,c.kineticImage),s=r.bulletLeftField(c.kineticImage);e&&(c.kineticImage.setX(t.STAGE_WIDTH*2),c.kineticImage.setY(t.STAGE_HEIGHT*2),c.kineticImage.destroy(),r.runExplosionAt(o[e].enemy.getX(),o[e].enemy.getY(),.6,5,l),r.removeEnemy(o,e),u.health<1e3&&i(-n.HEALTH_INCREASED_ON_ENEMY_HIT,u),u.score+=1),s&&c.kineticImage.destroy()},f);f.add(c.kineticImage),a.add(f),g.start()},s}(e);return s});var Kinetic={};!function(e){var t=Math.PI/180;Kinetic={version:"5.1.0",stages:[],idCounter:0,ids:{},names:{},shapes:{},listenClickTap:!1,inDblClickWindow:!1,enableTrace:!1,traceArrMax:100,dblClickWindow:400,pixelRatio:void 0,dragDistance:0,angleDeg:!0,UA:function(){var t=e.navigator&&e.navigator.userAgent||"",n=t.toLowerCase(),r=/(chrome)[ \/]([\w.]+)/.exec(n)||/(webkit)[ \/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||n.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(n)||[],i=!!t.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i);return{browser:r[1]||"",version:r[2]||"0",mobile:i}}(),Filters:{},Node:function(e){this._init(e)},Shape:function(e){this.__init(e)},Container:function(e){this.__init(e)},Stage:function(e){this.___init(e)},BaseLayer:function(e){this.___init(e)},Layer:function(e){this.____init(e)},FastLayer:function(e){this.____init(e)},Group:function(e){this.___init(e)},isDragging:function(){var e=Kinetic.DD;return e?e.isDragging:!1},isDragReady:function(){var e=Kinetic.DD;return e?!!e.node:!1},_addId:function(e,t){void 0!==t&&(this.ids[t]=e)},_removeId:function(e){void 0!==e&&delete this.ids[e]},_addName:function(e,t){void 0!==t&&(void 0===this.names[t]&&(this.names[t]=[]),this.names[t].push(e))},_removeName:function(e,t){if(void 0!==e){var n=this.names[e];if(void 0!==n){for(var r=0;r<n.length;r++){var i=n[r];i._id===t&&n.splice(r,1)}0===n.length&&delete this.names[e]}}},getAngle:function(e){return this.angleDeg?e*t:e}}}(this),function(e,t){if("object"==typeof exports){var n=require("canvas"),r=require("jsdom").jsdom,i=r("<!DOCTYPE html><html><head></head><body></body></html>"),s=t();return Kinetic.document=i,Kinetic.window=Kinetic.document.createWindow(),Kinetic.window.Image=n.Image,Kinetic.root=e,Kinetic._nodeCanvas=n,void (module.exports=s)}"function"==typeof define&&define.amd&&define("../../lib/kinetic-v5.1.0.min",t),Kinetic.document=document,Kinetic.window=window,Kinetic.root=e}((1,eval)("this"),function(){return Kinetic}),function(){Kinetic.Collection=function(){var e=[].slice.call(arguments),t=e.length,n=0;for(this.length=t;t>n;n++)this[n]=e[n];return this},Kinetic.Collection.prototype=[],Kinetic.Collection.prototype.each=function(e){for(var t=0;t<this.length;t++)e(this[t],t)},Kinetic.Collection.prototype.toArray=function(){var e,t=[],n=this.length;for(e=0;n>e;e++)t.push(this[e]);return t},Kinetic.Collection.toCollection=function(e){var t,n=new Kinetic.Collection,r=e.length;for(t=0;r>t;t++)n.push(e[t]);return n},Kinetic.Collection._mapMethod=function(e){Kinetic.Collection.prototype[e]=function(){var t,n=this.length,r=[].slice.call(arguments);for(t=0;n>t;t++)this[t][e].apply(this[t],r);return this}},Kinetic.Collection.mapMethods=function(e){var t=e.prototype;for(var n in t)Kinetic.Collection._mapMethod(n)},Kinetic.Transform=function(e){this.m=e&&e.slice()||[1,0,0,1,0,0]},Kinetic.Transform.prototype={copy:function(){return new Kinetic.Transform(this.m)},point:function(e){var t=this.m;return{x:t[0]*e.x+t[2]*e.y+t[4],y:t[1]*e.x+t[3]*e.y+t[5]}},translate:function(e,t){return this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t,this},scale:function(e,t){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.m[0]*t+this.m[2]*n,i=this.m[1]*t+this.m[3]*n,s=this.m[0]*-n+this.m[2]*t,o=this.m[1]*-n+this.m[3]*t;return this.m[0]=r,this.m[1]=i,this.m[2]=s,this.m[3]=o,this},getTranslation:function(){return{x:this.m[4],y:this.m[5]}},skew:function(e,t){var n=this.m[0]+this.m[2]*t,r=this.m[1]+this.m[3]*t,i=this.m[2]+this.m[0]*e,s=this.m[3]+this.m[1]*e;return this.m[0]=n,this.m[1]=r,this.m[2]=i,this.m[3]=s,this},multiply:function(e){var t=this.m[0]*e.m[0]+this.m[2]*e.m[1],n=this.m[1]*e.m[0]+this.m[3]*e.m[1],r=this.m[0]*e.m[2]+this.m[2]*e.m[3],i=this.m[1]*e.m[2]+this.m[3]*e.m[3],s=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],o=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=t,this.m[1]=n,this.m[2]=r,this.m[3]=i,this.m[4]=s,this.m[5]=o,this},invert:function(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),t=this.m[3]*e,n=-this.m[1]*e,r=-this.m[2]*e,i=this.m[0]*e,s=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=t,this.m[1]=n,this.m[2]=r,this.m[3]=i,this.m[4]=s,this.m[5]=o,this},getMatrix:function(){return this.m},setAbsolutePosition:function(e,t){var n=this.m[0],r=this.m[1],i=this.m[2],s=this.m[3],o=this.m[4],u=this.m[5],a=(n*(t-u)-r*(e-o))/(n*s-r*i),f=(e-o-i*a)/n;return this.translate(f,a)}};var e="2d",t="[object Array]",n="[object Number]",r="[object String]",i=Math.PI/180,s=180/Math.PI,o="#",u="",a="0",f="Kinetic warning: ",l="Kinetic error: ",c="rgb(",h={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},p=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;Kinetic.Util={_isElement:function(e){return!!e&&1==e.nodeType},_isFunction:function(e){return!!(e&&e.constructor&&e.call&&e.apply)},_isObject:function(e){return!!e&&e.constructor==Object},_isArray:function(e){return Object.prototype.toString.call(e)==t},_isNumber:function(e){return Object.prototype.toString.call(e)==n},_isString:function(e){return Object.prototype.toString.call(e)==r},_throttle:function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:(new Date).getTime(),o=null,s=e.apply(r,i),r=i=null};return function(){var f=(new Date).getTime();u||n.leading!==!1||(u=f);var l=t-(f-u);return r=this,i=arguments,0>=l?(clearTimeout(o),o=null,u=f,s=e.apply(r,i),r=i=null):o||n.trailing===!1||(o=setTimeout(a,l)),s}},_hasMethods:function(e){var t,n=[];for(t in e)this._isFunction(e[t])&&n.push(t);return n.length>0},createCanvasElement:function(){var e=Kinetic.document.createElement("canvas");return e.style=e.style||{},e},isBrowser:function(){return"object"!=typeof exports},_isInDocument:function(e){for(;e=e.parentNode;)if(e==Kinetic.document)return!0;return!1},_simplifyArray:function(e){var t,n,r=[],i=e.length,s=Kinetic.Util;for(t=0;i>t;t++)n=e[t],s._isNumber(n)?n=Math.round(1e3*n)/1e3:s._isString(n)||(n=n.toString()),r.push(n);return r},_getImage:function(t,n){var r,i;if(t)if(this._isElement(t))n(t);else if(this._isString(t))r=new Kinetic.window.Image,r.onload=function(){n(r)},r.src=t;else if(t.data){i=Kinetic.Util.createCanvasElement(),i.width=t.width,i.height=t.height;var s=i.getContext(e);s.putImageData(t,0,0),this._getImage(i.toDataURL(),n)}else n(null);else n(null)},_getRGBAString:function(e){var t=e.red||0,n=e.green||0,r=e.blue||0,i=e.alpha||1;return["rgba(",t,",",n,",",r,",",i,")"].join(u)},_rgbToHex:function(e,t,n){return((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)},_hexToRgb:function(e){e=e.replace(o,u);var t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:255&t}},getRandomColor:function(){for(var e=(16777215*Math.random()<<0).toString(16);e.length<6;)e=a+e;return o+e},get:function(e,t){return void 0===e?t:e},getRGB:function(e){var t;return e in h?(t=h[e],{r:t[0],g:t[1],b:t[2]}):e[0]===o?this._hexToRgb(e.substring(1)):e.substr(0,4)===c?(t=p.exec(e.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},_merge:function(e,t){var n=this._clone(t);for(var r in e)n[r]=this._isObject(e[r])?this._merge(e[r],n[r]):e[r];return n},cloneObject:function(e){var t={};for(var n in e)t[n]=this._isObject(e[n])?this.cloneObject(e[n]):this._isArray(e[n])?this.cloneArray(e[n]):e[n];return t},cloneArray:function(e){return e.slice(0)},_degToRad:function(e){return e*i},_radToDeg:function(e){return e*s},_capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},error:function(e){throw new Error(l+e)},warn:function(e){Kinetic.root.console&&console.warn&&console.warn(f+e)},extend:function(e,t){for(var n in t.prototype)n in e.prototype||(e.prototype[n]=t.prototype[n])},addMethods:function(e,t){var n;for(n in t)e.prototype[n]=t[n]},_getControlPoints:function(e,t,n,r,i,s,o){var u=Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2)),a=Math.sqrt(Math.pow(i-n,2)+Math.pow(s-r,2)),f=o*u/(u+a),l=o*a/(u+a),c=n-f*(i-e),h=r-f*(s-t),p=n+l*(i-e),d=r+l*(s-t);return[c,h,p,d]},_expandPoints:function(e,t){var n,r,i=e.length,s=[];for(n=2;i-2>n;n+=2)r=Kinetic.Util._getControlPoints(e[n-2],e[n-1],e[n],e[n+1],e[n+2],e[n+3],t),s.push(r[0]),s.push(r[1]),s.push(e[n]),s.push(e[n+1]),s.push(r[2]),s.push(r[3]);return s},_removeLastLetter:function(e){return e.substring(0,e.length-1)}}}(),function(){var e=Kinetic.Util.createCanvasElement(),t=e.getContext("2d"),n=Kinetic.UA.mobile?function(){var e=window.devicePixelRatio||1,n=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return e/n}():1;Kinetic.Canvas=function(e){this.init(e)},Kinetic.Canvas.prototype={init:function(e){e=e||{};var t=e.pixelRatio||Kinetic.pixelRatio||n;this.pixelRatio=t,this._canvas=Kinetic.Util.createCanvasElement(),this._canvas.style.padding=0,this._canvas.style.margin=0,this._canvas.style.border=0,this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top=0,this._canvas.style.left=0},getContext:function(){return this.context},getPixelRatio:function(){return this.pixelRatio},setPixelRatio:function(e){this.pixelRatio=e,this.setSize(this.getWidth(),this.getHeight())},setWidth:function(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px"},setHeight:function(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px"},getWidth:function(){return this.width},getHeight:function(){return this.height},setSize:function(e,t){this.setWidth(e),this.setHeight(t)},toDataURL:function(e,t){try{return this._canvas.toDataURL(e,t)}catch(n){try{return this._canvas.toDataURL()}catch(r){return Kinetic.Util.warn("Unable to get data URL. "+r.message),""}}}},Kinetic.SceneCanvas=function(e){e=e||{};var t=e.width||0,n=e.height||0;Kinetic.Canvas.call(this,e),this.context=new Kinetic.SceneContext(this),this.setSize(t,n)},Kinetic.SceneCanvas.prototype={setWidth:function(e){var t=this.pixelRatio,n=this.getContext()._context;Kinetic.Canvas.prototype.setWidth.call(this,e),n.scale(t,t)},setHeight:function(e){var t=this.pixelRatio,n=this.getContext()._context;Kinetic.Canvas.prototype.setHeight.call(this,e),n.scale(t,t)}},Kinetic.Util.extend(Kinetic.SceneCanvas,Kinetic.Canvas),Kinetic.HitCanvas=function(e){e=e||{};var t=e.width||0,n=e.height||0;Kinetic.Canvas.call(this,e),this.context=new Kinetic.HitContext(this),this.setSize(t,n)},Kinetic.Util.extend(Kinetic.HitCanvas,Kinetic.Canvas)}(),function(){var e=",",t="(",n=")",r="([",i="])",s=";",o="()",u="=",a=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];Kinetic.Context=function(e){this.init(e)},Kinetic.Context.prototype={init:function(e){this.canvas=e,this._context=e._canvas.getContext("2d"),Kinetic.enableTrace&&(this.traceArr=[],this._enableTrace())},fillShape:function(e){e.getFillEnabled()&&this._fill(e)},strokeShape:function(e){e.getStrokeEnabled()&&this._stroke(e)},fillStrokeShape:function(e){var t=e.getFillEnabled();t&&this._fill(e),e.getStrokeEnabled()&&this._stroke(e)},getTrace:function(a){var l,p,v,m,y=this.traceArr,w=y.length,E="";for(l=0;w>l;l++)p=y[l],v=p.method,v?(m=p.args,E+=v,E+=a?o:Kinetic.Util._isArray(m[0])?r+m.join(e)+i:t+m.join(e)+n):(E+=p.property,a||(E+=u+p.val)),E+=s;return E},clearTrace:function(){this.traceArr=[]},_trace:function(e){var t,n=this.traceArr;n.push(e),t=n.length,t>=Kinetic.traceArrMax&&n.shift()},reset:function(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)},getCanvas:function(){return this.canvas},clear:function(e){var t=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,t.getWidth(),t.getHeight())},_applyLineCap:function(e){var t=e.getLineCap();t&&this.setAttr("lineCap",t)},_applyOpacity:function(e){var t=e.getAbsoluteOpacity();1!==t&&this.setAttr("globalAlpha",t)},_applyLineJoin:function(e){var t=e.getLineJoin();t&&this.setAttr("lineJoin",t)},setAttr:function(e,t){this._context[e]=t},arc:function(){var e=arguments;this._context.arc(e[0],e[1],e[2],e[3],e[4],e[5])},beginPath:function(){this._context.beginPath()},bezierCurveTo:function(){var e=arguments;this._context.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5])},clearRect:function(){var e=arguments;this._context.clearRect(e[0],e[1],e[2],e[3])},clip:function(){this._context.clip()},closePath:function(){this._context.closePath()},createImageData:function(){var e=arguments;return 2===e.length?this._context.createImageData(e[0],e[1]):1===e.length?this._context.createImageData(e[0]):void 0},createLinearGradient:function(){var e=arguments;return this._context.createLinearGradient(e[0],e[1],e[2],e[3])},createPattern:function(){var e=arguments;return this._context.createPattern(e[0],e[1])},createRadialGradient:function(){var e=arguments;return this._context.createRadialGradient(e[0],e[1],e[2],e[3],e[4],e[5])},drawImage:function(){var e=arguments,t=this._context;3===e.length?t.drawImage(e[0],e[1],e[2]):5===e.length?t.drawImage(e[0],e[1],e[2],e[3],e[4]):9===e.length&&t.drawImage(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},fill:function(){this._context.fill()},fillText:function(){var e=arguments;this._context.fillText(e[0],e[1],e[2])},getImageData:function(){var e=arguments;return this._context.getImageData(e[0],e[1],e[2],e[3])},lineTo:function(){var e=arguments;this._context.lineTo(e[0],e[1])},moveTo:function(){var e=arguments;this._context.moveTo(e[0],e[1])},rect:function(){var e=arguments;this._context.rect(e[0],e[1],e[2],e[3])},putImageData:function(){var e=arguments;this._context.putImageData(e[0],e[1],e[2])},quadraticCurveTo:function(){var e=arguments;this._context.quadraticCurveTo(e[0],e[1],e[2],e[3])},restore:function(){this._context.restore()},rotate:function(){var e=arguments;this._context.rotate(e[0])},save:function(){this._context.save()},scale:function(){var e=arguments;this._context.scale(e[0],e[1])},setLineDash:function(){var e=arguments,t=this._context;this._context.setLineDash?t.setLineDash(e[0]):"mozDash"in t?t.mozDash=e[0]:"webkitLineDash"in t&&(t.webkitLineDash=e[0])},setTransform:function(){var e=arguments;this._context.setTransform(e[0],e[1],e[2],e[3],e[4],e[5])},stroke:function(){this._context.stroke()},strokeText:function(){var e=arguments;this._context.strokeText(e[0],e[1],e[2])},transform:function(){var e=arguments;this._context.transform(e[0],e[1],e[2],e[3],e[4],e[5])},translate:function(){var e=arguments;this._context.translate(e[0],e[1])},_enableTrace:function(){var e,t,n=this,r=a.length,i=Kinetic.Util._simplifyArray,s=this.setAttr,o=function(e){var r,s=n[e];n[e]=function(){return t=i(Array.prototype.slice.call(arguments,0)),r=s.apply(n,arguments),n._trace({method:e,args:t}),r}};for(e=0;r>e;e++)o(a[e]);n.setAttr=function(){s.apply(n,arguments),n._trace({property:arguments[0],val:arguments[1]})}}},Kinetic.SceneContext=function(e){Kinetic.Context.call(this,e)},Kinetic.SceneContext.prototype={_fillColor:function(e){var t=e.fill()||Kinetic.Util._getRGBAString({red:e.fillRed(),green:e.fillGreen(),blue:e.fillBlue(),alpha:e.fillAlpha()});this.setAttr("fillStyle",t),e._fillFunc(this)},_fillPattern:function(e){var t=e.getFillPatternImage(),n=e.getFillPatternX(),r=e.getFillPatternY(),i=e.getFillPatternScale(),s=Kinetic.getAngle(e.getFillPatternRotation()),o=e.getFillPatternOffset(),u=e.getFillPatternRepeat();(n||r)&&this.translate(n||0,r||0),s&&this.rotate(s),i&&this.scale(i.x,i.y),o&&this.translate(-1*o.x,-1*o.y),this.setAttr("fillStyle",this.createPattern(t,u||"repeat")),this.fill()},_fillLinearGradient:function(e){var t=e.getFillLinearGradientStartPoint(),n=e.getFillLinearGradientEndPoint(),r=e.getFillLinearGradientColorStops(),i=this.createLinearGradient(t.x,t.y,n.x,n.y);if(r){for(var s=0;s<r.length;s+=2)i.addColorStop(r[s],r[s+1]);this.setAttr("fillStyle",i),this.fill()}},_fillRadialGradient:function(e){for(var t=e.getFillRadialGradientStartPoint(),n=e.getFillRadialGradientEndPoint(),r=e.getFillRadialGradientStartRadius(),i=e.getFillRadialGradientEndRadius(),s=e.getFillRadialGradientColorStops(),o=this.createRadialGradient(t.x,t.y,r,n.x,n.y,i),u=0;u<s.length;u+=2)o.addColorStop(s[u],s[u+1]);this.setAttr("fillStyle",o),this.fill()},_fill:function(e){var t=e.fill()||e.fillRed()||e.fillGreen()||e.fillBlue(),n=e.getFillPatternImage(),r=e.getFillLinearGradientColorStops(),i=e.getFillRadialGradientColorStops(),s=e.getFillPriority();t&&"color"===s?this._fillColor(e):n&&"pattern"===s?this._fillPattern(e):r&&"linear-gradient"===s?this._fillLinearGradient(e):i&&"radial-gradient"===s?this._fillRadialGradient(e):t?this._fillColor(e):n?this._fillPattern(e):r?this._fillLinearGradient(e):i&&this._fillRadialGradient(e)},_stroke:function(e){var t=e.dash(),n=e.getStrokeScaleEnabled();e.hasStroke()&&(n||(this.save(),this.setTransform(1,0,0,1,0,0)),this._applyLineCap(e),t&&e.dashEnabled()&&this.setLineDash(t),this.setAttr("lineWidth",e.strokeWidth()),this.setAttr("strokeStyle",e.stroke()||Kinetic.Util._getRGBAString({red:e.strokeRed(),green:e.strokeGreen(),blue:e.strokeBlue(),alpha:e.strokeAlpha()})),e._strokeFunc(this),n||this.restore())},_applyShadow:function(e){var t=Kinetic.Util,n=e.getAbsoluteOpacity(),r=t.get(e.getShadowColor(),"black"),i=t.get(e.getShadowBlur(),5),s=t.get(e.getShadowOpacity(),1),o=t.get(e.getShadowOffset(),{x:0,y:0});s&&this.setAttr("globalAlpha",s*n),this.setAttr("shadowColor",r),this.setAttr("shadowBlur",i),this.setAttr("shadowOffsetX",o.x),this.setAttr("shadowOffsetY",o.y)}},Kinetic.Util.extend(Kinetic.SceneContext,Kinetic.Context),Kinetic.HitContext=function(e){Kinetic.Context.call(this,e)},Kinetic.HitContext.prototype={_fill:function(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()},_stroke:function(e){e.hasStroke()&&(this._applyLineCap(e),this.setAttr("lineWidth",e.strokeWidth()),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this))}},Kinetic.Util.extend(Kinetic.HitContext,Kinetic.Context)}(),function(){var e="get",t="set";Kinetic.Factory={addGetterSetter:function(e,t,n,r,i){this.addGetter(e,t,n),this.addSetter(e,t,r,i),this.addOverloadedGetterSetter(e,t)},addGetter:function(t,n,r){var i=e+Kinetic.Util._capitalize(n);t.prototype[i]=function(){var e=this.attrs[n];return void 0===e?r:e}},addSetter:function(e,n,r,i){var s=t+Kinetic.Util._capitalize(n);e.prototype[s]=function(e){return r&&(e=r.call(this,e)),this._setAttr(n,e),i&&i.call(this),this}},addComponentsGetterSetter:function(n,r,i,s,o){var u,f,l=i.length,c=Kinetic.Util._capitalize,h=e+c(r),p=t+c(r);n.prototype[h]=function(){var e={};for(u=0;l>u;u++)f=i[u],e[f]=this.getAttr(r+c(f));return e},n.prototype[p]=function(e){var t,n=this.attrs[r];s&&(e=s.call(this,e));for(t in e)this._setAttr(r+c(t),e[t]);return this._fireChangeEvent(r,n,e),o&&o.call(this),this},this.addOverloadedGetterSetter(n,r)},addOverloadedGetterSetter:function(n,r){var i=Kinetic.Util._capitalize(r),s=t+i,o=e+i;n.prototype[r]=function(){return arguments.length?(this[s](arguments[0]),this):this[o]()}},backCompat:function(e,t){var n;for(n in t)e.prototype[n]=e.prototype[t[n]]},afterSetFilter:function(){this._filterUpToDate=!1}},Kinetic.Validators={RGBComponent:function(e){return e>255?255:0>e?0:Math.round(e)},alphaComponent:function(e){return e>1?1:1e-4>e?1e-4:e}}}(),function(){var e="absoluteOpacity",t="absoluteTransform",n="Change",r="children",i=".",s="",o="get",u="id",a="kinetic",f="listening",l="mouseenter",c="mouseleave",h="name",p="set",d="Shape",v=" ",m="stage",g="transform",y="Stage",b="visible",w=["id"],E=["xChange.kinetic","yChange.kinetic","scaleXChange.kinetic","scaleYChange.kinetic","skewXChange.kinetic","skewYChange.kinetic","rotationChange.kinetic","offsetXChange.kinetic","offsetYChange.kinetic","transformsEnabledChange.kinetic"].join(v);Kinetic.Util.addMethods(Kinetic.Node,{_init:function(n){var r=this;this._id=Kinetic.idCounter++,this.eventListeners={},this.attrs={},this._cache={},this._filterUpToDate=!1,this.setAttrs(n),this.on(E,function(){this._clearCache(g),r._clearSelfAndDescendantCache(t)}),this.on("visibleChange.kinetic",function(){r._clearSelfAndDescendantCache(b)}),this.on("listeningChange.kinetic",function(){r._clearSelfAndDescendantCache(f)}),this.on("opacityChange.kinetic",function(){r._clearSelfAndDescendantCache(e)})},_clearCache:function(e){e?delete this._cache[e]:this._cache={}},_getCache:function(e,t){var n=this._cache[e];return void 0===n&&(this._cache[e]=t.call(this)),this._cache[e]},_clearSelfAndDescendantCache:function(e){this._clearCache(e),this.children&&this.getChildren().each(function(t){t._clearSelfAndDescendantCache(e)})},clearCache:function(){return delete this._cache.canvas,this._filterUpToDate=!1,this},cache:function(e){var t=e||{},n=t.x||0,r=t.y||0,i=t.width||this.width(),s=t.height||this.height(),o=t.drawBorder||!1;this.getLayer();if(0===i||0===s)return void Kinetic.Util.warn("Width or height of caching configuration equals 0. Cache is ignored.");var u=new Kinetic.SceneCanvas({pixelRatio:1,width:i,height:s}),a=new Kinetic.SceneCanvas({pixelRatio:1,width:i,height:s}),f=new Kinetic.HitCanvas({width:i,height:s}),l=(this.transformsEnabled(),this.x(),this.y(),u.getContext()),c=f.getContext();return this.clearCache(),l.save(),c.save(),o&&(l.save(),l.beginPath(),l.rect(0,0,i,s),l.closePath(),l.setAttr("strokeStyle","red"),l.setAttr("lineWidth",5),l.stroke(),l.restore()),l.translate(-1*n,-1*r),c.translate(-1*n,-1*r),"Shape"===this.nodeType&&(l.translate(-1*this.x(),-1*this.y()),c.translate(-1*this.x(),-1*this.y())),this.drawScene(u,this),this.drawHit(f,this),l.restore(),c.restore(),this._cache.canvas={scene:u,filter:a,hit:f},this},_drawCachedSceneCanvas:function(e){e.save(),this.getLayer()._applyTransform(this,e),e.drawImage(this._getCachedSceneCanvas()._canvas,0,0),e.restore()},_getCachedSceneCanvas:function(){var e,t,n,r,i=this.filters(),s=this._cache.canvas,o=s.scene,u=s.filter,a=u.getContext();if(i){if(!this._filterUpToDate){try{for(e=i.length,a.clear(),a.drawImage(o._canvas,0,0),t=a.getImageData(0,0,u.getWidth(),u.getHeight()),n=0;e>n;n++)r=i[n],r.call(this,t),a.putImageData(t,0,0)}catch(f){Kinetic.Util.warn("Unable to apply filter. "+f.message)}this._filterUpToDate=!0}return u}return o},_drawCachedHitCanvas:function(e){var t=this._cache.canvas,n=t.hit;e.save(),this.getLayer()._applyTransform(this,e),e.drawImage(n._canvas,0,0),e.restore()},on:function(e,t){var n,r,o,u,a,f=e.split(v),l=f.length;for(n=0;l>n;n++)r=f[n],o=r.split(i),u=o[0],a=o[1]||s,this.eventListeners[u]||(this.eventListeners[u]=[]),this.eventListeners[u].push({name:a,handler:t});return this},off:function(e){var t,n,r,s,o,u,a=e.split(v),f=a.length;for(t=0;f>t;t++)if(r=a[t],s=r.split(i),o=s[0],u=s[1],o)this.eventListeners[o]&&this._off(o,u);else for(n in this.eventListeners)this._off(n,u);return this},dispatchEvent:function(e){var t={target:this,type:e.type,evt:e};this.fire(e.type,t)},addEventListener:function(e,t){this.on(e,function(e){t.call(this,e.evt)})},remove:function(){var n=this.getParent();return n&&n.children&&(n.children.splice(this.index,1),n._setChildrenIndices(),delete this.parent),this._clearSelfAndDescendantCache(m),this._clearSelfAndDescendantCache(t),this._clearSelfAndDescendantCache(b),this._clearSelfAndDescendantCache(f),this._clearSelfAndDescendantCache(e),this},destroy:function(){Kinetic._removeId(this.getId()),Kinetic._removeName(this.getName(),this._id),this.remove()},getAttr:function(e){var t=o+Kinetic.Util._capitalize(e);return Kinetic.Util._isFunction(this[t])?this[t]():this.attrs[e]},getAncestors:function(){for(var e=this.getParent(),t=new Kinetic.Collection;e;)t.push(e),e=e.getParent();return t},getAttrs:function(){return this.attrs||{}},setAttrs:function(e){var t,n;if(e)for(t in e)t===r||(n=p+Kinetic.Util._capitalize(t),Kinetic.Util._isFunction(this[n])?this[n](e[t]):this._setAttr(t,e[t]));return this},isListening:function(){return this._getCache(f,this._isListening)},_isListening:function(){var e=this.getListening(),t=this.getParent();return"inherit"===e?t?t.isListening():!0:e},isVisible:function(){return this._getCache(b,this._isVisible)},_isVisible:function(){var e=this.getVisible(),t=this.getParent();return"inherit"===e?t?t.isVisible():!0:e},shouldDrawHit:function(){var e=this.getLayer();return e&&e.hitGraphEnabled()&&this.isListening()&&this.isVisible()&&!Kinetic.isDragging()},show:function(){return this.setVisible(!0),this},hide:function(){return this.setVisible(!1),this},getZIndex:function(){return this.index||0},getAbsoluteZIndex:function(){function e(a){for(t=[],n=a.length,r=0;n>r;r++)i=a[r],u++,i.nodeType!==d&&(t=t.concat(i.getChildren().toArray())),i._id===o._id&&(r=n);t.length>0&&t[0].getDepth()<=s&&e(t)}var t,n,r,i,s=this.getDepth(),o=this,u=0;return o.nodeType!==y&&e(o.getStage().getChildren()),u},getDepth:function(){for(var e=0,t=this.parent;t;)e++,t=t.parent;return e},setPosition:function(e){return this.setX(e.x),this.setY(e.y),this},getPosition:function(){return{x:this.getX(),y:this.getY()}},getAbsolutePosition:function(){var e=this.getAbsoluteTransform().getMatrix(),t=new Kinetic.Transform,n=this.offset();return t.m=e.slice(),t.translate(n.x,n.y),t.getTranslation()},setAbsolutePosition:function(e){var t,n=this._clearTransform();return this.attrs.x=n.x,this.attrs.y=n.y,delete n.x,delete n.y,t=this.getAbsoluteTransform(),t.invert(),t.translate(e.x,e.y),e={x:this.attrs.x+t.getTranslation().x,y:this.attrs.y+t.getTranslation().y},this.setPosition({x:e.x,y:e.y}),this._setTransform(n),this},_setTransform:function(e){var n;for(n in e)this.attrs[n]=e[n];this._clearCache(g),this._clearSelfAndDescendantCache(t)},_clearTransform:function(){var e={x:this.getX(),y:this.getY(),rotation:this.getRotation(),scaleX:this.getScaleX(),scaleY:this.getScaleY(),offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),skewX:this.getSkewX(),skewY:this.getSkewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,this._clearCache(g),this._clearSelfAndDescendantCache(t),e},move:function(e){var t=e.x,n=e.y,r=this.getX(),i=this.getY();return void 0!==t&&(r+=t),void 0!==n&&(i+=n),this.setPosition({x:r,y:i}),this},_eachAncestorReverse:function(e,t){var n,r,i=[],s=this.getParent();if(t&&t._id===this._id)return e(this),!0;for(i.unshift(this);s&&(!t||s._id!==t._id);)i.unshift(s),s=s.parent;for(n=i.length,r=0;n>r;r++)e(i[r])},rotate:function(e){return this.setRotation(this.getRotation()+e),this},moveToTop:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveToTop function is ignored.");var e=this.index;return this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0},moveUp:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveUp function is ignored.");var e=this.index,t=this.parent.getChildren().length;return t-1>e?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1},moveDown:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveDown function is ignored.");var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1},moveToBottom:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveToBottom function is ignored.");var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1},setZIndex:function(e){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. zIndex parameter is ignored.");var t=this.index;return this.parent.children.splice(t,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this},getAbsoluteOpacity:function(){return this._getCache(e,this._getAbsoluteOpacity)},_getAbsoluteOpacity:function(){var e=this.getOpacity();return this.getParent()&&(e*=this.getParent().getAbsoluteOpacity()),e},moveTo:function(e){return Kinetic.Node.prototype.remove.call(this),e.add(this),this},toObject:function(){var e,t,n,r,i=Kinetic.Util,s={},o=this.getAttrs();s.attrs={};for(e in o)t=o[e],i._isFunction(t)||i._isElement(t)||i._isObject(t)&&i._hasMethods(t)||(n=this[e],delete o[e],r=n?n.call(this):null,o[e]=t,r!==t&&(s.attrs[e]=t));return s.className=this.getClassName(),s},toJSON:function(){return JSON.stringify(this.toObject())},getParent:function(){return this.parent},getLayer:function(){var e=this.getParent();return e?e.getLayer():null},getStage:function(){return this._getCache(m,this._getStage)},_getStage:function(){var e=this.getParent();return e?e.getStage():void 0},fire:function(e,t,n){return n?this._fireAndBubble(e,t||{}):this._fire(e,t||{}),this},getAbsoluteTransform:function(e){return e?this._getAbsoluteTransform(e):this._getCache(t,this._getAbsoluteTransform)},_getAbsoluteTransform:function(e){var t,n,r=new Kinetic.Transform;return this._eachAncestorReverse(function(e){t=e.transformsEnabled(),n=e.getTransform(),"all"===t?r.multiply(n):"position"===t&&r.translate(e.x(),e.y())},e),r},getTransform:function(){return this._getCache(g,this._getTransform)},_getTransform:function(){var e=new Kinetic.Transform,t=this.getX(),n=this.getY(),r=Kinetic.getAngle(this.getRotation()),i=this.getScaleX(),s=this.getScaleY(),o=this.getSkewX(),u=this.getSkewY(),a=this.getOffsetX(),f=this.getOffsetY();return(0!==t||0!==n)&&e.translate(t,n),0!==r&&e.rotate(r),(0!==o||0!==u)&&e.skew(o,u),(1!==i||1!==s)&&e.scale(i,s),(0!==a||0!==f)&&e.translate(-1*a,-1*f),e},clone:function(e){var t,n,r,i,s,o=this.getClassName(),u=Kinetic.Util.cloneObject(this.attrs);for(var f in w){var l=w[f];delete u[l]}for(t in e)u[t]=e[t];var c=new Kinetic[o](u);for(t in this.eventListeners)for(n=this.eventListeners[t],r=n.length,i=0;r>i;i++)s=n[i],s.name.indexOf(a)<0&&(c.eventListeners[t]||(c.eventListeners[t]=[]),c.eventListeners[t].push(s));return c},toDataURL:function(e){e=e||{};var t=e.mimeType||null,n=e.quality||null,r=this.getStage(),i=e.x||0,s=e.y||0,o=new Kinetic.SceneCanvas({width:e.width||this.getWidth()||(r?r.getWidth():0),height:e.height||this.getHeight()||(r?r.getHeight():0),pixelRatio:1}),u=o.getContext();return u.save(),(i||s)&&u.translate(-1*i,-1*s),this.drawScene(o),u.restore(),o.toDataURL(t,n)},toImage:function(e){Kinetic.Util._getImage(this.toDataURL(e),function(t){e.callback(t)})},setSize:function(e){return this.setWidth(e.width),this.setHeight(e.height),this},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getWidth:function(){return this.attrs.width||0},getHeight:function(){return this.attrs.height||0},getClassName:function(){return this.className||this.nodeType},getType:function(){return this.nodeType},getDragDistance:function(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Kinetic.dragDistance},_get:function(e){return this.nodeType===e?[this]:[]},_off:function(e,t){var n,r,i=this.eventListeners[e];for(n=0;n<i.length;n++)if(r=i[n].name,!("kinetic"===r&&"kinetic"!==t||t&&r!==t)){if(i.splice(n,1),0===i.length){delete this.eventListeners[e];break}n--}},_fireChangeEvent:function(e,t,r){this._fire(e+n,{oldVal:t,newVal:r})},setId:function(e){var t=this.getId();return Kinetic._removeId(t),Kinetic._addId(this,e),this._setAttr(u,e),this},setName:function(e){var t=this.getName();return Kinetic._removeName(t,this._id),Kinetic._addName(this,e),this._setAttr(h,e),this},setAttr:function(){var e=Array.prototype.slice.call(arguments),t=e[0],n=e[1],r=p+Kinetic.Util._capitalize(t),i=this[r];return Kinetic.Util._isFunction(i)?i.call(this,n):this._setAttr(t,n),this},_setAttr:function(e,t){var n;void 0!==t&&(n=this.attrs[e],this.attrs[e]=t,this._fireChangeEvent(e,n,t))},_setComponentAttr:function(e,t,n){var r;void 0!==n&&(r=this.attrs[e],r||(this.attrs[e]=this.getAttr(e)),this.attrs[e][t]=n,this._fireChangeEvent(e,r,n))},_fireAndBubble:function(e,t,n){var r=!0;t&&this.nodeType===d&&(t.target=this),e===l&&n&&this._id===n._id?r=!1:e===c&&n&&this._id===n._id&&(r=!1),r&&(this._fire(e,t),t&&!t.cancelBubble&&this.parent&&(n&&n.parent?this._fireAndBubble.call(this.parent,e,t,n.parent):this._fireAndBubble.call(this.parent,e,t)))},_fire:function(e,t){var n,r=this.eventListeners[e];if(t.type=e,r)for(n=0;n<r.length;n++)r[n].handler.call(this,t)},draw:function(){return this.drawScene(),this.drawHit(),this}}),Kinetic.Node.create=function(e,t){return this._createNode(JSON.parse(e),t)},Kinetic.Node._createNode=function(e,t){var n,r,i,s=Kinetic.Node.prototype.getClassName.call(e),o=e.children;if(t&&(e.attrs.container=t),n=new Kinetic[s](e.attrs),o)for(r=o.length,i=0;r>i;i++)n.add(this._createNode(o[i]));return n},Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"position"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"x",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"y",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"opacity",1),Kinetic.Factory.addGetter(Kinetic.Node,"name"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"name"),Kinetic.Factory.addGetter(Kinetic.Node,"id"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"id"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"rotation",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"scale",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleX",1),Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleY",1),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"skew",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewX",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"offset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetY",0),Kinetic.Factory.addSetter(Kinetic.Node,"dragDistance"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"dragDistance"),Kinetic.Factory.addSetter(Kinetic.Node,"width",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"width"),Kinetic.Factory.addSetter(Kinetic.Node,"height",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"height"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"listening","inherit"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"filters",void 0,function(e){return this._filterUpToDate=!1,e}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"visible","inherit"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"transformsEnabled","all"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"size"),Kinetic.Factory.backCompat(Kinetic.Node,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Kinetic.Collection.mapMethods(Kinetic.Node)}(),function(){Kinetic.Filters.Grayscale=function(e){var t,n,r=e.data,i=r.length;for(t=0;i>t;t+=4)n=.34*r[t]+.5*r[t+1]+.16*r[t+2],r[t]=n,r[t+1]=n,r[t+2]=n}}(),function(){Kinetic.Filters.Brighten=function(e){var t,n=255*this.brightness(),r=e.data,i=r.length;for(t=0;i>t;t+=4)r[t]+=n,r[t+1]+=n,r[t+2]+=n},Kinetic.Factory.addGetterSetter(Kinetic.Node,"brightness",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Invert=function(e){var t,n=e.data,r=n.length;for(t=0;r>t;t+=4)n[t]=255-n[t],n[t+1]=255-n[t+1],n[t+2]=255-n[t+2]}}(),function(){function e(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function t(t,i){var s,o,u,f,l,h,p,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_=t.data,D=t.width,P=t.height,H=i+i+1,B=D-1,j=P-1,F=i+1,I=F*(F+1)/2,q=new e,R=null,U=q,z=null,W=null,X=n[i],V=r[i];for(u=1;H>u;u++)U=U.next=new e,u==F&&(R=U);for(U.next=q,p=h=0,o=0;P>o;o++){for(x=T=N=C=v=m=g=y=0,b=F*(k=_[h]),w=F*(L=_[h+1]),E=F*(A=_[h+2]),S=F*(O=_[h+3]),v+=I*k,m+=I*L,g+=I*A,y+=I*O,U=q,u=0;F>u;u++)U.r=k,U.g=L,U.b=A,U.a=O,U=U.next;for(u=1;F>u;u++)f=h+((u>B?B:u)<<2),v+=(U.r=k=_[f])*(M=F-u),m+=(U.g=L=_[f+1])*M,g+=(U.b=A=_[f+2])*M,y+=(U.a=O=_[f+3])*M,x+=k,T+=L,N+=A,C+=O,U=U.next;for(z=q,W=R,s=0;D>s;s++)_[h+3]=O=y*X>>V,0!==O?(O=255/O,_[h]=(v*X>>V)*O,_[h+1]=(m*X>>V)*O,_[h+2]=(g*X>>V)*O):_[h]=_[h+1]=_[h+2]=0,v-=b,m-=w,g-=E,y-=S,b-=z.r,w-=z.g,E-=z.b,S-=z.a,f=p+((f=s+i+1)<B?f:B)<<2,x+=z.r=_[f],T+=z.g=_[f+1],N+=z.b=_[f+2],C+=z.a=_[f+3],v+=x,m+=T,g+=N,y+=C,z=z.next,b+=k=W.r,w+=L=W.g,E+=A=W.b,S+=O=W.a,x-=k,T-=L,N-=A,C-=O,W=W.next,h+=4;p+=D}for(s=0;D>s;s++){for(T=N=C=x=m=g=y=v=0,h=s<<2,b=F*(k=_[h]),w=F*(L=_[h+1]),E=F*(A=_[h+2]),S=F*(O=_[h+3]),v+=I*k,m+=I*L,g+=I*A,y+=I*O,U=q,u=0;F>u;u++)U.r=k,U.g=L,U.b=A,U.a=O,U=U.next;for(l=D,u=1;i>=u;u++)h=l+s<<2,v+=(U.r=k=_[h])*(M=F-u),m+=(U.g=L=_[h+1])*M,g+=(U.b=A=_[h+2])*M,y+=(U.a=O=_[h+3])*M,x+=k,T+=L,N+=A,C+=O,U=U.next,j>u&&(l+=D);for(h=s,z=q,W=R,o=0;P>o;o++)f=h<<2,_[f+3]=O=y*X>>V,O>0?(O=255/O,_[f]=(v*X>>V)*O,_[f+1]=(m*X>>V)*O,_[f+2]=(g*X>>V)*O):_[f]=_[f+1]=_[f+2]=0,v-=b,m-=w,g-=E,y-=S,b-=z.r,w-=z.g,E-=z.b,S-=z.a,f=s+((f=o+F)<j?f:j)*D<<2,v+=x+=z.r=_[f],m+=T+=z.g=_[f+1],g+=N+=z.b=_[f+2],y+=C+=z.a=_[f+3],z=z.next,b+=k=W.r,w+=L=W.g,E+=A=W.b,S+=O=W.a,x-=k,T-=L,N-=A,C-=O,W=W.next,h+=D}}var n=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],r=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];Kinetic.Filters.Blur=function(e){var n=Math.round(this.blurRadius());n>0&&t(e,n)},Kinetic.Factory.addGetterSetter(Kinetic.Node,"blurRadius",0,null,Kinetic.Factory.afterSetFilter)}(),function(){function e(e,t,n){var r=4*(n*e.width+t),i=[];return i.push(e.data[r++],e.data[r++],e.data[r++],e.data[r++]),i}function t(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}function n(e){for(var t=[0,0,0],n=0;n<e.length;n++)t[0]+=e[n][0],t[1]+=e[n][1],t[2]+=e[n][2];return t[0]/=e.length,t[1]/=e.length,t[2]/=e.length,t}function r(r,i){var s=e(r,0,0),o=e(r,r.width-1,0),u=e(r,0,r.height-1),f=e(r,r.width-1,r.height-1),l=i||10;if(t(s,o)<l&&t(o,f)<l&&t(f,u)<l&&t(u,s)<l){for(var h=n([o,s,f,u]),p=[],d=0;d<r.width*r.height;d++){var v=t(h,[r.data[4*d],r.data[4*d+1],r.data[4*d+2]]);p[d]=l>v?0:255}return p}}function i(e,t){for(var n=0;n<e.width*e.height;n++)e.data[4*n+3]=t[n]}function s(e,t,n){for(var r=[1,1,1,1,0,1,1,1,1],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),o=[],u=0;n>u;u++)for(var a=0;t>a;a++){for(var f=u*t+a,l=0,c=0;i>c;c++)for(var h=0;i>h;h++){var p=u+c-s,d=a+h-s;if(p>=0&&n>p&&d>=0&&t>d){var v=p*t+d,m=r[c*i+h];l+=e[v]*m}}o[f]=2040===l?255:0}return o}function o(e,t,n){for(var r=[1,1,1,1,1,1,1,1,1],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),o=[],u=0;n>u;u++)for(var a=0;t>a;a++){for(var f=u*t+a,l=0,c=0;i>c;c++)for(var h=0;i>h;h++){var p=u+c-s,d=a+h-s;if(p>=0&&n>p&&d>=0&&t>d){var v=p*t+d,m=r[c*i+h];l+=e[v]*m}}o[f]=l>=1020?255:0}return o}function u(e,t,n){for(var r=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),o=[],u=0;n>u;u++)for(var a=0;t>a;a++){for(var f=u*t+a,l=0,c=0;i>c;c++)for(var h=0;i>h;h++){var p=u+c-s,d=a+h-s;if(p>=0&&n>p&&d>=0&&t>d){var v=p*t+d,m=r[c*i+h];l+=e[v]*m}}o[f]=l}return o}Kinetic.Filters.Mask=function(e){var t=this.threshold(),n=r(e,t);return n&&(n=s(n,e.width,e.height),n=o(n,e.width,e.height),n=u(n,e.width,e.height),i(e,n)),e},Kinetic.Factory.addGetterSetter(Kinetic.Node,"threshold",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.RGB=function(e){var t,n,r=e.data,i=r.length,s=this.red(),o=this.green(),u=this.blue();for(t=0;i>t;t+=4)n=(.34*r[t]+.5*r[t+1]+.16*r[t+2])/255,r[t]=n*s,r[t+1]=n*o,r[t+2]=n*u,r[t+3]=r[t+3]},Kinetic.Factory.addGetterSetter(Kinetic.Node,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:0>e?0:Math.round(e)}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:0>e?0:Math.round(e)}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"blue",0,Kinetic.Validators.RGBComponent,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.HSV=function(e){var t,n,r,i,s,o=e.data,u=o.length,a=Math.pow(2,this.value()),f=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c=a*f*Math.cos(l*Math.PI/180),h=a*f*Math.sin(l*Math.PI/180),p=.299*a+.701*c+.167*h,d=.587*a-.587*c+.33*h,v=.114*a-.114*c-.497*h,m=.299*a-.299*c-.328*h,g=.587*a+.413*c+.035*h,y=.114*a-.114*c+.293*h,b=.299*a-.3*c+1.25*h,w=.587*a-.586*c-1.05*h,E=.114*a+.886*c-.2*h;for(t=0;u>t;t+=4)n=o[t+0],r=o[t+1],i=o[t+2],s=o[t+3],o[t+0]=p*n+d*r+v*i,o[t+1]=m*n+g*r+y*i,o[t+2]=b*n+w*r+E*i,o[t+3]=s},Kinetic.Factory.addGetterSetter(Kinetic.Node,"hue",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"saturation",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"value",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Factory.addGetterSetter(Kinetic.Node,"hue",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"saturation",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"luminance",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Filters.HSL=function(e){var t,n,r,i,s,o=e.data,u=o.length,a=1,f=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c=127*this.luminance(),h=a*f*Math.cos(l*Math.PI/180),p=a*f*Math.sin(l*Math.PI/180),d=.299*a+.701*h+.167*p,v=.587*a-.587*h+.33*p,m=.114*a-.114*h-.497*p,g=.299*a-.299*h-.328*p,y=.587*a+.413*h+.035*p,b=.114*a-.114*h+.293*p,w=.299*a-.3*h+1.25*p,E=.587*a-.586*h-1.05*p,S=.114*a+.886*h-.2*p;for(t=0;u>t;t+=4)n=o[t+0],r=o[t+1],i=o[t+2],s=o[t+3],o[t+0]=d*n+v*r+m*i+c,o[t+1]=g*n+y*r+b*i+c,o[t+2]=w*n+E*r+S*i+c,o[t+3]=s}}(),function(){Kinetic.Filters.Emboss=function(e){var t=10*this.embossStrength(),n=255*this.embossWhiteLevel(),r=this.embossDirection(),i=this.embossBlend(),s=0,o=0,u=e.data,a=e.width,f=e.height,l=4*a,c=f;switch(r){case"top-left":s=-1,o=-1;break;case"top":s=-1,o=0;break;case"top-right":s=-1,o=1;break;case"right":s=0,o=1;break;case"bottom-right":s=1,o=1;break;case"bottom":s=1,o=0;break;case"bottom-left":s=1,o=-1;break;case"left":s=0,o=-1}do{var h=(c-1)*l,p=s;1>c+p&&(p=0),c+p>f&&(p=0);var d=(c-1+p)*a*4,v=a;do{var m=h+4*(v-1),g=o;1>v+g&&(g=0),v+g>a&&(g=0);var y=d+4*(v-1+g),b=u[m]-u[y],w=u[m+1]-u[y+1],E=u[m+2]-u[y+2],S=b,x=S>0?S:-S,T=w>0?w:-w,N=E>0?E:-E;if(T>x&&(S=w),N>x&&(S=E),S*=t,i){var C=u[m]+S,k=u[m+1]+S,L=u[m+2]+S;u[m]=C>255?255:0>C?0:C,u[m+1]=k>255?255:0>k?0:k,u[m+2]=L>255?255:0>L?0:L}else{var A=n-S;0>A?A=0:A>255&&(A=255),u[m]=u[m+1]=u[m+2]=A}}while(--v)}while(--c)},Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossStrength",.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossWhiteLevel",.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossDirection","top-left",null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossBlend",!1,null,Kinetic.Factory.afterSetFilter)}(),function(){function e(e,t,n,r,i){var s,o=n-t,u=i-r;return 0===o?r+u/2:0===u?r:(s=(e-t)/o,s=u*s+r)}Kinetic.Filters.Enhance=function(t){var n,r,i,s,o=t.data,u=o.length,f=o[0],l=f,c=o[1],h=c,p=o[2],d=p,v=o[3],m=v,g=this.enhance();if(0!==g){for(s=0;u>s;s+=4)n=o[s+0],f>n?f=n:n>l&&(l=n),r=o[s+1],c>r?c=r:r>h&&(h=r),i=o[s+2],p>i?p=i:i>d&&(d=i);l===f&&(l=255,f=0),h===c&&(h=255,c=0),d===p&&(d=255,p=0),m===v&&(m=255,v=0);var y,b,w,E,S,x,T,N,C,k,L,A;for(g>0?(b=l+g*(255-l),w=f-g*(f-0),S=h+g*(255-h),x=c-g*(c-0),N=d+g*(255-d),A=p-g*(p-0),L=m+g*(255-m),C=v-g*(v-0)):(y=.5*(l+f),b=l+g*(l-y),w=f+g*(f-y),E=.5*(h+c),S=h+g*(h-E),x=c+g*(c-E),T=.5*(d+p),N=d+g*(d-T),A=p+g*(p-T),k=.5*(m+v),L=m+g*(m-k),C=v+g*(v-k)),s=0;u>s;s+=4)o[s+0]=e(o[s+0],f,l,w,b),o[s+1]=e(o[s+1],c,h,x,S),o[s+2]=e(o[s+2],p,d,A,N)}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"enhance",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Posterize=function(e){var t,n=Math.round(254*this.levels())+1,r=e.data,i=r.length,s=255/n;for(t=0;i>t;t+=1)r[t]=Math.floor(r[t]/s)*s},Kinetic.Factory.addGetterSetter(Kinetic.Node,"levels",.5,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Noise=function(e){var t,n=255*this.noise(),r=e.data,i=r.length,s=n/2;for(t=0;i>t;t+=4)r[t+0]+=s-2*s*Math.random(),r[t+1]+=s-2*s*Math.random(),r[t+2]+=s-2*s*Math.random()},Kinetic.Factory.addGetterSetter(Kinetic.Node,"noise",.2,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Pixelate=function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v=Math.ceil(this.pixelSize()),m=e.width,g=e.height,y=Math.ceil(m/v),b=Math.ceil(g/v);for(e=e.data,h=0;y>h;h+=1)for(p=0;b>p;p+=1){for(i=0,s=0,o=0,u=0,a=h*v,f=a+v,l=p*v,c=l+v,d=0,t=a;f>t;t+=1)if(!(t>=m))for(n=l;c>n;n+=1)n>=g||(r=4*(m*n+t),i+=e[r+0],s+=e[r+1],o+=e[r+2],u+=e[r+3],d+=1);for(i/=d,s/=d,o/=d,t=a;f>t;t+=1)if(!(t>=m))for(n=l;c>n;n+=1)n>=g||(r=4*(m*n+t),e[r+0]=i,e[r+1]=s,e[r+2]=o,e[r+3]=u)}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"pixelSize",8,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Threshold=function(e){var t,n=255*this.threshold(),r=e.data,i=r.length;for(t=0;i>t;t+=1)r[t]=r[t]<n?0:255},Kinetic.Factory.addGetterSetter(Kinetic.Node,"threshold",.5,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Sepia=function(e){var t,n,r,i,s,o,u,a,f,l=e.data,c=e.width,h=e.height,p=4*c;do{t=(h-1)*p,n=c;do r=t+4*(n-1),i=l[r],s=l[r+1],o=l[r+2],u=.393*i+.769*s+.189*o,a=.349*i+.686*s+.168*o,f=.272*i+.534*s+.131*o,l[r]=u>255?255:u,l[r+1]=a>255?255:a,l[r+2]=f>255?255:f,l[r+3]=l[r+3];while(--n)}while(--h)}}(),function(){Kinetic.Filters.Solarize=function(e){var t=e.data,n=e.width,r=e.height,i=4*n,s=r;do{var o=(s-1)*i,u=n;do{var a=o+4*(u-1),f=t[a],l=t[a+1],c=t[a+2];f>127&&(f=255-f),l>127&&(l=255-l),c>127&&(c=255-c),t[a]=f,t[a+1]=l,t[a+2]=c}while(--u)}while(--s)}}(),function(){var e=function(e,t,n){var r,i,s,o,u=e.data,a=t.data,f=e.width,l=e.height,c=n.polarCenterX||f/2,h=n.polarCenterY||l/2,p=0,d=0,v=0,m=0,g=Math.sqrt(c*c+h*h);i=f-c,s=l-h,o=Math.sqrt(i*i+s*s),g=o>g?o:g;var y,b,w,E,S=l,x=f,T=360/x*Math.PI/180;for(b=0;x>b;b+=1)for(w=Math.sin(b*T),E=Math.cos(b*T),y=0;S>y;y+=1)i=Math.floor(c+g*y/S*E),s=Math.floor(h+g*y/S*w),r=4*(s*f+i),p=u[r+0],d=u[r+1],v=u[r+2],m=u[r+3],r=4*(b+y*f),a[r+0]=p,a[r+1]=d,a[r+2]=v,a[r+3]=m},t=function(e,t,n){var r,i,s,o,u,a,f=e.data,l=t.data,c=e.width,h=e.height,p=n.polarCenterX||c/2,d=n.polarCenterY||h/2,v=0,m=0,g=0,y=0,b=Math.sqrt(p*p+d*d);i=c-p,s=h-d,a=Math.sqrt(i*i+s*s),b=a>b?a:b;var w,E,S,x,T=h,N=c,C=n.polarRotation||0;for(i=0;c>i;i+=1)for(s=0;h>s;s+=1)o=i-p,u=s-d,w=Math.sqrt(o*o+u*u)*T/b,E=(180*Math.atan2(u,o)/Math.PI+360+C)%360,E=E*N/360,S=Math.floor(E),x=Math.floor(w),r=4*(x*c+S),v=f[r+0],m=f[r+1],g=f[r+2],y=f[r+3],r=4*(s*c+i),l[r+0]=v,l[r+1]=m,l[r+2]=g,l[r+3]=y},n=Kinetic.Util.createCanvasElement();Kinetic.Filters.Kaleidoscope=function(r){var i,s,o,u,f,l,h,p,d,v,m=r.width,g=r.height,y=Math.round(this.kaleidoscopePower()),w=Math.round(this.kaleidoscopeAngle()),E=Math.floor(m*(w%360)/360);if(!(1>y)){n.width=m,n.height=g;var S=n.getContext("2d").getImageData(0,0,m,g);e(r,S,{polarCenterX:m/2,polarCenterY:g/2});for(var x=m/Math.pow(2,y);8>=x;)x=2*x,y-=1;x=Math.ceil(x);var T=x,N=0,C=T,k=1;for(E+x>m&&(N=T,C=0,k=-1),s=0;g>s;s+=1)for(i=N;i!==C;i+=k)o=Math.round(i+E)%m,d=4*(m*s+o),f=S.data[d+0],l=S.data[d+1],h=S.data[d+2],p=S.data[d+3],v=4*(m*s+i),S.data[v+0]=f,S.data[v+1]=l,S.data[v+2]=h,S.data[v+3]=p;for(s=0;g>s;s+=1)for(T=Math.floor(x),u=0;y>u;u+=1){for(i=0;T+1>i;i+=1)d=4*(m*s+i),f=S.data[d+0],l=S.data[d+1],h=S.data[d+2],p=S.data[d+3],v=4*(m*s+2*T-i-1),S.data[v+0]=f,S.data[v+1]=l,S.data[v+2]=h,S.data[v+3]=p;T*=2}t(S,r,{polarRotation:0})}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"kaleidoscopePower",2,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"kaleidoscopeAngle",0,null,Kinetic.Factory.afterSetFilter)}(),function(){function e(e){Kinetic.root.setTimeout(e,1e3/60)}function t(){return i.apply(Kinetic.root,arguments)}var n=500,r=function(){return Kinetic.root.performance&&Kinetic.root.performance.now?function(){return Kinetic.root.performance.now()}:function(){return(new Date).getTime()}}(),i=function(){return Kinetic.root.requestAnimationFrame||Kinetic.root.webkitRequestAnimationFrame||Kinetic.root.mozRequestAnimationFrame||Kinetic.root.oRequestAnimationFrame||Kinetic.root.msRequestAnimationFrame||e}();Kinetic.Animation=function(e,t){var n=Kinetic.Animation;this.func=e,this.setLayers(t),this.id=n.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:r()}},Kinetic.Animation.prototype={setLayers:function(e){var t=[];t=e?e.length>0?e:[e]:[],this.layers=t},getLayers:function(){return this.layers},addLayer:function(e){var t,n,r=this.layers;if(r){for(t=r.length,n=0;t>n;n++)if(r[n]._id===e._id)return!1}else this.layers=[];return this.layers.push(e),!0},isRunning:function(){var e,t=Kinetic.Animation,n=t.animations,r=n.length;for(e=0;r>e;e++)if(n[e].id===this.id)return!0;return!1},start:function(){var e=Kinetic.Animation;this.stop(),this.frame.timeDiff=0,this.frame.lastTime=r(),e._addAnimation(this)},stop:function(){Kinetic.Animation._removeAnimation(this)},_updateFrameObject:function(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}},Kinetic.Animation.animations=[],Kinetic.Animation.animIdCounter=0,Kinetic.Animation.animRunning=!1,Kinetic.Animation._addAnimation=function(e){this.animations.push(e),this._handleAnimation()},Kinetic.Animation._removeAnimation=function(e){var t,n=e.id,r=this.animations,i=r.length;for(t=0;i>t;t++)if(r[t].id===n){this.animations.splice(t,1);break}},Kinetic.Animation._runFrames=function(){var e,t,n,i,s,o,u,a,f={},l=this.animations;for(i=0;i<l.length;i++){for(e=l[i],t=e.layers,n=e.func,e._updateFrameObject(r()),o=t.length,s=0;o>s;s++)u=t[s],void 0!==u._id&&(f[u._id]=u);n&&n.call(e,e.frame)}for(a in f)f[a].draw()},Kinetic.Animation._animationLoop=function(){var e=Kinetic.Animation;e.animations.length?(t(e._animationLoop),e._runFrames()):e.animRunning=!1},Kinetic.Animation._handleAnimation=function(){var e=this;this.animRunning||(this.animRunning=!0,e._animationLoop())};var s=Kinetic.Node.prototype.moveTo;Kinetic.Node.prototype.moveTo=function(e){s.call(this,e)},Kinetic.Layer.prototype.batchDraw=function(){var e=this,t=Kinetic.Animation;this.batchAnim||(this.batchAnim=new t(function(){e.lastBatchDrawTime&&r()-e.lastBatchDrawTime>n&&e.batchAnim.stop()},this)),this.lastBatchDrawTime=r(),this.batchAnim.isRunning()||(this.draw(),this.batchAnim.start())},Kinetic.Stage.prototype.batchDraw=function(){this.getChildren().each(function(e){e.batchDraw()})}}((1,eval)("this")),function(){var e={node:1,duration:1,easing:1,onFinish:1,yoyo:1},t=1,n=2,r=3,i=0;Kinetic.Tween=function(t){var n,r=this,o=t.node,u=o._id,l=t.duration||1,c=t.easing||Kinetic.Easings.Linear,h=!!t.yoyo;this.node=o,this._id=i++,this.anim=new Kinetic.Animation(function(){r.tween.onEnterFrame()},o.getLayer()),this.tween=new s(n,function(e){r._tweenFunc(e)},c,0,1,1e3*l,h),this._addListeners(),Kinetic.Tween.attrs[u]||(Kinetic.Tween.attrs[u]={}),Kinetic.Tween.attrs[u][this._id]||(Kinetic.Tween.attrs[u][this._id]={}),Kinetic.Tween.tweens[u]||(Kinetic.Tween.tweens[u]={});for(n in t)void 0===e[n]&&this._addAttr(n,t[n]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset},Kinetic.Tween.attrs={},Kinetic.Tween.tweens={},Kinetic.Tween.prototype={_addAttr:function(e,t){var n,r,i,s,o,u=this.node,a=u._id;if(i=Kinetic.Tween.tweens[a][e],i&&delete Kinetic.Tween.attrs[a][i][e],n=u.getAttr(e),Kinetic.Util._isArray(t))for(r=[],o=t.length,s=0;o>s;s++)r.push(t[s]-n[s]);else r=t-n;Kinetic.Tween.attrs[a][this._id][e]={start:n,diff:r},Kinetic.Tween.tweens[a][e]=this._id},_tweenFunc:function(e){var t,n,r,i,s,o,u,a=this.node,f=Kinetic.Tween.attrs[a._id][this._id];for(t in f){if(n=f[t],r=n.start,i=n.diff,Kinetic.Util._isArray(r))for(s=[],u=r.length,o=0;u>o;o++)s.push(r[o]+i[o]*e);else s=r+i*e;a.setAttr(t,s)}},_addListeners:function(){var e=this;this.tween.onPlay=function(){e.anim.start()},this.tween.onReverse=function(){e.anim.start()},this.tween.onPause=function(){e.anim.stop()},this.tween.onFinish=function(){e.onFinish&&e.onFinish()},this.tween.onReset=function(){e.onReset&&e.onReset()}},play:function(){return this.tween.play(),this},reverse:function(){return this.tween.reverse(),this},reset:function(){return this.node,this.tween.reset(),this},seek:function(e){return this.node,this.tween.seek(1e3*e),this},pause:function(){return this.tween.pause(),this},finish:function(){return this.node,this.tween.finish(),this},destroy:function(){var e,t=this.node._id,n=this._id,r=Kinetic.Tween.tweens[t];this.pause();for(e in r)delete Kinetic.Tween.tweens[t][e];delete Kinetic.Tween.attrs[t][n]}};var s=function(e,t,n,r,i,s,o){this.prop=e,this.propFunc=t,this.begin=r,this._pos=r,this.duration=s,this._change=0,this.prevPos=0,this.yoyo=o,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=i-this.begin,this.pause()};s.prototype={fire:function(e){var t=this[e];t&&t()},setTime:function(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():0>e?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())},getTime:function(){return this._time},setPosition:function(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e},getPosition:function(e){return void 0===e&&(e=this._time),this.func(e,this.begin,this._change,this.duration)},play:function(){this.state=n,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},reverse:function(){this.state=r,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},seek:function(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")},reset:function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},finish:function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},update:function(){this.setPosition(this.getPosition(this._time))},onEnterFrame:function(){var e=this.getTimer()-this._startTime;this.state===n?this.setTime(e):this.state===r&&this.setTime(this.duration-e)},pause:function(){this.state=t,this.fire("onPause")},getTimer:function(){return(new Date).getTime()}},Kinetic.Easings={BackEaseIn:function(e,t,n,r){var i=1.70158;return n*(e/=r)*e*((i+1)*e-i)+t},BackEaseOut:function(e,t,n,r){var i=1.70158;return n*((e=e/r-1)*e*((i+1)*e+i)+1)+t},BackEaseInOut:function(e,t,n,r){var i=1.70158;return(e/=r/2)<1?n/2*e*e*(((i*=1.525)+1)*e-i)+t:n/2*((e-=2)*e*(((i*=1.525)+1)*e+i)+2)+t},ElasticEaseIn:function(e,t,n,r,i,s){var o=0;return 0===e?t:1==(e/=r)?t+n:(s||(s=.3*r),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),-(i*Math.pow(2,10*(e-=1))*Math.sin(2*(e*r-o)*Math.PI/s))+t)},ElasticEaseOut:function(e,t,n,r,i,s){var o=0;return 0===e?t:1==(e/=r)?t+n:(s||(s=.3*r),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*e)*Math.sin(2*(e*r-o)*Math.PI/s)+n+t)},ElasticEaseInOut:function(e,t,n,r,i,s){var o=0;return 0===e?t:2==(e/=r/2)?t+n:(s||(s=.3*r*1.5),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),1>e?-0.5*i*Math.pow(2,10*(e-=1))*Math.sin(2*(e*r-o)*Math.PI/s)+t:i*Math.pow(2,-10*(e-=1))*Math.sin(2*(e*r-o)*Math.PI/s)*.5+n+t)},BounceEaseOut:function(e,t,n,r){return(e/=r)<1/2.75?7.5625*n*e*e+t:2/2.75>e?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:2.5/2.75>e?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},BounceEaseIn:function(e,t,n,r){return n-Kinetic.Easings.BounceEaseOut(r-e,0,n,r)+t},BounceEaseInOut:function(e,t,n,r){return r/2>e?.5*Kinetic.Easings.BounceEaseIn(2*e,0,n,r)+t:.5*Kinetic.Easings.BounceEaseOut(2*e-r,0,n,r)+.5*n+t},EaseIn:function(e,t,n,r){return n*(e/=r)*e+t},EaseOut:function(e,t,n,r){return-n*(e/=r)*(e-2)+t},EaseInOut:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},StrongEaseIn:function(e,t,n,r){return n*(e/=r)*e*e*e*e+t},StrongEaseOut:function(e,t,n,r){return n*((e=e/r-1)*e*e*e*e+1)+t},StrongEaseInOut:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t},Linear:function(e,t,n,r){return n*e/r+t}}}(),function(){Kinetic.DD={anim:new Kinetic.Animation,isDragging:!1,offset:{x:0,y:0},node:null,_drag:function(e){var t=Kinetic.DD,n=t.node;if(n){if(!t.isDragging){var r=n.getStage().getPointerPosition(),i=n.dragDistance(),s=Math.max(Math.abs(r.x-t.startPointerPos.x),Math.abs(r.y-t.startPointerPos.y));if(i>s)return}n._setDragPosition(e),t.isDragging||(t.isDragging=!0,n.fire("dragstart",{type:"dragstart",target:n,evt:e},!0)),n.fire("dragmove",{type:"dragmove",target:n,evt:e},!0)}},_endDragBefore:function(e){var t,n,r=Kinetic.DD,i=r.node;i&&(t=i.nodeType,n=i.getLayer(),r.anim.stop(),r.isDragging&&(r.isDragging=!1,Kinetic.listenClickTap=!1,e&&(e.dragEndNode=i)),delete r.node,(n||i).draw())},_endDragAfter:function(e){e=e||{};var t=e.dragEndNode;e&&t&&t.fire("dragend",{type:"dragend",target:t,evt:e},!0)}},Kinetic.Node.prototype.startDrag=function(){var e=Kinetic.DD,t=this.getStage(),n=this.getLayer(),r=t.getPointerPosition(),i=this.getAbsolutePosition();r&&(e.node&&e.node.stopDrag(),e.node=this,e.startPointerPos=r,e.offset.x=r.x-i.x,e.offset.y=r.y-i.y,e.anim.setLayers(n||this.getLayers()),e.anim.start(),this._setDragPosition())},Kinetic.Node.prototype._setDragPosition=function(e){var t=Kinetic.DD,n=this.getStage().getPointerPosition(),r=this.getDragBoundFunc();if(n){var i={x:n.x-t.offset.x,y:n.y-t.offset.y};void 0!==r&&(i=r.call(this,i,e)),this.setAbsolutePosition(i)}},Kinetic.Node.prototype.stopDrag=function(){var e=Kinetic.DD,t={};e._endDragBefore(t),e._endDragAfter(t)},Kinetic.Node.prototype.setDraggable=function(e){this._setAttr("draggable",e),this._dragChange()};var e=Kinetic.Node.prototype.destroy;Kinetic.Node.prototype.destroy=function(){var t=Kinetic.DD;t.node&&t.node._id===this._id&&this.stopDrag(),e.call(this)},Kinetic.Node.prototype.isDragging=function(){var e=Kinetic.DD;return e.node&&e.node._id===this._id&&e.isDragging},Kinetic.Node.prototype._listenDrag=function(){var e=this;this._dragCleanup(),"Stage"===this.getClassName()?this.on("contentMousedown.kinetic contentTouchstart.kinetic",function(t){Kinetic.DD.node||e.startDrag(t)}):this.on("mousedown.kinetic touchstart.kinetic",function(t){Kinetic.DD.node||e.startDrag(t)})},Kinetic.Node.prototype._dragChange=function(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage(),t=Kinetic.DD;e&&t.node&&t.node._id===this._id&&t.node.stopDrag()}},Kinetic.Node.prototype._dragCleanup=function(){"Stage"===this.getClassName()?(this.off("contentMousedown.kinetic"),this.off("contentTouchstart.kinetic")):(this.off("mousedown.kinetic"),this.off("touchstart.kinetic"))},Kinetic.Factory.addGetterSetter(Kinetic.Node,"dragBoundFunc"),Kinetic.Factory.addGetter(Kinetic.Node,"draggable",!1),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"draggable");var t=Kinetic.document.documentElement;t.addEventListener("mouseup",Kinetic.DD._endDragBefore,!0),t.addEventListener("touchend",Kinetic.DD._endDragBefore,!0),t.addEventListener("mouseup",Kinetic.DD._endDragAfter,!1),t.addEventListener("touchend",Kinetic.DD._endDragAfter,!1)}(),function(){Kinetic.Util.addMethods(Kinetic.Container,{__init:function(e){this.children=new Kinetic.Collection,Kinetic.Node.call(this,e)},getChildren:function(e){if(e){var t=new Kinetic.Collection;return this.children.each(function(n){e(n)&&t.push(n)}),t}return this.children},hasChildren:function(){return this.getChildren().length>0},removeChildren:function(){for(var e,t=Kinetic.Collection.toCollection(this.children),n=0;n<t.length;n++)e=t[n],delete e.parent,e.index=0,e.hasChildren()&&e.removeChildren(),e.remove();return t=null,this.children=new Kinetic.Collection,this},destroyChildren:function(){for(var e,t=Kinetic.Collection.toCollection(this.children),n=0;n<t.length;n++)e=t[n],delete e.parent,e.index=0,e.destroy();return t=null,this.children=new Kinetic.Collection,this},add:function(e){if(!(arguments.length>1)){if(e.getParent())return void e.moveTo(this);var t=this.children;return this._validateAdd(e),e.index=t.length,e.parent=this,t.push(e),this._fire("add",{child:e}),this}for(var n=0;n<arguments.length;n++)this.add(arguments[n])},destroy:function(){this.hasChildren()&&this.destroyChildren(),Kinetic.Node.prototype.destroy.call(this)},find:function(e){var t,n,r,i,s,o,u,a=[],f=e.replace(/ /g,"").split(","),l=f.length;for(t=0;l>t;t++)if(r=f[t],"#"===r.charAt(0))s=this._getNodeById(r.slice(1)),s&&a.push(s);else if("."===r.charAt(0))i=this._getNodesByName(r.slice(1)),a=a.concat(i);else for(o=this.getChildren(),u=o.length,n=0;u>n;n++)a=a.concat(o[n]._get(r));return Kinetic.Collection.toCollection(a)},_getNodeById:function(e){var t=Kinetic.ids[e];return void 0!==t&&this.isAncestorOf(t)?t:null},_getNodesByName:function(e){var t=Kinetic.names[e]||[];return this._getDescendants(t)},_get:function(e){for(var t=Kinetic.Node.prototype._get.call(this,e),n=this.getChildren(),r=n.length,i=0;r>i;i++)t=t.concat(n[i]._get(e));return t},toObject:function(){var e=Kinetic.Node.prototype.toObject.call(this);e.children=[];for(var t=this.getChildren(),n=t.length,r=0;n>r;r++){var i=t[r];e.children.push(i.toObject())}return e},_getDescendants:function(e){for(var t=[],n=e.length,r=0;n>r;r++){var i=e[r];this.isAncestorOf(i)&&t.push(i)}return t},isAncestorOf:function(e){for(var t=e.getParent();t;){if(t._id===this._id)return!0;t=t.getParent()}return!1},clone:function(e){var t=Kinetic.Node.prototype.clone.call(this,e);return this.getChildren().each(function(e){t.add(e.clone())}),t},getAllIntersections:function(e){var t=[];return this.find("Shape").each(function(n){n.isVisible()&&n.intersects(e)&&t.push(n)}),t},_setChildrenIndices:function(){this.children.each(function(e,t){e.index=t})},drawScene:function(e,t){var n=this.getLayer(),r=e||n&&n.getCanvas(),i=r&&r.getContext(),s=this._cache.canvas,o=s&&s.scene;return this.isVisible()&&(o?this._drawCachedSceneCanvas(i):this._drawChildren(r,"drawScene",t)),this},drawHit:function(e,t){var n=this.getLayer(),r=e||n&&n.hitCanvas,i=r&&r.getContext(),s=this._cache.canvas,o=s&&s.hit;return this.shouldDrawHit()&&(o?this._drawCachedHitCanvas(i):this._drawChildren(r,"drawHit",t)),this},_drawChildren:function(e,t,n){var r,i,s=this.getLayer(),o=e&&e.getContext(),u=this.getClipWidth(),a=this.getClipHeight(),f=u&&a;f&&s&&(r=this.getClipX(),i=this.getClipY(),o.save(),s._applyTransform(this,o),o.beginPath(),o.rect(r,i,u,a),o.clip(),o.reset()),this.children.each(function(r){r[t](e,n)}),f&&o.restore()}}),Kinetic.Util.extend(Kinetic.Container,Kinetic.Node),Kinetic.Container.prototype.get=Kinetic.Container.prototype.find,Kinetic.Factory.addComponentsGetterSetter(Kinetic.Container,"clip",["x","y","width","height"]),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipX"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipY"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipWidth"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipHeight"),Kinetic.Collection.mapMethods(Kinetic.Container)}(),function(){function e(e){e.fill()}function t(e){e.stroke()}function n(e){e.fill()}function r(e){e.stroke()}function i(){this._clearCache(s)}var s="hasShadow";Kinetic.Util.addMethods(Kinetic.Shape,{__init:function(s){this.nodeType="Shape",this._fillFunc=e,this._strokeFunc=t,this._fillFuncHit=n,this._strokeFuncHit=r;for(var o,u=Kinetic.shapes;;)if(o=Kinetic.Util.getRandomColor(),o&&!(o in u))break;this.colorKey=o,u[o]=this,Kinetic.Node.call(this,s),this.on("shadowColorChange.kinetic shadowBlurChange.kinetic shadowOffsetChange.kinetic shadowOpacityChange.kinetic shadowEnabledChange.kinetic",i)},hasChildren:function(){return!1},getChildren:function(){return[]},getContext:function(){return this.getLayer().getContext()},getCanvas:function(){return this.getLayer().getCanvas()},hasShadow:function(){return this._getCache(s,this._hasShadow)},_hasShadow:function(){return this.getShadowEnabled()&&0!==this.getShadowOpacity()&&!!(this.getShadowColor()||this.getShadowBlur()||this.getShadowOffsetX()||this.getShadowOffsetY())},hasFill:function(){return!!(this.getFill()||this.getFillPatternImage()||this.getFillLinearGradientColorStops()||this.getFillRadialGradientColorStops())},hasStroke:function(){return!!(this.stroke()||this.strokeRed()||this.strokeGreen()||this.strokeBlue())},_get:function(e){return this.className===e||this.nodeType===e?[this]:[]},intersects:function(e){var t,n=this.getStage(),r=n.bufferHitCanvas;return r.getContext().clear(),this.drawScene(r),t=r.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data,t[3]>0},destroy:function(){Kinetic.Node.prototype.destroy.call(this),delete Kinetic.shapes[this.colorKey]},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasFill()&&this.hasStroke()&&this.getStage()},drawScene:function(e,t){var n,r,i,s=this.getLayer(),o=e||s.getCanvas(),u=o.getContext(),a=this._cache.canvas,f=this.sceneFunc(),l=this.hasShadow();return this.isVisible()&&(a?this._drawCachedSceneCanvas(u):f&&(u.save(),this._useBufferCanvas()?(n=this.getStage(),r=n.bufferCanvas,i=r.getContext(),i.clear(),i.save(),i._applyLineJoin(this),s._applyTransform(this,i,t),f.call(this,i),i.restore(),l&&(u.save(),u._applyShadow(this),u.drawImage(r._canvas,0,0),u.restore()),u._applyOpacity(this),u.drawImage(r._canvas,0,0)):(u._applyLineJoin(this),s._applyTransform(this,u,t),l&&(u.save(),u._applyShadow(this),f.call(this,u),u.restore()),u._applyOpacity(this),f.call(this,u)),u.restore())),this},drawHit:function(e,t){var n=this.getLayer(),r=e||n.hitCanvas,i=r.getContext(),s=this.hitFunc()||this.sceneFunc(),o=this._cache.canvas,u=o&&o.hit;return this.shouldDrawHit()&&(u?this._drawCachedHitCanvas(i):s&&(i.save(),i._applyLineJoin(this),n._applyTransform(this,i,t),s.call(this,i),i.restore())),this},drawHitFromCache:function(e){var t,n,r,i,s,o,u,a,f=e||0,l=this._cache.canvas,c=this._getCachedSceneCanvas(),h=c.getContext(),p=l.hit,d=p.getContext(),v=c.getWidth(),m=c.getHeight();d.clear();try{for(t=h.getImageData(0,0,v,m),n=t.data,r=d.getImageData(0,0,v,m),i=r.data,s=n.length,o=Kinetic.Util._hexToRgb(this.colorKey),u=0;s>u;u+=4)a=n[u+3],a>f&&(i[u]=o.r,i[u+1]=o.g,i[u+2]=o.b,i[u+3]=255);d.putImageData(r,0,0)}catch(g){Kinetic.Util.warn("Unable to draw hit graph from cached scene canvas. "+g.message)}return this}}),Kinetic.Util.extend(Kinetic.Shape,Kinetic.Node),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"stroke"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeWidth",2),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineJoin"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineCap"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"sceneFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"hitFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dash"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowColor"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlur"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOpacity"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"shadowOffset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternImage"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fill"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRepeat","repeat"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dashEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeScaleEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPriority","color"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternOffset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternScale",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleX",1),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleY",1),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillLinearGradientStartPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillLinearGradientEndPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillRadialGradientStartPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillRadialGradientEndPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRotation",0),Kinetic.Factory.backCompat(Kinetic.Shape,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"}),Kinetic.Collection.mapMethods(Kinetic.Shape)}(),function(){function e(e,t){e.content.addEventListener(t,function(n){e[P+t](n)},!1)}var t="Stage",n="string",r="px",i="mouseout",s="mouseleave",o="mouseover",u="mouseenter",a="mousemove",f="mousedown",l="mouseup",c="click",h="dblclick",p="touchstart",d="touchend",v="tap",m="dbltap",g="touchmove",y="contentMouseout",b="contentMouseover",w="contentMousemove",E="contentMousedown",S="contentMouseup",x="contentClick",T="contentDblclick",N="contentTouchstart",C="contentTouchend",k="contentDbltap",L="contentTouchmove",A="div",O="relative",M="inline-block",_="kineticjs-content",D=" ",P="_",H="container",B="",j=[f,a,l,i,p,g,d,o],F=j.length;Kinetic.Util.addMethods(Kinetic.Stage,{___init:function(e){this.nodeType=t,Kinetic.Container.call(this,e),this._id=Kinetic.idCounter++,this._buildDOM(),this._bindContentEvents(),this._enableNestedTransforms=!1,Kinetic.stages.push(this)},_validateAdd:function(e){"Layer"!==e.getType()&&Kinetic.Util.error("You may only add layers to the stage.")},setContainer:function(e){if(typeof e===n){var t=e;if(e=Kinetic.document.getElementById(e),!e)throw"Can not find container in document with id "+t}return this._setAttr(H,e),this},shouldDrawHit:function(){return!0},draw:function(){return Kinetic.Node.prototype.draw.call(this),this},setHeight:function(e){return Kinetic.Node.prototype.setHeight.call(this,e),this._resizeDOM(),this},setWidth:function(e){return Kinetic.Node.prototype.setWidth.call(this,e),this._resizeDOM(),this},clear:function(){var e,t=this.children,n=t.length;for(e=0;n>e;e++)t[e].clear();return this},clone:function(e){return e||(e={}),e.container=Kinetic.document.createElement(A),Kinetic.Container.prototype.clone.call(this,e)},destroy:function(){var e=this.content;Kinetic.Container.prototype.destroy.call(this),e&&Kinetic.Util._isInDocument(e)&&this.getContainer().removeChild(e);var t=Kinetic.stages.indexOf(this);t>-1&&Kinetic.stages.splice(t,1)},getPointerPosition:function(){return this.pointerPos},getStage:function(){return this},getContent:function(){return this.content},toDataURL:function(e){function t(i){var s=a[i],f=s.toDataURL(),l=new Kinetic.window.Image;l.onload=function(){u.drawImage(l,0,0),i<a.length-1?t(i+1):e.callback(o.toDataURL(n,r))},l.src=f}e=e||{};var n=e.mimeType||null,r=e.quality||null,i=e.x||0,s=e.y||0,o=new Kinetic.SceneCanvas({width:e.width||this.getWidth(),height:e.height||this.getHeight(),pixelRatio:1}),u=o.getContext()._context,a=this.children;(i||s)&&u.translate(-1*i,-1*s),t(0)},toImage:function(e){var t=e.callback;e.callback=function(e){Kinetic.Util._getImage(e,function(e){t(e)})},this.toDataURL(e)},getIntersection:function(e){var t,n,r=this.getChildren(),i=r.length,s=i-1;for(t=s;t>=0;t--)if(n=r[t].getIntersection(e))return n;return null},_resizeDOM:function(){if(this.content){var e,t,n=this.getWidth(),i=this.getHeight(),s=this.getChildren(),o=s.length;for(this.content.style.width=n+r,this.content.style.height=i+r,this.bufferCanvas.setSize(n,i),this.bufferHitCanvas.setSize(n,i),e=0;o>e;e++)t=s[e],t.getCanvas().setSize(n,i),t.hitCanvas.setSize(n,i),t.draw()}},add:function(e){if(!(arguments.length>1))return Kinetic.Container.prototype.add.call(this,e),e._setCanvasSize(this.width(),this.height()),e.draw(),this.content.appendChild(e.canvas._canvas),this;for(var t=0;t<arguments.length;t++)this.add(arguments[t])},getParent:function(){return null},getLayer:function(){return null},getLayers:function(){return this.getChildren()},_bindContentEvents:function(){for(var t=0;F>t;t++)e(this,j[t])},_mouseover:function(e){Kinetic.UA.mobile||(this._setPointerPosition(e),this._fire(b,{evt:e}))},_mouseout:function(e){if(!Kinetic.UA.mobile){this._setPointerPosition(e);var t=this.targetShape;t&&!Kinetic.isDragging()&&(t._fireAndBubble(i,{evt:e}),t._fireAndBubble(s,{evt:e}),this.targetShape=null),this.pointerPos=void 0,this._fire(y,{evt:e})}},_mousemove:function(e){if(!Kinetic.UA.mobile){this._setPointerPosition(e);var t=Kinetic.DD,n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?Kinetic.isDragging()||this.targetShape&&this.targetShape._id===n._id?n._fireAndBubble(a,{evt:e}):(this.targetShape&&(this.targetShape._fireAndBubble(i,{evt:e},n),this.targetShape._fireAndBubble(s,{evt:e},n)),n._fireAndBubble(o,{evt:e},this.targetShape),n._fireAndBubble(u,{evt:e},this.targetShape),this.targetShape=n):this.targetShape&&!Kinetic.isDragging()&&(this.targetShape._fireAndBubble(i,{evt:e}),this.targetShape._fireAndBubble(s,{evt:e}),this.targetShape=null),this._fire(w,{evt:e}),t&&t._drag(e)}e.preventDefault&&e.preventDefault()},_mousedown:function(e){if(!Kinetic.UA.mobile){this._setPointerPosition(e);var t=this.getIntersection(this.getPointerPosition());Kinetic.listenClickTap=!0,t&&t.isListening()&&(this.clickStartShape=t,t._fireAndBubble(f,{evt:e})),this._fire(E,{evt:e})}e.preventDefault&&e.preventDefault()},_mouseup:function(e){if(!Kinetic.UA.mobile){this._setPointerPosition(e);var t=this.getIntersection(this.getPointerPosition()),n=this.clickStartShape,r=!1;Kinetic.inDblClickWindow?(r=!0,Kinetic.inDblClickWindow=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow),t&&t.isListening()&&(t._fireAndBubble(l,{evt:e}),Kinetic.listenClickTap&&n&&n._id===t._id&&(t._fireAndBubble(c,{evt:e}),r&&t._fireAndBubble(h,{evt:e}))),this._fire(S,{evt:e}),Kinetic.listenClickTap&&(this._fire(x,{evt:e}),r&&this._fire(T,{evt:e})),Kinetic.listenClickTap=!1}e.preventDefault&&e.preventDefault()},_touchstart:function(e){this._setPointerPosition(e);var t=this.getIntersection(this.getPointerPosition());Kinetic.listenClickTap=!0,t&&t.isListening()&&(this.tapStartShape=t,t._fireAndBubble(p,{evt:e}),t.isListening()&&e.preventDefault&&e.preventDefault()),this._fire(N,{evt:e})},_touchend:function(e){this._setPointerPosition(e);var t=this.getIntersection(this.getPointerPosition()),n=!1;Kinetic.inDblClickWindow?(n=!0,Kinetic.inDblClickWindow=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow),t&&t.isListening()&&(t._fireAndBubble(d,{evt:e}),Kinetic.listenClickTap&&t._id===this.tapStartShape._id&&(t._fireAndBubble(v,{evt:e}),n&&t._fireAndBubble(m,{evt:e})),t.isListening()&&e.preventDefault&&e.preventDefault()),Kinetic.listenClickTap&&(this._fire(C,{evt:e}),n&&this._fire(k,{evt:e})),Kinetic.listenClickTap=!1},_touchmove:function(e){this._setPointerPosition(e);var t=Kinetic.DD,n=this.getIntersection(this.getPointerPosition());n&&n.isListening()&&(n._fireAndBubble(g,{evt:e}),n.isListening()&&e.preventDefault&&e.preventDefault()),this._fire(L,{evt:e}),t&&t._drag(e)},_setPointerPosition:function(e){var t,n=this._getContentPosition(),r=e.offsetX,i=e.clientX,s=null,o=null;e=e?e:window.event,void 0!==e.touches?e.touches.length>0&&(t=e.touches[0],s=t.clientX-n.left,o=t.clientY-n.top):void 0!==r?(s=r,o=e.offsetY):"mozilla"===Kinetic.UA.browser?(s=e.layerX,o=e.layerY):void 0!==i&&n&&(s=i-n.left,o=e.clientY-n.top),null!==s&&null!==o&&(this.pointerPos={x:s,y:o})},_getContentPosition:function(){var e=this.content.getBoundingClientRect?this.content.getBoundingClientRect():{top:0,left:0};return{top:e.top,left:e.left}},_buildDOM:function(){var e=this.getContainer();if(!e){if(Kinetic.Util.isBrowser())throw"Stage has not container. But container is required";e=Kinetic.document.createElement(A)}e.innerHTML=B,this.content=Kinetic.document.createElement(A),this.content.style.position=O,this.content.style.display=M,this.content.className=_,this.content.setAttribute("role","presentation"),e.appendChild(this.content),this.bufferCanvas=new Kinetic.SceneCanvas({pixelRatio:1}),this.bufferHitCanvas=new Kinetic.HitCanvas,this._resizeDOM()},_onContent:function(e,t){var n,r,i=e.split(D),s=i.length;for(n=0;s>n;n++)r=i[n],this.content.addEventListener(r,t,!1)},cache:function(){Kinetic.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes.")},clearCache:function(){}}),Kinetic.Util.extend(Kinetic.Stage,Kinetic.Container),Kinetic.Factory.addGetter(Kinetic.Stage,"container"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Stage,"container")}(),function(){Kinetic.Util.addMethods(Kinetic.BaseLayer,{___init:function(e){this.nodeType="Layer",Kinetic.Container.call(this,e)},createPNGStream:function(){return this.canvas._canvas.createPNGStream()},getCanvas:function(){return this.canvas},getHitCanvas:function(){return this.hitCanvas},getContext:function(){return this.getCanvas().getContext()},clear:function(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this},setZIndex:function(e){Kinetic.Node.prototype.setZIndex.call(this,e);var t=this.getStage();return t&&(t.content.removeChild(this.getCanvas()._canvas),e<t.getChildren().length-1?t.content.insertBefore(this.getCanvas()._canvas,t.getChildren()[e+1].getCanvas()._canvas):t.content.appendChild(this.getCanvas()._canvas)),this},moveToTop:function(){Kinetic.Node.prototype.moveToTop.call(this);var e=this.getStage();e&&(e.content.removeChild(this.getCanvas()._canvas),e.content.appendChild(this.getCanvas()._canvas))},moveUp:function(){if(Kinetic.Node.prototype.moveUp.call(this)){var e=this.getStage();e&&(e.content.removeChild(this.getCanvas()._canvas),this.index<e.getChildren().length-1?e.content.insertBefore(this.getCanvas()._canvas,e.getChildren()[this.index+1].getCanvas()._canvas):e.content.appendChild(this.getCanvas()._canvas))}},moveDown:function(){if(Kinetic.Node.prototype.moveDown.call(this)){var e=this.getStage();if(e){var t=e.getChildren();e.content.removeChild(this.getCanvas()._canvas),e.content.insertBefore(this.getCanvas()._canvas,t[this.index+1].getCanvas()._canvas)}}},moveToBottom:function(){if(Kinetic.Node.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var t=e.getChildren();e.content.removeChild(this.getCanvas()._canvas),e.content.insertBefore(this.getCanvas()._canvas,t[1].getCanvas()._canvas)}}},getLayer:function(){return this},remove:function(){var e=this.getCanvas()._canvas;return Kinetic.Node.prototype.remove.call(this),e&&e.parentNode&&Kinetic.Util._isInDocument(e)&&e.parentNode.removeChild(e),this},getStage:function(){return this.parent}}),Kinetic.Util.extend(Kinetic.BaseLayer,Kinetic.Container),Kinetic.Factory.addGetterSetter(Kinetic.BaseLayer,"clearBeforeDraw",!0),Kinetic.Collection.mapMethods(Kinetic.BaseLayer)}(),function(){var e="#",t="beforeDraw",n="draw",r=[{x:0,y:0},{x:-1,y:0},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1}],i=r.length;Kinetic.Util.addMethods(Kinetic.Layer,{____init:function(e){this.nodeType="Layer",this.canvas=new Kinetic.SceneCanvas,this.hitCanvas=new Kinetic.HitCanvas,Kinetic.BaseLayer.call(this,e)},_setCanvasSize:function(e,t){this.canvas.setSize(e,t),this.hitCanvas.setSize(e,t)},_validateAdd:function(e){var t=e.getType();"Group"!==t&&"Shape"!==t&&Kinetic.Util.error("You may only add groups and shapes to a layer.")},getIntersection:function(e){var t,n,s,o;if(!this.hitGraphEnabled()||!this.isVisible())return null;for(n=0;i>n;n++){if(s=r[n],t=this._getIntersection({x:e.x+s.x,y:e.y+s.y}),o=t.shape)return o;if(!t.antialiased)return null}},_getIntersection:function(t){var n,r,i=this.hitCanvas.context._context.getImageData(t.x,t.y,1,1).data,s=i[3];return 255===s?(n=Kinetic.Util._rgbToHex(i[0],i[1],i[2]),r=Kinetic.shapes[e+n],{shape:r}):s>0?{antialiased:!0}:{}},drawScene:function(e,r){var i=this.getLayer(),s=e||i&&i.getCanvas();return this._fire(t,{node:this}),this.getClearBeforeDraw()&&s.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,s,r),this._fire(n,{node:this}),this},_applyTransform:function(e,t,n){var r=e.getAbsoluteTransform(n).getMatrix();t.transform(r[0],r[1],r[2],r[3],r[4],r[5])},drawHit:function(e,t){var n=this.getLayer(),r=e||n&&n.hitCanvas;return n&&n.getClearBeforeDraw()&&n.getHitCanvas().getContext().clear(),Kinetic.Container.prototype.drawHit.call(this,r,t),this},clear:function(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this},setVisible:function(e){return Kinetic.Node.prototype.setVisible.call(this,e),e?(this.getCanvas()._canvas.style.display="block",this.hitCanvas._canvas.style.display="block"):(this.getCanvas()._canvas.style.display="none",this.hitCanvas._canvas.style.display="none"),this},enableHitGraph:function(){return this.setHitGraphEnabled(!0),this},disableHitGraph:function(){return this.setHitGraphEnabled(!1),this}}),Kinetic.Util.extend(Kinetic.Layer,Kinetic.BaseLayer),Kinetic.Factory.addGetterSetter(Kinetic.Layer,"hitGraphEnabled",!0),Kinetic.Collection.mapMethods(Kinetic.Layer)}(),function(){Kinetic.Util.addMethods(Kinetic.FastLayer,{____init:function(e){this.nodeType="Layer",this.canvas=new Kinetic.SceneCanvas,Kinetic.BaseLayer.call(this,e)},_validateAdd:function(e){var t=e.getType();"Shape"!==t&&Kinetic.Util.error("You may only add shapes to a fast layer.")},_setCanvasSize:function(e,t){this.canvas.setSize(e,t)},hitGraphEnabled:function(){return!1},getIntersection:function(){return null},drawScene:function(e){var t=this.getLayer(),n=e||t&&t.getCanvas();return this.getClearBeforeDraw()&&n.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,n),this},_applyTransform:function(e,t,n){if(!n||n._id!==this._id){var r=e.getTransform().getMatrix();t.transform(r[0],r[1],r[2],r[3],r[4],r[5])}},draw:function(){return this.drawScene(),this},clear:function(e){return this.getContext().clear(e),this},setVisible:function(e){return Kinetic.Node.prototype.setVisible.call(this,e),this.getCanvas()._canvas.style.display=e?"block":"none",this}}),Kinetic.Util.extend(Kinetic.FastLayer,Kinetic.BaseLayer),Kinetic.Collection.mapMethods(Kinetic.FastLayer)}(),function(){Kinetic.Util.addMethods(Kinetic.Group,{___init:function(e){this.nodeType="Group",Kinetic.Container.call(this,e)},_validateAdd:function(e){var t=e.getType();"Group"!==t&&"Shape"!==t&&Kinetic.Util.error("You may only add groups and shapes to groups.")}}),Kinetic.Util.extend(Kinetic.Group,Kinetic.Container),Kinetic.Collection.mapMethods(Kinetic.Group)}(),function(){Kinetic.Rect=function(e){this.___init(e)},Kinetic.Rect.prototype={___init:function(e){Kinetic.Shape.call(this,e),this.className="Rect",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){var t=this.getCornerRadius(),n=this.getWidth(),r=this.getHeight();e.beginPath(),t?(e.moveTo(t,0),e.lineTo(n-t,0),e.arc(n-t,t,t,3*Math.PI/2,0,!1),e.lineTo(n,r-t),e.arc(n-t,r-t,t,0,Math.PI/2,!1),e.lineTo(t,r),e.arc(t,r-t,t,Math.PI/2,Math.PI,!1),e.lineTo(0,t),e.arc(t,t,t,Math.PI,3*Math.PI/2,!1)):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Rect,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Rect,"cornerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Rect)}(),function(){var e=2*Math.PI-1e-4,t="Circle";Kinetic.Circle=function(e){this.___init(e)},Kinetic.Circle.prototype={___init:function(e){Kinetic.Shape.call(this,e),this.className=t,this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){t.beginPath(),t.arc(0,0,this.getRadius(),0,e,!1),t.closePath(),t.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadius()},getHeight:function(){return 2*this.getRadius()},setWidth:function(e){Kinetic.Node.prototype.setWidth.call(this,e),this.setRadius(e/2)},setHeight:function(e){Kinetic.Node.prototype.setHeight.call(this,e),this.setRadius(e/2)}},Kinetic.Util.extend(Kinetic.Circle,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Circle,"radius",0),Kinetic.Collection.mapMethods(Kinetic.Circle)}(),function(){var e=2*Math.PI-1e-4,t="Ellipse";Kinetic.Ellipse=function(e){this.___init(e)},Kinetic.Ellipse.prototype={___init:function(e){Kinetic.Shape.call(this,e),this.className=t,this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var n=this.getRadius(),r=n.x,i=n.y;t.beginPath(),t.save(),r!==i&&t.scale(1,i/r),t.arc(0,0,r,0,e,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadius().x},getHeight:function(){return 2*this.getRadius().y},setWidth:function(e){Kinetic.Node.prototype.setWidth.call(this,e),this.setRadius({x:e/2})},setHeight:function(e){Kinetic.Node.prototype.setHeight.call(this,e),this.setRadius({y:e/2})}},Kinetic.Util.extend(Kinetic.Ellipse,Kinetic.Shape),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Ellipse,"radius",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,"radiusX",0),Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,"radiusY",0),Kinetic.Collection.mapMethods(Kinetic.Ellipse)}(),function(){var e=2*Math.PI-1e-4;Kinetic.Ring=function(e){this.___init(e)},Kinetic.Ring.prototype={___init:function(e){Kinetic.Shape.call(this,e),this.className="Ring",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){t.beginPath(),t.arc(0,0,this.getInnerRadius(),0,e,!1),t.moveTo(this.getOuterRadius(),0),t.arc(0,0,this.getOuterRadius(),e,0,!0),t.closePath(),t.fillStrokeShape(this)},getWidth:function(){return 2*this.getOuterRadius()},getHeight:function(){return 2*this.getOuterRadius()},setWidth:function(e){Kinetic.Node.prototype.setWidth.call(this,e),this.setOuterRadius(e/2)},setHeight:function(e){Kinetic.Node.prototype.setHeight.call(this,e),this.setOuterRadius(e/2)}},Kinetic.Util.extend(Kinetic.Ring,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Ring,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Ring,"outerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Ring)}(),function(){Kinetic.Wedge=function(e){this.___init(e)},Kinetic.Wedge.prototype={___init:function(e){Kinetic.Shape.call(this,e),this.className="Wedge",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){e.beginPath(),e.arc(0,0,this.getRadius(),0,Kinetic.getAngle(this.getAngle()),this.getClockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Wedge,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"radius",0),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"angle",0),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"clockwise",!1),Kinetic.Factory.backCompat(Kinetic.Wedge,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Kinetic.Collection.mapMethods(Kinetic.Wedge)}(),function(){Math.PI/180,Kinetic.Arc=function(e){this.___init(e)},Kinetic.Arc.prototype={___init:function(e){Kinetic.Shape.call(this,e),this.className="Arc",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){var t=Kinetic.getAngle(this.angle()),n=this.clockwise();e.beginPath(),e.arc(0,0,this.getOuterRadius(),0,t,n),e.arc(0,0,this.getInnerRadius(),t,0,!n),e.closePath(),e.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Arc,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"outerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"angle",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"clockwise",!1),Kinetic.Collection.mapMethods(Kinetic.Arc)}(),function(){var e="Image";Kinetic.Image=function(e){this.___init(e)},Kinetic.Image.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className=e,this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},_sceneFunc:function(e){var t,n,r,i,s=this.getWidth(),o=this.getHeight(),u=this.getImage();u&&(t=this.getCrop(),n=t.width,r=t.height,i=n&&r?[u,t.x,t.y,n,r,0,0,s,o]:[u,0,0,s,o]),e.beginPath(),e.rect(0,0,s,o),e.closePath(),e.fillStrokeShape(this),u&&e.drawImage.apply(e,i)},_hitFunc:function(e){var t=this.getWidth(),n=this.getHeight();e.beginPath(),e.rect(0,0,t,n),e.closePath(),e.fillStrokeShape(this)},getWidth:function(){var e=this.getImage();return this.attrs.width||(e?e.width:0)},getHeight:function(){var e=this.getImage();return this.attrs.height||(e?e.height:0)}},Kinetic.Util.extend(Kinetic.Image,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Image,"image"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Image,"crop",["x","y","width","height"]),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropX",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropY",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropWidth",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropHeight",0),Kinetic.Collection.mapMethods(Kinetic.Image)}(),function(){function e(e){e.fillText(this.partialText,0,0)}function t(e){e.strokeText(this.partialText,0,0)}var n="auto",r="center",i="Change.kinetic",s="2d",o="-",u="",a="left",f="text",l="Text",c="middle",h="normal",p="px ",d=" ",v="right",m="word",g="char",y="none",b=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","lineHeight","text","width","height","wrap"],w=b.length,E=Kinetic.Util.createCanvasElement().getContext(s);Kinetic.Text=function(e){this.___init(e)},Kinetic.Text.prototype={___init:function(r){var s=this;void 0===r.width&&(r.width=n),void 0===r.height&&(r.height=n),Kinetic.Shape.call(this,r),this._fillFunc=e,this._strokeFunc=t,this.className=l;for(var o=0;w>o;o++)this.on(b[o]+i,s._setTextData);this._setTextData(),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_sceneFunc:function(e){var t,n=this.getPadding(),i=this.getTextHeight(),s=this.getLineHeight()*i,o=this.textArr,u=o.length,f=this.getWidth();for(e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",c),e.setAttr("textAlign",a),e.save(),e.translate(n,0),e.translate(0,n+i/2),t=0;u>t;t++){var l=o[t],h=l.text,p=l.width;e.save(),this.getAlign()===v?e.translate(f-p-2*n,0):this.getAlign()===r&&e.translate((f-p-2*n)/2,0),this.partialText=h,e.fillStrokeShape(this),e.restore(),e.translate(0,s)}e.restore()},_hitFunc:function(e){var t=this.getWidth(),n=this.getHeight();e.beginPath(),e.rect(0,0,t,n),e.closePath(),e.fillStrokeShape(this)},setText:function(e){var t=Kinetic.Util._isString(e)?e:e.toString();return this._setAttr(f,t),this},getWidth:function(){return this.attrs.width===n?this.getTextWidth()+2*this.getPadding():this.attrs.width},getHeight:function(){return this.attrs.height===n?this.getTextHeight()*this.textArr.length*this.getLineHeight()+2*this.getPadding():this.attrs.height},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},_getTextSize:function(e){var t,n=E,r=this.getFontSize();return n.save(),n.font=this._getContextFont(),t=n.measureText(e),n.restore(),{width:t.width,height:parseInt(r,10)}},_getContextFont:function(){return this.getFontStyle()+d+this.getFontVariant()+d+this.getFontSize()+p+this.getFontFamily()},_addTextLine:function(e,t){return this.textArr.push({text:e,width:t})},_getTextWidth:function(e){return E.measureText(e).width},_setTextData:function(){var e=this.getText().split("\n"),t=+this.getFontSize(),r=0,i=this.getLineHeight()*t,s=this.attrs.width,u=this.attrs.height,a=s!==n,f=u!==n,l=this.getPadding(),c=s-2*l,h=u-2*l,p=0,v=this.getWrap(),m=v!==y,b=v!==g&&m;this.textArr=[],E.save(),E.font=this._getContextFont();for(var w=0,S=e.length;S>w;++w){var x=e[w],T=this._getTextWidth(x);if(a&&T>c)for(;x.length>0;){for(var N=0,C=x.length,k="",L=0;C>N;){var A=N+C>>>1,O=x.slice(0,A+1),M=this._getTextWidth(O);c>=M?(N=A+1,k=O,L=M):C=A}if(!k)break;if(b){var _=Math.max(k.lastIndexOf(d),k.lastIndexOf(o))+1;_>0&&(N=_,k=k.slice(0,N),L=this._getTextWidth(k))}if(this._addTextLine(k,L),r=Math.max(r,L),p+=i,!m||f&&p+i>h)break;if(x=x.slice(N),x.length>0&&(T=this._getTextWidth(x),c>=T)){this._addTextLine(x,T),p+=i,r=Math.max(r,T);break}}else this._addTextLine(x,T),p+=i,r=Math.max(r,T);if(f&&p+i>h)break}E.restore(),this.textHeight=t,this.textWidth=r}},Kinetic.Util.extend(Kinetic.Text,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontFamily","Arial"),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontSize",12),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontStyle",h),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontVariant",h),Kinetic.Factory.addGetterSetter(Kinetic.Text,"padding",0),Kinetic.Factory.addGetterSetter(Kinetic.Text,"align",a),Kinetic.Factory.addGetterSetter(Kinetic.Text,"lineHeight",1),Kinetic.Factory.addGetterSetter(Kinetic.Text,"wrap",m),Kinetic.Factory.addGetter(Kinetic.Text,"text",u),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Text,"text"),Kinetic.Collection.mapMethods(Kinetic.Text)}(),function(){Kinetic.Line=function(e){this.___init(e)},Kinetic.Line.prototype={___init:function(e){Kinetic.Shape.call(this,e),this.className="Line",this.on("pointsChange.kinetic tensionChange.kinetic closedChange.kinetic",function(){this._clearCache("tensionPoints")}),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){var t,n,r,i=this.getPoints(),s=i.length,o=this.getTension(),u=this.getClosed();if(e.beginPath(),e.moveTo(i[0],i[1]),0!==o&&s>4){for(t=this.getTensionPoints(),n=t.length,r=u?0:4,u||e.quadraticCurveTo(t[0],t[1],t[2],t[3]);n-2>r;)e.bezierCurveTo(t[r++],t[r++],t[r++],t[r++],t[r++],t[r++]);u||e.quadraticCurveTo(t[n-2],t[n-1],i[s-2],i[s-1])}else for(r=2;s>r;r+=2)e.lineTo(i[r],i[r+1]);u?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)},getTensionPoints:function(){return this._getCache("tensionPoints",this._getTensionPoints)},_getTensionPoints:function(){return this.getClosed()?this._getTensionPointsClosed():Kinetic.Util._expandPoints(this.getPoints(),this.getTension())},_getTensionPointsClosed:function(){var e=this.getPoints(),t=e.length,n=this.getTension(),r=Kinetic.Util,i=r._getControlPoints(e[t-2],e[t-1],e[0],e[1],e[2],e[3],n),s=r._getControlPoints(e[t-4],e[t-3],e[t-2],e[t-1],e[0],e[1],n),o=Kinetic.Util._expandPoints(e,n),u=[i[2],i[3]].concat(o).concat([s[0],s[1],e[t-2],e[t-1],s[2],s[3],i[0],i[1],e[0],e[1]]);return u}},Kinetic.Util.extend(Kinetic.Line,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Line,"closed",!1),Kinetic.Factory.addGetterSetter(Kinetic.Line,"tension",0),Kinetic.Factory.addGetterSetter(Kinetic.Line,"points"),Kinetic.Collection.mapMethods(Kinetic.Line)}(),function(){Kinetic.Sprite=function(e){this.___init(e)},Kinetic.Sprite.prototype={___init:function(e){Kinetic.Shape.call(this,e),this.className="Sprite",this.anim=new Kinetic.Animation,this.on("animationChange.kinetic",function(){this.frameIndex(0)}),this.on("frameRateChange.kinetic",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())}),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_sceneFunc:function(e){var t=this.getAnimation(),n=this.frameIndex(),r=4*n,i=this.getAnimations()[t],s=i[r+0],o=i[r+1],u=i[r+2],a=i[r+3],f=this.getImage();f&&e.drawImage(f,s,o,u,a,0,0,u,a)},_hitFunc:function(e){var t=this.getAnimation(),n=this.frameIndex(),r=4*n,i=this.getAnimations()[t],s=i[r+2],o=i[r+3];e.beginPath(),e.rect(0,0,s,o),e.closePath(),e.fillShape(this)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},_setInterval:function(){var e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.getFrameRate())},start:function(){var e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()},stop:function(){this.anim.stop(),clearInterval(this.interval)},isRunning:function(){return this.anim.isRunning()},_updateIndex:function(){var e=this.frameIndex(),t=this.getAnimation(),n=this.getAnimations(),r=n[t],i=r.length/4;this.frameIndex(i-1>e?e+1:0)}},Kinetic.Util.extend(Kinetic.Sprite,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animation"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animations"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"image"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameIndex",0),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameRate",17),Kinetic.Factory.backCompat(Kinetic.Sprite,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Kinetic.Collection.mapMethods(Kinetic.Sprite)}(),function(){Kinetic.Path=function(e){this.___init(e)},Kinetic.Path.prototype={___init:function(e){this.dataArray=[];var t=this;Kinetic.Shape.call(this,e),this.className="Path",this.dataArray=Kinetic.Path.parsePathData(this.getData()),this.on("dataChange.kinetic",function(){t.dataArray=Kinetic.Path.parsePathData(this.getData())}),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){var t=this.dataArray,n=!1;e.beginPath();for(var r=0;r<t.length;r++){var i=t[r].command,s=t[r].points;switch(i){case"L":e.lineTo(s[0],s[1]);break;case"M":e.moveTo(s[0],s[1]);break;case"C":e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case"Q":e.quadraticCurveTo(s[0],s[1],s[2],s[3]);break;case"A":var o=s[0],u=s[1],a=s[2],f=s[3],l=s[4],c=s[5],h=s[6],p=s[7],d=a>f?a:f,v=a>f?1:a/f,m=a>f?f/a:1;e.translate(o,u),e.rotate(h),e.scale(v,m),e.arc(0,0,d,l,l+c,1-p),e.scale(1/v,1/m),e.rotate(-h),e.translate(-o,-u);break;case"z":e.closePath(),n=!0}}n?e.fillStrokeShape(this):e.strokeShape(this)}},Kinetic.Util.extend(Kinetic.Path,Kinetic.Shape),Kinetic.Path.getLineLength=function(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))},Kinetic.Path.getPointOnLine=function(e,t,n,r,i,s,o){void 0===s&&(s=t),void 0===o&&(o=n);var u=(i-n)/(r-t+1e-8),a=Math.sqrt(e*e/(1+u*u));t>r&&(a*=-1);var f,l=u*a;if(r===t)f={x:s,y:o+l};else if((o-n)/(s-t+1e-8)===u)f={x:s+a,y:o+l};else{var c,h,p=this.getLineLength(t,n,r,i);if(1e-8>p)return void 0;var d=(s-t)*(r-t)+(o-n)*(i-n);d/=p*p,c=t+d*(r-t),h=n+d*(i-n);var v=this.getLineLength(s,o,c,h),m=Math.sqrt(e*e-v*v);a=Math.sqrt(m*m/(1+u*u)),t>r&&(a*=-1),l=u*a,f={x:c+a,y:h+l}}return f},Kinetic.Path.getPointOnCubicBezier=function(e,t,n,r,i,s,o,u,a){function f(e){return e*e*e}function l(e){return 3*e*e*(1-e)}function c(e){return 3*e*(1-e)*(1-e)}function h(e){return(1-e)*(1-e)*(1-e)}var p=u*f(e)+s*l(e)+r*c(e)+t*h(e),d=a*f(e)+o*l(e)+i*c(e)+n*h(e);return{x:p,y:d}},Kinetic.Path.getPointOnQuadraticBezier=function(e,t,n,r,i,s,o){function u(e){return e*e}function a(e){return 2*e*(1-e)}function f(e){return(1-e)*(1-e)}var l=s*u(e)+r*a(e)+t*f(e),c=o*u(e)+i*a(e)+n*f(e);return{x:l,y:c}},Kinetic.Path.getPointOnEllipticalArc=function(e,t,n,r,i,s){var o=Math.cos(s),u=Math.sin(s),a={x:n*Math.cos(i),y:r*Math.sin(i)};return{x:e+(a.x*o-a.y*u),y:t+(a.x*u+a.y*o)}},Kinetic.Path.parsePathData=function(e){if(!e)return[];var t=e,n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];t=t.replace(new RegExp(" ","g"),",");for(var r=0;r<n.length;r++)t=t.replace(new RegExp(n[r],"g"),"|"+n[r]);var i=t.split("|"),s=[],o=0,u=0;for(r=1;r<i.length;r++){var a=i[r],f=a.charAt(0);a=a.slice(1),a=a.replace(new RegExp(",-","g"),"-"),a=a.replace(new RegExp("-","g"),",-"),a=a.replace(new RegExp("e,-","g"),"e-");var l=a.split(",");l.length>0&&""===l[0]&&l.shift();for(var c=0;c<l.length;c++)l[c]=parseFloat(l[c]);for(;l.length>0&&!isNaN(l[0]);){var h,p,d,v,m,g,y,b,w,E,S=null,x=[],T=o,N=u;switch(f){case"l":o+=l.shift(),u+=l.shift(),S="L",x.push(o,u);break;case"L":o=l.shift(),u=l.shift(),x.push(o,u);break;case"m":var C=l.shift(),k=l.shift();if(o+=C,u+=k,S="M",s.length>2&&"z"===s[s.length-1].command)for(var L=s.length-2;L>=0;L--)if("M"===s[L].command){o=s[L].points[0]+C,u=s[L].points[1]+k;break}x.push(o,u),f="l";break;case"M":o=l.shift(),u=l.shift(),S="M",x.push(o,u),f="L";break;case"h":o+=l.shift(),S="L",x.push(o,u);break;case"H":o=l.shift(),S="L",x.push(o,u);break;case"v":u+=l.shift(),S="L",x.push(o,u);break;case"V":u=l.shift(),S="L",x.push(o,u);break;case"C":x.push(l.shift(),l.shift(),l.shift(),l.shift()),o=l.shift(),u=l.shift(),x.push(o,u);break;case"c":x.push(o+l.shift(),u+l.shift(),o+l.shift(),u+l.shift()),o+=l.shift(),u+=l.shift(),S="C",x.push(o,u);break;case"S":p=o,d=u,h=s[s.length-1],"C"===h.command&&(p=o+(o-h.points[2]),d=u+(u-h.points[3])),x.push(p,d,l.shift(),l.shift()),o=l.shift(),u=l.shift(),S="C",x.push(o,u);break;case"s":p=o,d=u,h=s[s.length-1],"C"===h.command&&(p=o+(o-h.points[2]),d=u+(u-h.points[3])),x.push(p,d,o+l.shift(),u+l.shift()),o+=l.shift(),u+=l.shift(),S="C",x.push(o,u);break;case"Q":x.push(l.shift(),l.shift()),o=l.shift(),u=l.shift(),x.push(o,u);break;case"q":x.push(o+l.shift(),u+l.shift()),o+=l.shift(),u+=l.shift(),S="Q",x.push(o,u);break;case"T":p=o,d=u,h=s[s.length-1],"Q"===h.command&&(p=o+(o-h.points[0]),d=u+(u-h.points[1])),o=l.shift(),u=l.shift(),S="Q",x.push(p,d,o,u);break;case"t":p=o,d=u,h=s[s.length-1],"Q"===h.command&&(p=o+(o-h.points[0]),d=u+(u-h.points[1])),o+=l.shift(),u+=l.shift(),S="Q",x.push(p,d,o,u);break;case"A":v=l.shift(),m=l.shift(),g=l.shift(),y=l.shift(),b=l.shift(),w=o,E=u,o=l.shift(),u=l.shift(),S="A",x=this.convertEndpointToCenterParameterization(w,E,o,u,y,b,v,m,g);break;case"a":v=l.shift(),m=l.shift(),g=l.shift(),y=l.shift(),b=l.shift(),w=o,E=u,o+=l.shift(),u+=l.shift(),S="A",x=this.convertEndpointToCenterParameterization(w,E,o,u,y,b,v,m,g)}s.push({command:S||f,points:x,start:{x:T,y:N},pathLength:this.calcLength(T,N,S||f,x)})}("z"===f||"Z"===f)&&s.push({command:"z",points:[],start:void 0,pathLength:0})}return s},Kinetic.Path.calcLength=function(e,t,n,r){var i,s,o,u,a=Kinetic.Path;switch(n){case"L":return a.getLineLength(e,t,r[0],r[1]);case"C":for(i=0,s=a.getPointOnCubicBezier(0,e,t,r[0],r[1],r[2],r[3],r[4],r[5]),u=.01;1>=u;u+=.01)o=a.getPointOnCubicBezier(u,e,t,r[0],r[1],r[2],r[3],r[4],r[5]),i+=a.getLineLength(s.x,s.y,o.x,o.y),s=o;return i;case"Q":for(i=0,s=a.getPointOnQuadraticBezier(0,e,t,r[0],r[1],r[2],r[3]),u=.01;1>=u;u+=.01)o=a.getPointOnQuadraticBezier(u,e,t,r[0],r[1],r[2],r[3]),i+=a.getLineLength(s.x,s.y,o.x,o.y),s=o;return i;case"A":i=0;var f=r[4],l=r[5],c=r[4]+l,h=Math.PI/180;if(Math.abs(f-c)<h&&(h=Math.abs(f-c)),s=a.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],f,0),0>l)for(u=f-h;u>c;u-=h)o=a.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],u,0),i+=a.getLineLength(s.x,s.y,o.x,o.y),s=o;else for(u=f+h;c>u;u+=h)o=a.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],u,0),i+=a.getLineLength(s.x,s.y,o.x,o.y),s=o;return o=a.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],c,0),i+=a.getLineLength(s.x,s.y,o.x,o.y)}return 0},Kinetic.Path.convertEndpointToCenterParameterization=function(e,t,n,r,i,s,o,u,a){var f=a*(Math.PI/180),l=Math.cos(f)*(e-n)/2+Math.sin(f)*(t-r)/2,c=-1*Math.sin(f)*(e-n)/2+Math.cos(f)*(t-r)/2,h=l*l/(o*o)+c*c/(u*u);h>1&&(o*=Math.sqrt(h),u*=Math.sqrt(h));var p=Math.sqrt((o*o*u*u-o*o*c*c-u*u*l*l)/(o*o*c*c+u*u*l*l));i===s&&(p*=-1),isNaN(p)&&(p=0);var d=p*o*c/u,v=p*-u*l/o,m=(e+n)/2+Math.cos(f)*d-Math.sin(f)*v,g=(t+r)/2+Math.sin(f)*d+Math.cos(f)*v,y=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])},b=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(y(e)*y(t))},w=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(b(e,t))},E=w([1,0],[(l-d)/o,(c-v)/u]),S=[(l-d)/o,(c-v)/u],x=[(-1*l-d)/o,(-1*c-v)/u],T=w(S,x);return b(S,x)<=-1&&(T=Math.PI),b(S,x)>=1&&(T=0),0===s&&T>0&&(T-=2*Math.PI),1===s&&0>T&&(T+=2*Math.PI),[m,g,o,u,E,T,f,s]},Kinetic.Factory.addGetterSetter(Kinetic.Path,"data"),Kinetic.Collection.mapMethods(Kinetic.Path)}(),function(){function e(e){e.fillText(this.partialText,0,0)}function t(e){e.strokeText(this.partialText,0,0)}var n="",r="normal";Kinetic.TextPath=function(e){this.___init(e)},Kinetic.TextPath.prototype={___init:function(n){var r=this;this.dummyCanvas=Kinetic.Util.createCanvasElement(),this.dataArray=[],Kinetic.Shape.call(this,n),this._fillFunc=e,this._strokeFunc=t,this._fillFuncHit=e,this._strokeFuncHit=t,this.className="TextPath",this.dataArray=Kinetic.Path.parsePathData(this.attrs.data),this.on("dataChange.kinetic",function(){r.dataArray=Kinetic.Path.parsePathData(this.attrs.data)}),this.on("textChange.kinetic textStroke.kinetic textStrokeWidth.kinetic",r._setTextData),r._setTextData(),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline","middle"),e.setAttr("textAlign","left"),e.save();for(var t=this.glyphInfo,n=0;n<t.length;n++){e.save();var r=t[n].p0;e.translate(r.x,r.y),e.rotate(t[n].rotation),this.partialText=t[n].text,e.fillStrokeShape(this),e.restore()}e.restore()},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},setText:function(e){Kinetic.Text.prototype.setText.call(this,e)},_getTextSize:function(e){var t=this.dummyCanvas,n=t.getContext("2d");n.save(),n.font=this._getContextFont();var r=n.measureText(e);return n.restore(),{width:r.width,height:parseInt(this.attrs.fontSize,10)}},_setTextData:function(){var e=this,t=this._getTextSize(this.attrs.text);this.textWidth=t.width,this.textHeight=t.height,this.glyphInfo=[];for(var n,r,i,s=this.attrs.text.split(""),o=-1,u=0,a=function(){u=0;for(var t=e.dataArray,r=o+1;r<t.length;r++){if(t[r].pathLength>0)return o=r,t[r];"M"==t[r].command&&(n={x:t[r].points[0],y:t[r].points[1]})}return{}},f=function(t){var s=e._getTextSize(t).width,o=0,f=0;for(r=void 0;Math.abs(s-o)/s>.01&&25>f;){f++;for(var l=o;void 0===i;)i=a(),i&&l+i.pathLength<s&&(l+=i.pathLength,i=void 0);if(i==={}||void 0===n)return void 0;var c=!1;switch(i.command){case"L":Kinetic.Path.getLineLength(n.x,n.y,i.points[0],i.points[1])>s?r=Kinetic.Path.getPointOnLine(s,n.x,n.y,i.points[0],i.points[1],n.x,n.y):i=void 0;break;case"A":var h=i.points[4],p=i.points[5],d=i.points[4]+p;0===u?u=h+1e-8:s>o?u+=Math.PI/180*p/Math.abs(p):u-=Math.PI/360*p/Math.abs(p),(0>p&&d>u||p>=0&&u>d)&&(u=d,c=!0),r=Kinetic.Path.getPointOnEllipticalArc(i.points[0],i.points[1],i.points[2],i.points[3],u,i.points[6]);break;case"C":0===u?u=s>i.pathLength?1e-8:s/i.pathLength:s>o?u+=(s-o)/i.pathLength:u-=(o-s)/i.pathLength,u>1&&(u=1,c=!0),r=Kinetic.Path.getPointOnCubicBezier(u,i.start.x,i.start.y,i.points[0],i.points[1],i.points[2],i.points[3],i.points[4],i.points[5]);break;case"Q":0===u?u=s/i.pathLength:s>o?u+=(s-o)/i.pathLength:u-=(o-s)/i.pathLength,u>1&&(u=1,c=!0),r=Kinetic.Path.getPointOnQuadraticBezier(u,i.start.x,i.start.y,i.points[0],i.points[1],i.points[2],i.points[3])}void 0!==r&&(o=Kinetic.Path.getLineLength(n.x,n.y,r.x,r.y)),c&&(c=!1,i=void 0)}},l=0;l<s.length&&(f(s[l]),void 0!==n&&void 0!==r);l++){var c=Kinetic.Path.getLineLength(n.x,n.y,r.x,r.y),h=0,p=Kinetic.Path.getPointOnLine(h+c/2,n.x,n.y,r.x,r.y),d=Math.atan2(r.y-n.y,r.x-n.x);this.glyphInfo.push({transposeX:p.x,transposeY:p.y,text:s[l],rotation:d,p0:n,p1:r}),n=r}}},Kinetic.TextPath.prototype._getContextFont=Kinetic.Text.prototype._getContextFont,Kinetic.Util.extend(Kinetic.TextPath,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontFamily","Arial"),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontSize",12),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontStyle",r),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontVariant",r),Kinetic.Factory.addGetter(Kinetic.TextPath,"text",n),Kinetic.Collection.mapMethods(Kinetic.TextPath)}(),function(){Kinetic.RegularPolygon=function(e){this.___init(e)},Kinetic.RegularPolygon.prototype={___init:function(e){Kinetic.Shape.call(this,e),this.className="RegularPolygon",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){var t,n,r,i=this.attrs.sides,s=this.attrs.radius;for(e.beginPath(),e.moveTo(0,0-s),t=1;i>t;t++)n=s*Math.sin(2*t*Math.PI/i),r=-1*s*Math.cos(2*t*Math.PI/i),e.lineTo(n,r);e.closePath(),e.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.RegularPolygon,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"radius",0),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"sides",0),Kinetic.Collection.mapMethods(Kinetic.RegularPolygon)}(),function(){Kinetic.Star=function(e){this.___init(e)},Kinetic.Star.prototype={___init:function(e){Kinetic.Shape.call(this,e),this.className="Star",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){var t=this.innerRadius(),n=this.outerRadius(),r=this.numPoints();e.beginPath(),e.moveTo(0,0-n);for(var i=1;2*r>i;i++){var s=i%2===0?n:t,o=s*Math.sin(i*Math.PI/r),u=-1*s*Math.cos(i*Math.PI/r);e.lineTo(o,u)}e.closePath(),e.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Star,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Star,"numPoints",5),Kinetic.Factory.addGetterSetter(Kinetic.Star,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Star,"outerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Star)}(),function(){var e=["fontFamily","fontSize","fontStyle","padding","lineHeight","text"],t="Change.kinetic",n="none",r="up",i="right",s="down",o="left",u="Label",a=e.length;Kinetic.Label=function(e){this.____init(e)},Kinetic.Label.prototype={____init:function(e){var t=this;this.className=u,Kinetic.Group.call(this,e),this.on("add.kinetic",function(e){t._addListeners(e.child),t._sync()})},getText:function(){return this.find("Text")[0]},getTag:function(){return this.find("Tag")[0]},_addListeners:function(n){var r,i=this,s=function(){i._sync()};for(r=0;a>r;r++)n.on(e[r]+t,s)},getWidth:function(){return this.getText().getWidth()},getHeight:function(){return this.getText().getHeight()},_sync:function(){var e,t,n,u,a,l,c,h=this.getText(),p=this.getTag();if(h&&p){switch(e=h.getWidth(),t=h.getHeight(),n=p.getPointerDirection(),u=p.getPointerWidth(),c=p.getPointerHeight(),a=0,l=0,n){case r:a=e/2,l=-1*c;break;case i:a=e+u,l=t/2;break;case s:a=e/2,l=t+c;break;case o:a=-1*u,l=t/2}p.setAttrs({x:-1*a,y:-1*l,width:e,height:t}),h.setAttrs({x:-1*a,y:-1*l})}}},Kinetic.Util.extend(Kinetic.Label,Kinetic.Group),Kinetic.Collection.mapMethods(Kinetic.Label),Kinetic.Tag=function(e){this.___init(e)},Kinetic.Tag.prototype={___init:function(e){Kinetic.Shape.call(this,e),this.className="Tag",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){var t=this.getWidth(),n=this.getHeight(),u=this.getPointerDirection(),a=this.getPointerWidth(),l=this.getPointerHeight();e.beginPath(),e.moveTo(0,0),u===r&&(e.lineTo((t-a)/2,0),e.lineTo(t/2,-1*l),e.lineTo((t+a)/2,0)),e.lineTo(t,0),u===i&&(e.lineTo(t,(n-l)/2),e.lineTo(t+a,n/2),e.lineTo(t,(n+l)/2)),e.lineTo(t,n),u===s&&(e.lineTo((t+a)/2,n),e.lineTo(t/2,n+l),e.lineTo((t-a)/2,n)),e.lineTo(0,n),u===o&&(e.lineTo(0,(n+l)/2),e.lineTo(-1*a,n/2),e.lineTo(0,(n-l)/2)),e.closePath(),e.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Tag,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerDirection",n),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerWidth",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerHeight",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"cornerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Tag)}(),this.createjs=this.createjs||{},createjs.extend=function(e,t){"use strict";function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n},this.createjs=this.createjs||{},createjs.promote=function(e,t){"use strict";var n=e.prototype,r=Object.getPrototypeOf&&Object.getPrototypeOf(n)||n.__proto__;if(r){n[(t+="_")+"constructor"]=r.constructor;for(var i in r)n.hasOwnProperty(i)&&"function"==typeof r[i]&&(n[t+i]=r[i])}return e},this.createjs=this.createjs||{},createjs.indexOf=function(e,t){"use strict";for(var n=0,r=e.length;r>n;n++)if(t===e[n])return n;return-1},this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n){this.type=e,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!t,this.cancelable=!!n,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var t=e.prototype;t.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},t.stopPropagation=function(){this.propagationStopped=!0},t.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},t.remove=function(){this.removed=!0},t.clone=function(){return new e(this.type,this.bubbles,this.cancelable)},t.set=function(e){for(var t in e)this[t]=e[t];return this},t.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(){this._listeners=null,this._captureListeners=null}var t=e.prototype;e.initialize=function(e){e.addEventListener=t.addEventListener,e.on=t.on,e.removeEventListener=e.off=t.removeEventListener,e.removeAllEventListeners=t.removeAllEventListeners,e.hasEventListener=t.hasEventListener,e.dispatchEvent=t.dispatchEvent,e._dispatchEvent=t._dispatchEvent,e.willTrigger=t.willTrigger},t.addEventListener=function(e,t,n){var r;r=n?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var i=r[e];return i&&this.removeEventListener(e,t,n),i=r[e],i?i.push(t):r[e]=[t],t},t.on=function(e,t,n,r,i,s){return t.handleEvent&&(n=n||t,t=t.handleEvent),n=n||this,this.addEventListener(e,function(e){t.call(n,e,i),r&&e.remove()},s)},t.removeEventListener=function(e,t,n){var r=n?this._captureListeners:this._listeners;if(r){var i=r[e];if(i)for(var s=0,o=i.length;o>s;s++)if(i[s]==t){1==o?delete r[e]:i.splice(s,1);break}}},t.off=t.removeEventListener,t.removeAllEventListeners=function(e){e?(this._listeners&&delete this._listeners[e],this._captureListeners&&delete this._captureListeners[e]):this._listeners=this._captureListeners=null},t.dispatchEvent=function(e,t,n){if("string"==typeof e){var r=this._listeners;if(!(t||r&&r[e]))return!0;e=new createjs.Event(e,t,n)}else e.target&&e.clone&&(e=e.clone());try{e.target=this}catch(i){}if(e.bubbles&&this.parent){for(var s=this,o=[s];s.parent;)o.push(s=s.parent);var u,a=o.length;for(u=a-1;u>=0&&!e.propagationStopped;u--)o[u]._dispatchEvent(e,1+(0==u));for(u=1;a>u&&!e.propagationStopped;u++)o[u]._dispatchEvent(e,3)}else this._dispatchEvent(e,2);return!e.defaultPrevented},t.hasEventListener=function(e){var t=this._listeners,n=this._captureListeners;return!!(t&&t[e]||n&&n[e])},t.willTrigger=function(e){for(var t=this;t;){if(t.hasEventListener(e))return!0;t=t.parent}return!1},t.toString=function(){return"[EventDispatcher]"},t._dispatchEvent=function(e,t){var n,r=1==t?this._captureListeners:this._listeners;if(e&&r){var i=r[e.type];if(!i||!(n=i.length))return;try{e.currentTarget=this}catch(s){}try{e.eventPhase=t}catch(s){}e.removed=!1,i=i.slice();for(var o=0;n>o&&!e.immediatePropagationStopped;o++){var u=i[o];u.handleEvent?u.handleEvent(e):u(e),e.removed&&(this.off(e.type,u,1==t),e.removed=!1)}}},createjs.EventDispatcher=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(){throw"Ticker cannot be instantiated."}e.RAF_SYNCHED="synched",e.RAF="raf",e.TIMEOUT="timeout",e.useRAF=!1,e.timingMode=null,e.maxDelta=0,e.paused=!1,e.removeEventListener=null,e.removeAllEventListeners=null,e.dispatchEvent=null,e.hasEventListener=null,e._listeners=null,createjs.EventDispatcher.initialize(e),e._addEventListener=e.addEventListener,e.addEventListener=function(){return!e._inited&&e.init(),e._addEventListener.apply(e,arguments)},e._inited=!1,e._startTime=0,e._pausedTime=0,e._ticks=0,e._pausedTicks=0,e._interval=50,e._lastTime=0,e._times=null,e._tickTimes=null,e._timerId=null,e._raf=!0,e.setInterval=function(t){e._interval=t,e._inited&&e._setupTick()},e.getInterval=function(){return e._interval},e.setFPS=function(t){e.setInterval(1e3/t)},e.getFPS=function(){return 1e3/e._interval};try{Object.defineProperties(e,{interval:{get:e.getInterval,set:e.setInterval},framerate:{get:e.getFPS,set:e.setFPS}})}catch(t){console.log(t)}e.init=function(){e._inited||(e._inited=!0,e._times=[],e._tickTimes=[],e._startTime=e._getTime(),e._times.push(e._lastTime=0),e.interval=e._interval)},e.reset=function(){if(e._raf){var t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;t&&t(e._timerId)}else clearTimeout(e._timerId);e.removeAllEventListeners("tick"),e._timerId=e._times=e._tickTimes=null,e._startTime=e._lastTime=e._ticks=0,e._inited=!1},e.getMeasuredTickTime=function(t){var n=0,r=e._tickTimes;if(!r||r.length<1)return-1;t=Math.min(r.length,t||0|e.getFPS());for(var i=0;t>i;i++)n+=r[i];return n/t},e.getMeasuredFPS=function(t){var n=e._times;return!n||n.length<2?-1:(t=Math.min(n.length-1,t||0|e.getFPS()),1e3/((n[0]-n[t])/t))},e.setPaused=function(t){e.paused=t},e.getPaused=function(){return e.paused},e.getTime=function(t){return e._startTime?e._getTime()-(t?e._pausedTime:0):-1},e.getEventTime=function(t){return e._startTime?(e._lastTime||e._startTime)-(t?e._pausedTime:0):-1},e.getTicks=function(t){return e._ticks-(t?e._pausedTicks:0)},e._handleSynch=function(){e._timerId=null,e._setupTick(),e._getTime()-e._lastTime>=.97*(e._interval-1)&&e._tick()},e._handleRAF=function(){e._timerId=null,e._setupTick(),e._tick()},e._handleTimeout=function(){e._timerId=null,e._setupTick(),e._tick()},e._setupTick=function(){if(null==e._timerId){var t=e.timingMode||e.useRAF&&e.RAF_SYNCHED;if(t==e.RAF_SYNCHED||t==e.RAF){var n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(n)return e._timerId=n(t==e.RAF?e._handleRAF:e._handleSynch),void (e._raf=!0)}e._raf=!1,e._timerId=setTimeout(e._handleTimeout,e._interval)}},e._tick=function(){var t=e.paused,n=e._getTime(),r=n-e._lastTime;if(e._lastTime=n,e._ticks++,t&&(e._pausedTicks++,e._pausedTime+=r),e.hasEventListener("tick")){var i=new createjs.Event("tick"),s=e.maxDelta;i.delta=s&&r>s?s:r,i.paused=t,i.time=n,i.runTime=n-e._pausedTime,e.dispatchEvent(i)}for(e._tickTimes.unshift(e._getTime()-n);e._tickTimes.length>100;)e._tickTimes.pop();for(e._times.unshift(n);e._times.length>100;)e._times.pop()};var n=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);e._getTime=function(){return(n&&n.call(performance)||(new Date).getTime())-e._startTime},createjs.Ticker=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(){throw"UID cannot be instantiated"}e._nextID=0,e.get=function(){return e._nextID++},createjs.UID=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n,r,i,s,o,u,a,f,l){this.Event_constructor(e,t,n),this.stageX=r,this.stageY=i,this.rawX=null==a?r:a,this.rawY=null==f?i:f,this.nativeEvent=s,this.pointerID=o,this.primary=!!u,this.relatedTarget=l}var t=createjs.extend(e,createjs.Event);t._get_localX=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).x},t._get_localY=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).y},t._get_isTouch=function(){return-1!==this.pointerID};try{Object.defineProperties(t,{localX:{get:t._get_localX},localY:{get:t._get_localY},isTouch:{get:t._get_isTouch}})}catch(n){}t.clone=function(){return new e(this.type,this.bubbles,this.cancelable,this.stageX,this.stageY,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},t.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},createjs.MouseEvent=createjs.promote(e,"Event")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n,r,i,s){this.setValues(e,t,n,r,i,s)}var t=e.prototype;e.DEG_TO_RAD=Math.PI/180,e.identity=null,t.setValues=function(e,t,n,r,i,s){return this.a=null==e?1:e,this.b=t||0,this.c=n||0,this.d=null==r?1:r,this.tx=i||0,this.ty=s||0,this},t.append=function(e,t,n,r,i,s){var o=this.a,u=this.b,a=this.c,f=this.d;return(1!=e||0!=t||0!=n||1!=r)&&(this.a=o*e+a*t,this.b=u*e+f*t,this.c=o*n+a*r,this.d=u*n+f*r),this.tx=o*i+a*s+this.tx,this.ty=u*i+f*s+this.ty,this},t.prepend=function(e,t,n,r,i,s){var o=this.a,u=this.c,a=this.tx;return this.a=e*o+n*this.b,this.b=t*o+r*this.b,this.c=e*u+n*this.d,this.d=t*u+r*this.d,this.tx=e*a+n*this.ty+i,this.ty=t*a+r*this.ty+s,this},t.appendMatrix=function(e){return this.append(e.a,e.b,e.c,e.d,e.tx,e.ty)},t.prependMatrix=function(e){return this.prepend(e.a,e.b,e.c,e.d,e.tx,e.ty)},t.appendTransform=function(t,n,r,i,s,o,u,f,l){if(s%360)var c=s*e.DEG_TO_RAD,h=Math.cos(c),p=Math.sin(c);else h=1,p=0;return o||u?(o*=e.DEG_TO_RAD,u*=e.DEG_TO_RAD,this.append(Math.cos(u),Math.sin(u),-Math.sin(o),Math.cos(o),t,n),this.append(h*r,p*r,-p*i,h*i,0,0)):this.append(h*r,p*r,-p*i,h*i,t,n),(f||l)&&(this.tx-=f*this.a+l*this.c,this.ty-=f*this.b+l*this.d),this},t.prependTransform=function(t,n,r,i,s,o,u,f,l){if(s%360)var c=s*e.DEG_TO_RAD,h=Math.cos(c),p=Math.sin(c);else h=1,p=0;return(f||l)&&(this.tx-=f,this.ty-=l),o||u?(o*=e.DEG_TO_RAD,u*=e.DEG_TO_RAD,this.prepend(h*r,p*r,-p*i,h*i,0,0),this.prepend(Math.cos(u),Math.sin(u),-Math.sin(o),Math.cos(o),t,n)):this.prepend(h*r,p*r,-p*i,h*i,t,n),this},t.rotate=function(t){t*=e.DEG_TO_RAD;var n=Math.cos(t),r=Math.sin(t),i=this.a,s=this.b;return this.a=i*n+this.c*r,this.b=s*n+this.d*r,this.c=-i*r+this.c*n,this.d=-s*r+this.d*n,this},t.skew=function(t,n){return t*=e.DEG_TO_RAD,n*=e.DEG_TO_RAD,this.append(Math.cos(n),Math.sin(n),-Math.sin(t),Math.cos(t),0,0),this},t.scale=function(e,t){return this.a*=e,this.b*=e,this.c*=t,this.d*=t,this},t.translate=function(e,t){return this.tx+=this.a*e+this.c*t,this.ty+=this.b*e+this.d*t,this},t.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},t.invert=function(){var e=this.a,t=this.b,n=this.c,r=this.d,i=this.tx,s=e*r-t*n;return this.a=r/s,this.b=-t/s,this.c=-n/s,this.d=e/s,this.tx=(n*this.ty-r*i)/s,this.ty=-(e*this.ty-t*i)/s,this},t.isIdentity=function(){return 0===this.tx&&0===this.ty&&1===this.a&&0===this.b&&0===this.c&&1===this.d},t.equals=function(e){return this.tx===e.tx&&this.ty===e.ty&&this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d},t.transformPoint=function(e,t,n){return n=n||{},n.x=e*this.a+t*this.c+this.tx,n.y=e*this.b+t*this.d+this.ty,n},t.decompose=function(t){null==t&&(t={}),t.x=this.tx,t.y=this.ty,t.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),t.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var n=Math.atan2(-this.c,this.d),r=Math.atan2(this.b,this.a),i=Math.abs(1-n/r);return 1e-5>i?(t.rotation=r/e.DEG_TO_RAD,this.a<0&&this.d>=0&&(t.rotation+=t.rotation<=0?180:-180),t.skewX=t.skewY=0):(t.skewX=n/e.DEG_TO_RAD,t.skewY=r/e.DEG_TO_RAD),t},t.copy=function(e){return this.setValues(e.a,e.b,e.c,e.d,e.tx,e.ty)},t.clone=function(){return new e(this.a,this.b,this.c,this.d,this.tx,this.ty)},t.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},e.identity=new e,createjs.Matrix2D=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n,r,i){this.setValues(e,t,n,r,i)}var t=e.prototype;t.setValues=function(e,t,n,r,i){return this.visible=null==e?!0:!!e,this.alpha=null==t?1:t,this.shadow=n,this.compositeOperation=n,this.matrix=i||this.matrix&&this.matrix.identity()||new createjs.Matrix2D,this},t.append=function(e,t,n,r,i){return this.alpha*=t,this.shadow=n||this.shadow,this.compositeOperation=r||this.compositeOperation,this.visible=this.visible&&e,i&&this.matrix.appendMatrix(i),this},t.prepend=function(e,t,n,r,i){return this.alpha*=t,this.shadow=this.shadow||n,this.compositeOperation=this.compositeOperation||r,this.visible=this.visible&&e,i&&this.matrix.prependMatrix(i),this},t.identity=function(){return this.visible=!0,this.alpha=1,this.shadow=this.compositeOperation=null,this.matrix.identity(),this},t.clone=function(){return new e(this.alpha,this.shadow,this.compositeOperation,this.visible,this.matrix.clone())},createjs.DisplayProps=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.setValues(e,t)}var t=e.prototype;t.setValues=function(e,t){return this.x=e||0,this.y=t||0,this},t.copy=function(e){return this.x=e.x,this.y=e.y,this},t.clone=function(){return new e(this.x,this.y)},t.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},createjs.Point=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n,r){this.setValues(e,t,n,r)}var t=e.prototype;t.setValues=function(e,t,n,r){return this.x=e||0,this.y=t||0,this.width=n||0,this.height=r||0,this},t.extend=function(e,t,n,r){return n=n||0,r=r||0,e+n>this.x+this.width&&(this.width=e+n-this.x),t+r>this.y+this.height&&(this.height=t+r-this.y),e<this.x&&(this.width+=this.x-e,this.x=e),t<this.y&&(this.height+=this.y-t,this.y=t),this},t.pad=function(e,t,n,r){return this.x-=t,this.y-=e,this.width+=t+r,this.height+=e+n,this},t.copy=function(e){return this.setValues(e.x,e.y,e.width,e.height)},t.contains=function(e,t,n,r){return n=n||0,r=r||0,e>=this.x&&e+n<=this.x+this.width&&t>=this.y&&t+r<=this.y+this.height},t.union=function(e){return this.clone().extend(e.x,e.y,e.width,e.height)},t.intersection=function(t){var n=t.x,r=t.y,i=n+t.width,s=r+t.height;return this.x>n&&(n=this.x),this.y>r&&(r=this.y),this.x+this.width<i&&(i=this.x+this.width),this.y+this.height<s&&(s=this.y+this.height),n>=i||r>=s?null:new e(n,r,i-n,s-r)},t.intersects=function(e){return e.x<=this.x+this.width&&this.x<=e.x+e.width&&e.y<=this.y+this.height&&this.y<=e.y+e.height},t.isEmpty=function(){return this.width<=0||this.height<=0},t.clone=function(){return new e(this.x,this.y,this.width,this.height)},t.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},createjs.Rectangle=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n,r,i,s,o){e.addEventListener&&(this.target=e,this.overLabel=null==n?"over":n,this.outLabel=null==t?"out":t,this.downLabel=null==r?"down":r,this.play=i,this._isPressed=!1,this._isOver=!1,this._enabled=!1,e.mouseChildren=!1,this.enabled=!0,this.handleEvent({}),s&&(o&&(s.actionsEnabled=!1,s.gotoAndStop&&s.gotoAndStop(o)),e.hitArea=s))}var t=e.prototype;t.setEnabled=function(e){if(e!=this._enabled){var t=this.target;this._enabled=e,e?(t.cursor="pointer",t.addEventListener("rollover",this),t.addEventListener("rollout",this),t.addEventListener("mousedown",this),t.addEventListener("pressup",this),t._reset&&(t.__reset=t._reset,t._reset=this._reset)):(t.cursor=null,t.removeEventListener("rollover",this),t.removeEventListener("rollout",this),t.removeEventListener("mousedown",this),t.removeEventListener("pressup",this),t.__reset&&(t._reset=t.__reset,delete t.__reset))}},t.getEnabled=function(){return this._enabled};try{Object.defineProperties(t,{enabled:{get:t.getEnabled,set:t.setEnabled}})}catch(n){}t.toString=function(){return"[ButtonHelper]"},t.handleEvent=function(e){var t,n=this.target,r=e.type;"mousedown"==r?(this._isPressed=!0,t=this.downLabel):"pressup"==r?(this._isPressed=!1,t=this._isOver?this.overLabel:this.outLabel):"rollover"==r?(this._isOver=!0,t=this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,t=this._isPressed?this.overLabel:this.outLabel),this.play?n.gotoAndPlay&&n.gotoAndPlay(t):n.gotoAndStop&&n.gotoAndStop(t)},t._reset=function(){var e=this.paused;this.__reset(),this.paused=e},createjs.ButtonHelper=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n,r){this.color=e||"black",this.offsetX=t||0,this.offsetY=n||0,this.blur=r||0}var t=e.prototype;e.identity=new e("transparent",0,0,0),t.toString=function(){return"[Shadow]"},t.clone=function(){return new e(this.color,this.offsetX,this.offsetY,this.blur)},createjs.Shadow=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.EventDispatcher_constructor(),this.complete=!0,this.framerate=0,this._animations=null,this._frames=null,this._images=null,this._data=null,this._loadCount=0,this._frameHeight=0,this._frameWidth=0,this._numFrames=0,this._regX=0,this._regY=0,this._spacing=0,this._margin=0,this._parseData(e)}var t=createjs.extend(e,createjs.EventDispatcher);t.getAnimations=function(){return this._animations.slice()};try{Object.defineProperties(t,{animations:{get:t.getAnimations}})}catch(n){}t.getNumFrames=function(e){if(null==e)return this._frames?this._frames.length:this._numFrames||0;var t=this._data[e];return null==t?0:t.frames.length},t.getAnimation=function(e){return this._data[e]},t.getFrame=function(e){var t;return this._frames&&(t=this._frames[e])?t:null},t.getFrameBounds=function(e,t){var n=this.getFrame(e);return n?(t||new createjs.Rectangle).setValues(-n.regX,-n.regY,n.rect.width,n.rect.height):null},t.toString=function(){return"[SpriteSheet]"},t.clone=function(){throw"SpriteSheet cannot be cloned."},t._parseData=function(e){var t,n,r,i;if(null!=e){if(this.framerate=e.framerate||0,e.images&&(n=e.images.length)>0)for(i=this._images=[],t=0;n>t;t++){var s=e.images[t];if("string"==typeof s){var o=s;s=document.createElement("img"),s.src=o}i.push(s),s.getContext||s.naturalWidth||(this._loadCount++,this.complete=!1,function(e){s.onload=function(){e._handleImageLoad()}}(this))}if(null!=e.frames)if(e.frames instanceof Array)for(this._frames=[],i=e.frames,t=0,n=i.length;n>t;t++){var u=i[t];this._frames.push({image:this._images[u[4]?u[4]:0],rect:new createjs.Rectangle(u[0],u[1],u[2],u[3]),regX:u[5]||0,regY:u[6]||0})}else r=e.frames,this._frameWidth=r.width,this._frameHeight=r.height,this._regX=r.regX||0,this._regY=r.regY||0,this._spacing=r.spacing||0,this._margin=r.margin||0,this._numFrames=r.count,0==this._loadCount&&this._calculateFrames();if(this._animations=[],null!=(r=e.animations)){this._data={};var a;for(a in r){var f={name:a},l=r[a];if("number"==typeof l)i=f.frames=[l];else if(l instanceof Array)if(1==l.length)f.frames=[l[0]];else for(f.speed=l[3],f.next=l[2],i=f.frames=[],t=l[0];t<=l[1];t++)i.push(t);else{f.speed=l.speed,f.next=l.next;var c=l.frames;i=f.frames="number"==typeof c?[c]:c.slice(0)}(f.next===!0||void 0===f.next)&&(f.next=a),(f.next===!1||i.length<2&&f.next==a)&&(f.next=null),f.speed||(f.speed=1),this._animations.push(a),this._data[a]=f}}}},t._handleImageLoad=function(){0==--this._loadCount&&(this._calculateFrames(),this.complete=!0,this.dispatchEvent("complete"))},t._calculateFrames=function(){if(!this._frames&&0!=this._frameWidth){this._frames=[];var e=this._numFrames||1e5,t=0,n=this._frameWidth,r=this._frameHeight,i=this._spacing,s=this._margin;e:for(var o=0,u=this._images;o<u.length;o++)for(var a=u[o],f=a.width,l=a.height,c=s;l-s-r>=c;){for(var h=s;f-s-n>=h;){if(t>=e)break e;t++,this._frames.push({image:a,rect:new createjs.Rectangle(h,c,n,r),regX:this._regX,regY:this._regY}),h+=n+i}c+=r+i}this._numFrames=t}},createjs.SpriteSheet=createjs.promote(e,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function e(){this.command=null,this._stroke=null,this._strokeStyle=null,this._oldStrokeStyle=null,this._strokeDash=null,this._oldStrokeDash=null,this._strokeIgnoreScale=!1,this._fill=null,this._instructions=[],this._commitIndex=0,this._activeInstructions=[],this._dirty=!1,this._storeIndex=0,this.clear()}var t=e.prototype,n=e;e.getRGB=function(e,t,n,r){return null!=e&&null==n&&(r=t,n=255&e,t=e>>8&255,e=e>>16&255),null==r?"rgb("+e+","+t+","+n+")":"rgba("+e+","+t+","+n+","+r+")"},e.getHSL=function(e,t,n,r){return null==r?"hsl("+e%360+","+t+"%,"+n+"%)":"hsla("+e%360+","+t+"%,"+n+"%,"+r+")"},e.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},e.STROKE_CAPS_MAP=["butt","round","square"],e.STROKE_JOINTS_MAP=["miter","round","bevel"];var r=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");r.getContext&&(e._ctx=r.getContext("2d"),r.width=r.height=1),t.getInstructions=function(){return this._updateInstructions(),this._instructions};try{Object.defineProperties(t,{instructions:{get:t.getInstructions}})}catch(i){}t.isEmpty=function(){return!this._instructions.length&&!this._activeInstructions.length},t.draw=function(e,t){this._updateInstructions();for(var n=this._instructions,r=this._storeIndex,i=n.length;i>r;r++)n[r].exec(e,t)},t.drawAsPath=function(e){this._updateInstructions();for(var t,n=this._instructions,r=this._storeIndex,i=n.length;i>r;r++)(t=n[r]).path!==!1&&t.exec(e)},t.moveTo=function(e,t){return this.append(new n.MoveTo(e,t),!0)},t.lineTo=function(e,t){return this.append(new n.LineTo(e,t))},t.arcTo=function(e,t,r,i,s){return this.append(new n.ArcTo(e,t,r,i,s))},t.arc=function(e,t,r,i,s,o){return this.append(new n.Arc(e,t,r,i,s,o))},t.quadraticCurveTo=function(e,t,r,i){return this.append(new n.QuadraticCurveTo(e,t,r,i))},t.bezierCurveTo=function(e,t,r,i,s,o){return this.append(new n.BezierCurveTo(e,t,r,i,s,o))},t.rect=function(e,t,r,i){return this.append(new n.Rect(e,t,r,i))},t.closePath=function(){return this._activeInstructions.length?this.append(new n.ClosePath):this},t.clear=function(){return this._instructions.length=this._activeInstructions.length=this._commitIndex=0,this._strokeStyle=this._oldStrokeStyle=this._stroke=this._fill=this._strokeDash=this._oldStrokeDash=null,this._dirty=this._strokeIgnoreScale=!1,this},t.beginFill=function(e){return this._setFill(e?new n.Fill(e):null)},t.beginLinearGradientFill=function(e,t,r,i,s,o){return this._setFill((new n.Fill).linearGradient(e,t,r,i,s,o))},t.beginRadialGradientFill=function(e,t,r,i,s,o,u,a){return this._setFill((new n.Fill).radialGradient(e,t,r,i,s,o,u,a))},t.beginBitmapFill=function(e,t,r){return this._setFill((new n.Fill(null,r)).bitmap(e,t))},t.endFill=function(){return this.beginFill()},t.setStrokeStyle=function(e,t,r,i,s){return this._updateInstructions(!0),this._strokeStyle=this.command=new n.StrokeStyle(e,t,r,i,s),this._stroke&&(this._stroke.ignoreScale=s),this._strokeIgnoreScale=s,this},t.setStrokeDash=function(e,t){return this._updateInstructions(!0),this._strokeDash=this.command=new n.StrokeDash(e,t),this},t.beginStroke=function(e){return this._setStroke(e?new n.Stroke(e):null)},t.beginLinearGradientStroke=function(e,t,r,i,s,o){return this._setStroke((new n.Stroke).linearGradient(e,t,r,i,s,o))},t.beginRadialGradientStroke=function(e,t,r,i,s,o,u,a){return this._setStroke((new n.Stroke).radialGradient(e,t,r,i,s,o,u,a))},t.beginBitmapStroke=function(e,t){return this._setStroke((new n.Stroke).bitmap(e,t))},t.endStroke=function(){return this.beginStroke()},t.curveTo=t.quadraticCurveTo,t.drawRect=t.rect,t.drawRoundRect=function(e,t,n,r,i){return this.drawRoundRectComplex(e,t,n,r,i,i,i,i)},t.drawRoundRectComplex=function(e,t,r,i,s,o,u,a){return this.append(new n.RoundRect(e,t,r,i,s,o,u,a))},t.drawCircle=function(e,t,r){return this.append(new n.Circle(e,t,r))},t.drawEllipse=function(e,t,r,i){return this.append(new n.Ellipse(e,t,r,i))},t.drawPolyStar=function(e,t,r,i,s,o){return this.append(new n.PolyStar(e,t,r,i,s,o))},t.append=function(e,t){return this._activeInstructions.push(e),this.command=e,t||(this._dirty=!0),this},t.decodePath=function(t){for(var n=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],r=[2,2,4,6,0],i=0,s=t.length,o=[],u=0,f=0,l=e.BASE_64;s>i;){var c=t.charAt(i),h=l[c],p=h>>3,d=n[p];if(!d||3&h)throw"bad path data (@"+i+"): "+c;var v=r[p];p||(u=f=0),o.length=0,i++;for(var m=(h>>2&1)+2,g=0;v>g;g++){var y=l[t.charAt(i)],b=y>>5?-1:1;y=(31&y)<<6|l[t.charAt(i+1)],3==m&&(y=y<<6|l[t.charAt(i+2)]),y=b*y/10,g%2?u=y+=u:f=y+=f,o[g]=y,i+=m}d.apply(this,o)}return this},t.store=function(){return this._updateInstructions(!0),this._storeIndex=this._instructions.length,this},t.unstore=function(){return this._storeIndex=0,this},t.clone=function(){var t=new e;return t.command=this.command,t._stroke=this._stroke,t._strokeStyle=this._strokeStyle,t._strokeDash=this._strokeDash,t._strokeIgnoreScale=this._strokeIgnoreScale,t._fill=this._fill,t._instructions=this._instructions.slice(),t._commitIndex=this._commitIndex,t._activeInstructions=this._activeInstructions.slice(),t._dirty=this._dirty,t._storeIndex=this._storeIndex,t},t.toString=function(){return"[Graphics]"},t.mt=t.moveTo,t.lt=t.lineTo,t.at=t.arcTo,t.bt=t.bezierCurveTo,t.qt=t.quadraticCurveTo,t.a=t.arc,t.r=t.rect,t.cp=t.closePath,t.c=t.clear,t.f=t.beginFill,t.lf=t.beginLinearGradientFill,t.rf=t.beginRadialGradientFill,t.bf=t.beginBitmapFill,t.ef=t.endFill,t.ss=t.setStrokeStyle,t.sd=t.setStrokeDash,t.s=t.beginStroke,t.ls=t.beginLinearGradientStroke,t.rs=t.beginRadialGradientStroke,t.bs=t.beginBitmapStroke,t.es=t.endStroke,t.dr=t.drawRect,t.rr=t.drawRoundRect,t.rc=t.drawRoundRectComplex,t.dc=t.drawCircle,t.de=t.drawEllipse,t.dp=t.drawPolyStar,t.p=t.decodePath,t._updateInstructions=function(t){var n=this._instructions,r=this._activeInstructions,i=this._commitIndex;if(this._dirty&&r.length){n.length=i,n.push(e.beginCmd);var s=r.length,o=n.length;n.length=o+s;for(var u=0;s>u;u++)n[u+o]=r[u];this._fill&&n.push(this._fill),this._stroke&&(this._strokeDash!==this._oldStrokeDash&&(this._oldStrokeDash=this._strokeDash,n.push(this._strokeDash)),this._strokeStyle!==this._oldStrokeStyle&&(this._oldStrokeStyle=this._strokeStyle,n.push(this._strokeStyle)),n.push(this._stroke)),this._dirty=!1}t&&(r.length=0,this._commitIndex=n.length)},t._setFill=function(e){return this._updateInstructions(!0),this.command=this._fill=e,this},t._setStroke=function(e){return this._updateInstructions(!0),(this.command=this._stroke=e)&&(e.ignoreScale=this._strokeIgnoreScale),this},(n.LineTo=function(e,t){this.x=e,this.y=t}).prototype.exec=function(e){e.lineTo(this.x,this.y)},(n.MoveTo=function(e,t){this.x=e,this.y=t}).prototype.exec=function(e){e.moveTo(this.x,this.y)},(n.ArcTo=function(e,t,n,r,i){this.x1=e,this.y1=t,this.x2=n,this.y2=r,this.radius=i}).prototype.exec=function(e){e.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)},(n.Arc=function(e,t,n,r,i,s){this.x=e,this.y=t,this.radius=n,this.startAngle=r,this.endAngle=i,this.anticlockwise=!!s}).prototype.exec=function(e){e.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.anticlockwise)},(n.QuadraticCurveTo=function(e,t,n,r){this.cpx=e,this.cpy=t,this.x=n,this.y=r}).prototype.exec=function(e){e.quadraticCurveTo(this.cpx,this.cpy,this.x,this.y)},(n.BezierCurveTo=function(e,t,n,r,i,s){this.cp1x=e,this.cp1y=t,this.cp2x=n,this.cp2y=r,this.x=i,this.y=s}).prototype.exec=function(e){e.bezierCurveTo(this.cp1x,this.cp1y,this.cp2x,this.cp2y,this.x,this.y)},(n.Rect=function(e,t,n,r){this.x=e,this.y=t,this.w=n,this.h=r}).prototype.exec=function(e){e.rect(this.x,this.y,this.w,this.h)},(n.ClosePath=function(){}).prototype.exec=function(e){e.closePath()},(n.BeginPath=function(){}).prototype.exec=function(e){e.beginPath()},t=(n.Fill=function(e,t){this.style=e,this.matrix=t}).prototype,t.exec=function(e){if(this.style){e.fillStyle=this.style;var t=this.matrix;t&&(e.save(),e.transform(t.a,t.b,t.c,t.d,t.tx,t.ty)),e.fill(),t&&e.restore()}},t.linearGradient=function(t,n,r,i,s,o){for(var u=this.style=e._ctx.createLinearGradient(r,i,s,o),f=0,l=t.length;l>f;f++)u.addColorStop(n[f],t[f]);return u.props={colors:t,ratios:n,x0:r,y0:i,x1:s,y1:o,type:"linear"},this},t.radialGradient=function(t,n,r,i,s,o,u,f){for(var l=this.style=e._ctx.createRadialGradient(r,i,s,o,u,f),c=0,h=t.length;h>c;c++)l.addColorStop(n[c],t[c]);return l.props={colors:t,ratios:n,x0:r,y0:i,r0:s,x1:o,y1:u,r1:f,type:"radial"},this},t.bitmap=function(t,n){if(t.naturalWidth||t.getContext||t.readyState>=2){var r=this.style=e._ctx.createPattern(t,n||"");r.props={image:t,repetition:n,type:"bitmap"}}return this},t.path=!1,t=(n.Stroke=function(e,t){this.style=e,this.ignoreScale=t}).prototype,t.exec=function(e){this.style&&(e.strokeStyle=this.style,this.ignoreScale&&(e.save(),e.setTransform(1,0,0,1,0,0)),e.stroke(),this.ignoreScale&&e.restore())},t.linearGradient=n.Fill.prototype.linearGradient,t.radialGradient=n.Fill.prototype.radialGradient,t.bitmap=n.Fill.prototype.bitmap,t.path=!1,t=(n.StrokeStyle=function(e,t,n,r){this.width=e,this.caps=t,this.joints=n,this.miterLimit=r}).prototype,t.exec=function(t){t.lineWidth=null==this.width?"1":this.width,t.lineCap=null==this.caps?"butt":isNaN(this.caps)?this.caps:e.STROKE_CAPS_MAP[this.caps],t.lineJoin=null==this.joints?"miter":isNaN(this.joints)?this.joints:e.STROKE_JOINTS_MAP[this.joints],t.miterLimit=null==this.miterLimit?"10":this.miterLimit},t.path=!1,(n.StrokeDash=function(e,t){this.segments=e,this.offset=t||0}).prototype.exec=function(e){e.setLineDash&&(e.setLineDash(this.segments||n.StrokeDash.EMPTY_SEGMENTS),e.lineDashOffset=this.offset||0)},n.StrokeDash.EMPTY_SEGMENTS=[],(n.RoundRect=function(e,t,n,r,i,s,o,u){this.x=e,this.y=t,this.w=n,this.h=r,this.radiusTL=i,this.radiusTR=s,this.radiusBR=o,this.radiusBL=u}).prototype.exec=function(e){var t=(f>a?a:f)/2,n=0,r=0,i=0,s=0,o=this.x,u=this.y,a=this.w,f=this.h,l=this.radiusTL,c=this.radiusTR,h=this.radiusBR,p=this.radiusBL;0>l&&(l*=n=-1),l>t&&(l=t),0>c&&(c*=r=-1),c>t&&(c=t),0>h&&(h*=i=-1),h>t&&(h=t),0>p&&(p*=s=-1),p>t&&(p=t),e.moveTo(o+a-c,u),e.arcTo(o+a+c*r,u-c*r,o+a,u+c,c),e.lineTo(o+a,u+f-h),e.arcTo(o+a+h*i,u+f+h*i,o+a-h,u+f,h),e.lineTo(o+p,u+f),e.arcTo(o-p*s,u+f+p*s,o,u+f-p,p),e.lineTo(o,u+l),e.arcTo(o-l*n,u-l*n,o+l,u,l),e.closePath()},(n.Circle=function(e,t,n){this.x=e,this.y=t,this.radius=n}).prototype.exec=function(e){e.arc(this.x,this.y,this.radius,0,2*Math.PI)},(n.Ellipse=function(e,t,n,r){this.x=e,this.y=t,this.w=n,this.h=r}).prototype.exec=function(e){var t=this.x,n=this.y,r=this.w,i=this.h,s=.5522848,o=r/2*s,u=i/2*s,a=t+r,f=n+i,l=t+r/2,c=n+i/2;e.moveTo(t,c),e.bezierCurveTo(t,c-u,l-o,n,l,n),e.bezierCurveTo(l+o,n,a,c-u,a,c),e.bezierCurveTo(a,c+u,l+o,f,l,f),e.bezierCurveTo(l-o,f,t,c+u,t,c)},(n.PolyStar=function(e,t,n,r,i,s){this.x=e,this.y=t,this.radius=n,this.sides=r,this.pointSize=i,this.angle=s}).prototype.exec=function(e){var t=this.x,n=this.y,r=this.radius,i=(this.angle||0)/180*Math.PI,s=this.sides,o=1-(this.pointSize||0),u=Math.PI/s;e.moveTo(t+Math.cos(i)*r,n+Math.sin(i)*r);for(var a=0;s>a;a++)i+=u,1!=o&&e.lineTo(t+Math.cos(i)*r*o,n+Math.sin(i)*r*o),i+=u,e.lineTo(t+Math.cos(i)*r,n+Math.sin(i)*r);e.closePath()},e.beginCmd=new n.BeginPath,createjs.Graphics=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(){this.EventDispatcher_constructor(),this.alpha=1,this.cacheCanvas=null,this.cacheID=0,this.id=createjs.UID.get(),this.mouseEnabled=!0,this.tickEnabled=!0,this.name=null,this.parent=null,this.regX=0,this.regY=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.skewX=0,this.skewY=0,this.shadow=null,this.visible=!0,this.x=0,this.y=0,this.transformMatrix=null,this.compositeOperation=null,this.snapToPixel=!0,this.filters=null,this.mask=null,this.hitArea=null,this.cursor=null,this._cacheOffsetX=0,this._cacheOffsetY=0,this._filterOffsetX=0,this._filterOffsetY=0,this._cacheScale=1,this._cacheDataURLID=0,this._cacheDataURL=null,this._props=new createjs.DisplayProps,this._rectangle=new createjs.Rectangle,this._bounds=null}var t=createjs.extend(e,createjs.EventDispatcher);e._MOUSE_EVENTS=["click","dblclick","mousedown","mouseout","mouseover","pressmove","pressup","rollout","rollover"],e.suppressCrossDomainErrors=!1,e._snapToPixelEnabled=!1;var n=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");n.getContext&&(e._hitTestCanvas=n,e._hitTestContext=n.getContext("2d"),n.width=n.height=1),e._nextCacheID=1,t.getStage=function(){for(var e=this,t=createjs.Stage;e.parent;)e=e.parent;return e instanceof t?e:null};try{Object.defineProperties(t,{stage:{get:t.getStage}})}catch(r){}t.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},t.draw=function(e,t){var n=this.cacheCanvas;if(t||!n)return!1;var r=this._cacheScale;return e.drawImage(n,this._cacheOffsetX+this._filterOffsetX,this._cacheOffsetY+this._filterOffsetY,n.width/r,n.height/r),!0},t.updateContext=function(t){var n=this,r=n.mask,i=n._props.matrix;r&&r.graphics&&!r.graphics.isEmpty()&&(r.getMatrix(i),t.transform(i.a,i.b,i.c,i.d,i.tx,i.ty),r.graphics.drawAsPath(t),t.clip(),i.invert(),t.transform(i.a,i.b,i.c,i.d,i.tx,i.ty)),this.getMatrix(i);var s=i.tx,o=i.ty;e._snapToPixelEnabled&&n.snapToPixel&&(s=s+(0>s?-0.5:.5)|0,o=o+(0>o?-0.5:.5)|0),t.transform(i.a,i.b,i.c,i.d,s,o),t.globalAlpha*=n.alpha,n.compositeOperation&&(t.globalCompositeOperation=n.compositeOperation),n.shadow&&this._applyShadow(t,n.shadow)},t.cache=function(e,t,n,r,i){i=i||1,this.cacheCanvas||(this.cacheCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),this._cacheWidth=n,this._cacheHeight=r,this._cacheOffsetX=e,this._cacheOffsetY=t,this._cacheScale=i,this.updateCache()},t.updateCache=function(t){var n=this.cacheCanvas;if(!n)throw"cache() must be called before updateCache()";var r=this._cacheScale,i=this._cacheOffsetX*r,s=this._cacheOffsetY*r,o=this._cacheWidth,u=this._cacheHeight,f=n.getContext("2d"),l=this._getFilterBounds();i+=this._filterOffsetX=l.x,s+=this._filterOffsetY=l.y,o=Math.ceil(o*r)+l.width,u=Math.ceil(u*r)+l.height,o!=n.width||u!=n.height?(n.width=o,n.height=u):t||f.clearRect(0,0,o+1,u+1),f.save(),f.globalCompositeOperation=t,f.setTransform(r,0,0,r,-i,-s),this.draw(f,!0),this._applyFilters(),f.restore(),this.cacheID=e._nextCacheID++},t.uncache=function(){this._cacheDataURL=this.cacheCanvas=null,this.cacheID=this._cacheOffsetX=this._cacheOffsetY=this._filterOffsetX=this._filterOffsetY=0,this._cacheScale=1},t.getCacheDataURL=function(){return this.cacheCanvas?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL()),this._cacheDataURL):null},t.localToGlobal=function(e,t,n){return this.getConcatenatedMatrix(this._props.matrix).transformPoint(e,t,n||new createjs.Point)},t.globalToLocal=function(e,t,n){return this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(e,t,n||new createjs.Point)},t.localToLocal=function(e,t,n,r){return r=this.localToGlobal(e,t,r),n.globalToLocal(r.x,r.y,r)},t.setTransform=function(e,t,n,r,i,s,o,u,a){return this.x=e||0,this.y=t||0,this.scaleX=null==n?1:n,this.scaleY=null==r?1:r,this.rotation=i||0,this.skewX=s||0,this.skewY=o||0,this.regX=u||0,this.regY=a||0,this},t.getMatrix=function(e){var t=this,n=e&&e.identity()||new createjs.Matrix2D;return t.transformMatrix?n.copy(t.transformMatrix):n.appendTransform(t.x,t.y,t.scaleX,t.scaleY,t.rotation,t.skewX,t.skewY,t.regX,t.regY)},t.getConcatenatedMatrix=function(e){for(var t=this,n=this.getMatrix(e);t=t.parent;)n.prependMatrix(t.getMatrix(t._props.matrix));return n},t.getConcatenatedDisplayProps=function(e){e=e?e.identity():new createjs.DisplayProps;var t=this,n=t.getMatrix(e.matrix);do e.prepend(t.visible,t.alpha,t.shadow,t.compositeOperation),t!=this&&n.prependMatrix(t.getMatrix(t._props.matrix));while(t=t.parent);return e},t.hitTest=function(t,n){var r=e._hitTestContext;r.setTransform(1,0,0,1,-t,-n),this.draw(r);var i=this._testHit(r);return r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,2,2),i},t.set=function(e){for(var t in e)this[t]=e[t];return this},t.getBounds=function(){if(this._bounds)return this._rectangle.copy(this._bounds);var e=this.cacheCanvas;if(e){var t=this._cacheScale;return this._rectangle.setValues(this._cacheOffsetX,this._cacheOffsetY,e.width/t,e.height/t)}return null},t.getTransformedBounds=function(){return this._getBounds()},t.setBounds=function(e,t,n,r){null==e&&(this._bounds=e),this._bounds=(this._bounds||new createjs.Rectangle).setValues(e,t,n,r)},t.clone=function(){return this._cloneProps(new e)},t.toString=function(){return"[DisplayObject (name="+this.name+")]"},t._cloneProps=function(e){return e.alpha=this.alpha,e.mouseEnabled=this.mouseEnabled,e.tickEnabled=this.tickEnabled,e.name=this.name,e.regX=this.regX,e.regY=this.regY,e.rotation=this.rotation,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.shadow=this.shadow,e.skewX=this.skewX,e.skewY=this.skewY,e.visible=this.visible,e.x=this.x,e.y=this.y,e.compositeOperation=this.compositeOperation,e.snapToPixel=this.snapToPixel,e.filters=null==this.filters?null:this.filters.slice(0),e.mask=this.mask,e.hitArea=this.hitArea,e.cursor=this.cursor,e._bounds=this._bounds,e},t._applyShadow=function(e,t){t=t||Shadow.identity,e.shadowColor=t.color,e.shadowOffsetX=t.offsetX,e.shadowOffsetY=t.offsetY,e.shadowBlur=t.blur},t._tick=function(e){var t=this._listeners;t&&t.tick&&(e.target=null,e.propagationStopped=e.immediatePropagationStopped=!1,this.dispatchEvent(e))},t._testHit=function(t){try{var n=t.getImageData(0,0,1,1).data[3]>1}catch(r){if(!e.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return n},t._applyFilters=function(){if(this.filters&&0!=this.filters.length&&this.cacheCanvas)for(var e=this.filters.length,t=this.cacheCanvas.getContext("2d"),n=this.cacheCanvas.width,r=this.cacheCanvas.height,i=0;e>i;i++)this.filters[i].applyFilter(t,0,0,n,r)},t._getFilterBounds=function(){var e,t=this.filters,n=this._rectangle.setValues(0,0,0,0);if(!t||!(e=t.length))return n;for(var r=0;e>r;r++){var i=this.filters[r];i.getBounds&&i.getBounds(n)}return n},t._getBounds=function(e,t){return this._transformBounds(this.getBounds(),e,t)},t._transformBounds=function(e,t,n){if(!e)return e;var r=e.x,i=e.y,s=e.width,o=e.height,u=this._props.matrix;u=n?u.identity():this.getMatrix(u),(r||i)&&u.appendTransform(0,0,1,1,0,0,0,-r,-i),t&&u.prependMatrix(t);var a=s*u.a,f=s*u.b,l=o*u.c,c=o*u.d,h=u.tx,p=u.ty,d=h,v=h,m=p,g=p;return(r=a+h)<d?d=r:r>v&&(v=r),(r=a+l+h)<d?d=r:r>v&&(v=r),(r=l+h)<d?d=r:r>v&&(v=r),(i=f+p)<m?m=i:i>g&&(g=i),(i=f+c+p)<m?m=i:i>g&&(g=i),(i=c+p)<m?m=i:i>g&&(g=i),e.setValues(d,m,v-d,g-m)},t._hasMouseEventListener=function(){for(var t=e._MOUSE_EVENTS,n=0,r=t.length;r>n;n++)if(this.hasEventListener(t[n]))return!0;return!!this.cursor},createjs.DisplayObject=createjs.promote(e,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function e(){this.DisplayObject_constructor(),this.children=[],this.mouseChildren=!0,this.tickChildren=!0}var t=createjs.extend(e,createjs.DisplayObject);t.getNumChildren=function(){return this.children.length};try{Object.defineProperties(t,{numChildren:{get:t.getNumChildren}})}catch(n){}t.initialize=e,t.isVisible=function(){var e=this.cacheCanvas||this.children.length;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},t.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;for(var n=this.children.slice(),r=0,i=n.length;i>r;r++){var s=n[r];s.isVisible()&&(e.save(),s.updateContext(e),s.draw(e),e.restore())}return!0},t.addChild=function(e){if(null==e)return e;var t=arguments.length;if(t>1){for(var n=0;t>n;n++)this.addChild(arguments[n]);return arguments[t-1]}return e.parent&&e.parent.removeChild(e),e.parent=this,this.children.push(e),e.dispatchEvent("added"),e},t.addChildAt=function(e,t){var n=arguments.length,r=arguments[n-1];if(0>r||r>this.children.length)return arguments[n-2];if(n>2){for(var i=0;n-1>i;i++)this.addChildAt(arguments[i],r+i);return arguments[n-2]}return e.parent&&e.parent.removeChild(e),e.parent=this,this.children.splice(t,0,e),e.dispatchEvent("added"),e},t.removeChild=function(e){var t=arguments.length;if(t>1){for(var n=!0,r=0;t>r;r++)n=n&&this.removeChild(arguments[r]);return n}return this.removeChildAt(createjs.indexOf(this.children,e))},t.removeChildAt=function(e){var t=arguments.length;if(t>1){for(var n=[],r=0;t>r;r++)n[r]=arguments[r];n.sort(function(e,t){return t-e});for(var i=!0,r=0;t>r;r++)i=i&&this.removeChildAt(n[r]);return i}if(0>e||e>this.children.length-1)return!1;var s=this.children[e];return s&&(s.parent=null),this.children.splice(e,1),s.dispatchEvent("removed"),!0},t.removeAllChildren=function(){for(var e=this.children;e.length;)this.removeChildAt(0)},t.getChildAt=function(e){return this.children[e]},t.getChildByName=function(e){for(var t=this.children,n=0,r=t.length;r>n;n++)if(t[n].name==e)return t[n];return null},t.sortChildren=function(e){this.children.sort(e)},t.getChildIndex=function(e){return createjs.indexOf(this.children,e)},t.swapChildrenAt=function(e,t){var n=this.children,r=n[e],i=n[t];r&&i&&(n[e]=i,n[t]=r)},t.swapChildren=function(e,t){for(var n,r,i=this.children,s=0,o=i.length;o>s&&(i[s]==e&&(n=s),i[s]==t&&(r=s),null==n||null==r);s++);s!=o&&(i[n]=t,i[r]=e)},t.setChildIndex=function(e,t){var n=this.children,r=n.length;if(!(e.parent!=this||0>t||t>=r)){for(var i=0;r>i&&n[i]!=e;i++);i!=r&&i!=t&&(n.splice(i,1),n.splice(t,0,e))}},t.contains=function(e){for(;e;){if(e==this)return!0;e=e.parent}return!1},t.hitTest=function(e,t){return null!=this.getObjectUnderPoint(e,t)},t.getObjectsUnderPoint=function(e,t,n){var r=[],i=this.localToGlobal(e,t);return this._getObjectsUnderPoint(i.x,i.y,r,n>0,1==n),r},t.getObjectUnderPoint=function(e,t,n){var r=this.localToGlobal(e,t);return this._getObjectsUnderPoint(r.x,r.y,null,n>0,1==n)},t.getBounds=function(){return this._getBounds(null,!0)},t.getTransformedBounds=function(){return this._getBounds()},t.clone=function(t){var n=this._cloneProps(new e);return t&&this._cloneChildren(n),n},t.toString=function(){return"[Container (name="+this.name+")]"},t._tick=function(e){if(this.tickChildren)for(var t=this.children.length-1;t>=0;t--){var n=this.children[t];n.tickEnabled&&n._tick&&n._tick(e)}this.DisplayObject__tick(e)},t._cloneChildren=function(e){e.children.length&&e.removeAllChildren();for(var t=e.children,n=0,r=this.children.length;r>n;n++){var i=this.children[n].clone(!0);i.parent=e,t.push(i)}},t._getObjectsUnderPoint=function(t,n,r,i,s,o){if(o=o||0,!o&&!this._testMask(this,t,n))return null;var u,f=createjs.DisplayObject._hitTestContext;s=s||i&&this._hasMouseEventListener();for(var l=this.children,c=l.length,h=c-1;h>=0;h--){var p=l[h],d=p.hitArea;if(p.visible&&(d||p.isVisible())&&(!i||p.mouseEnabled)&&(d||this._testMask(p,t,n)))if(!d&&p instanceof e){var v=p._getObjectsUnderPoint(t,n,r,i,s,o+1);if(!r&&v)return i&&!this.mouseChildren?this:v}else{if(i&&!s&&!p._hasMouseEventListener())continue;var m=p.getConcatenatedDisplayProps(p._props);if(u=m.matrix,d&&(u.appendMatrix(d.getMatrix(d._props.matrix)),m.alpha=d.alpha),f.globalAlpha=m.alpha,f.setTransform(u.a,u.b,u.c,u.d,u.tx-t,u.ty-n),(d||p).draw(f),!this._testHit(f))continue;if(f.setTransform(1,0,0,1,0,0),f.clearRect(0,0,2,2),!r)return i&&!this.mouseChildren?this:p;r.push(p)}}return null},t._testMask=function(e,t,n){var r=e.mask;if(!r||!r.graphics||r.graphics.isEmpty())return!0;var i=this._props.matrix,s=e.parent;i=s?s.getConcatenatedMatrix(i):i.identity(),i=r.getMatrix(r._props.matrix).prependMatrix(i);var o=createjs.DisplayObject._hitTestContext;return o.setTransform(i.a,i.b,i.c,i.d,i.tx-t,i.ty-n),r.graphics.drawAsPath(o),o.fillStyle="#000",o.fill(),this._testHit(o)?(o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,2,2),!0):!1},t._getBounds=function(e,t){var n=this.DisplayObject_getBounds();if(n)return this._transformBounds(n,e,t);var r=this._props.matrix;r=t?r.identity():this.getMatrix(r),e&&r.prependMatrix(e);for(var i=this.children.length,s=null,o=0;i>o;o++){var u=this.children[o];u.visible&&(n=u._getBounds(r))&&(s?s.extend(n.x,n.y,n.width,n.height):s=n.clone())}return s},createjs.Container=createjs.promote(e,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.Container_constructor(),this.autoClear=!0,this.canvas="string"==typeof e?document.getElementById(e):e,this.mouseX=0,this.mouseY=0,this.drawRect=null,this.snapToPixelEnabled=!1,this.mouseInBounds=!1,this.tickOnUpdate=!0,this.mouseMoveOutside=!1,this.preventSelection=!0,this._pointerData={},this._pointerCount=0,this._primaryPointerID=null,this._mouseOverIntervalID=null,this._nextStage=null,this._prevStage=null,this.enableDOMEvents(!0)}var t=createjs.extend(e,createjs.Container);t._get_nextStage=function(){return this._nextStage},t._set_nextStage=function(e){this._nextStage&&(this._nextStage._prevStage=null),e&&(e._prevStage=this),this._nextStage=e};try{Object.defineProperties(t,{nextStage:{get:t._get_nextStage,set:t._set_nextStage}})}catch(n){}t.update=function(e){if(this.canvas&&(this.tickOnUpdate&&this.tick(e),this.dispatchEvent("drawstart",!1,!0)!==!1)){createjs.DisplayObject._snapToPixelEnabled=this.snapToPixelEnabled;var t=this.drawRect,n=this.canvas.getContext("2d");n.setTransform(1,0,0,1,0,0),this.autoClear&&(t?n.clearRect(t.x,t.y,t.width,t.height):n.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)),n.save(),this.drawRect&&(n.beginPath(),n.rect(t.x,t.y,t.width,t.height),n.clip()),this.updateContext(n),this.draw(n,!1),n.restore(),this.dispatchEvent("drawend")}},t.tick=function(e){if(this.tickEnabled&&this.dispatchEvent("tickstart",!1,!0)!==!1){var t=new createjs.Event("tick");if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);this._tick(t),this.dispatchEvent("tickend")}},t.handleEvent=function(e){"tick"==e.type&&this.update(e)},t.clear=function(){if(this.canvas){var e=this.canvas.getContext("2d");e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)}},t.toDataURL=function(e,t){var n,r=this.canvas.getContext("2d"),i=this.canvas.width,s=this.canvas.height;if(e){n=r.getImageData(0,0,i,s);var o=r.globalCompositeOperation;r.globalCompositeOperation="destination-over",r.fillStyle=e,r.fillRect(0,0,i,s)}var u=this.canvas.toDataURL(t||"image/png");return e&&(r.putImageData(n,0,0),r.globalCompositeOperation=o),u},t.enableMouseOver=function(e){if(this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null,0==e&&this._testMouseOver(!0)),null==e)e=20;else if(0>=e)return;var t=this;this._mouseOverIntervalID=setInterval(function(){t._testMouseOver()},1e3/Math.min(50,e))},t.enableDOMEvents=function(e){null==e&&(e=!0);var t,n,r=this._eventListeners;if(!e&&r){for(t in r)n=r[t],n.t.removeEventListener(t,n.f,!1);this._eventListeners=null}else if(e&&!r&&this.canvas){var i=window.addEventListener?window:document,s=this;r=this._eventListeners={},r.mouseup={t:i,f:function(e){s._handleMouseUp(e)}},r.mousemove={t:i,f:function(e){s._handleMouseMove(e)}},r.dblclick={t:this.canvas,f:function(e){s._handleDoubleClick(e)}},r.mousedown={t:this.canvas,f:function(e){s._handleMouseDown(e)}};for(t in r)n=r[t],n.t.addEventListener(t,n.f,!1)}},t.clone=function(){throw"Stage cannot be cloned."},t.toString=function(){return"[Stage (name="+this.name+")]"},t._getElementRect=function(e){var t;try{t=e.getBoundingClientRect()}catch(n){t={top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}}var r=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),i=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),s=window.getComputedStyle?getComputedStyle(e,null):e.currentStyle,o=parseInt(s.paddingLeft)+parseInt(s.borderLeftWidth),u=parseInt(s.paddingTop)+parseInt(s.borderTopWidth),a=parseInt(s.paddingRight)+parseInt(s.borderRightWidth),f=parseInt(s.paddingBottom)+parseInt(s.borderBottomWidth);return{left:t.left+r+o,right:t.right+r-a,top:t.top+i+u,bottom:t.bottom+i-f}},t._getPointerData=function(e){var t=this._pointerData[e];return t||(t=this._pointerData[e]={x:0,y:0}),t},t._handleMouseMove=function(e){e||(e=window.event),this._handlePointerMove(-1,e,e.pageX,e.pageY)},t._handlePointerMove=function(e,t,n,r,i){if((!this._prevStage||void 0!==i)&&this.canvas){var s=this._nextStage,o=this._getPointerData(e),u=o.inBounds;this._updatePointerPosition(e,t,n,r),(u||o.inBounds||this.mouseMoveOutside)&&(-1===e&&o.inBounds==!u&&this._dispatchMouseEvent(this,u?"mouseleave":"mouseenter",!1,e,o,t),this._dispatchMouseEvent(this,"stagemousemove",!1,e,o,t),this._dispatchMouseEvent(o.target,"pressmove",!0,e,o,t)),s&&s._handlePointerMove(e,t,n,r,null)}},t._updatePointerPosition=function(e,t,n,r){var i=this._getElementRect(this.canvas);n-=i.left,r-=i.top;var s=this.canvas.width,o=this.canvas.height;n/=(i.right-i.left)/s,r/=(i.bottom-i.top)/o;var u=this._getPointerData(e);(u.inBounds=n>=0&&r>=0&&s-1>=n&&o-1>=r)?(u.x=n,u.y=r):this.mouseMoveOutside&&(u.x=0>n?0:n>s-1?s-1:n,u.y=0>r?0:r>o-1?o-1:r),u.posEvtObj=t,u.rawX=n,u.rawY=r,(e===this._primaryPointerID||-1===e)&&(this.mouseX=u.x,this.mouseY=u.y,this.mouseInBounds=u.inBounds)},t._handleMouseUp=function(e){this._handlePointerUp(-1,e,!1)},t._handlePointerUp=function(e,t,n,r){var i=this._nextStage,s=this._getPointerData(e);if(!this._prevStage||void 0!==r){var o=null,u=s.target;r||!u&&!i||(o=this._getObjectsUnderPoint(s.x,s.y,null,!0)),s.down&&(this._dispatchMouseEvent(this,"stagemouseup",!1,e,s,t,o),s.down=!1),o==u&&this._dispatchMouseEvent(u,"click",!0,e,s,t),this._dispatchMouseEvent(u,"pressup",!0,e,s,t),n?(e==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[e]):s.target=null,i&&i._handlePointerUp(e,t,n,r||o&&this)}},t._handleMouseDown=function(e){this._handlePointerDown(-1,e,e.pageX,e.pageY)},t._handlePointerDown=function(e,t,n,r,i){this.preventSelection&&t.preventDefault(),(null==this._primaryPointerID||-1===e)&&(this._primaryPointerID=e),null!=r&&this._updatePointerPosition(e,t,n,r);var s=null,o=this._nextStage,u=this._getPointerData(e);i||(s=u.target=this._getObjectsUnderPoint(u.x,u.y,null,!0)),u.inBounds&&(this._dispatchMouseEvent(this,"stagemousedown",!1,e,u,t,s),u.down=!0),this._dispatchMouseEvent(s,"mousedown",!0,e,u,t),o&&o._handlePointerDown(e,t,n,r,i||s&&this)},t._testMouseOver=function(e,t,n){if(!this._prevStage||void 0!==t){var r=this._nextStage;if(!this._mouseOverIntervalID)return void (r&&r._testMouseOver(e,t,n));var i=this._getPointerData(-1);if(i&&(e||this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var s,o,u,a=i.posEvtObj,f=n||a&&a.target==this.canvas,l=null,c=-1,h="";!t&&(e||this.mouseInBounds&&f)&&(l=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);var p=this._mouseOverTarget||[],d=p[p.length-1],v=this._mouseOverTarget=[];for(s=l;s;)v.unshift(s),h||(h=s.cursor),s=s.parent;for(this.canvas.style.cursor=h,!t&&n&&(n.canvas.style.cursor=h),o=0,u=v.length;u>o&&v[o]==p[o];o++)c=o;for(d!=l&&this._dispatchMouseEvent(d,"mouseout",!0,-1,i,a,l),o=p.length-1;o>c;o--)this._dispatchMouseEvent(p[o],"rollout",!1,-1,i,a,l);for(o=v.length-1;o>c;o--)this._dispatchMouseEvent(v[o],"rollover",!1,-1,i,a,d);d!=l&&this._dispatchMouseEvent(l,"mouseover",!0,-1,i,a,d),r&&r._testMouseOver(e,t||l&&this,n||f&&this)}}},t._handleDoubleClick=function(e,t){var n=null,r=this._nextStage,i=this._getPointerData(-1);t||(n=this._getObjectsUnderPoint(i.x,i.y,null,!0),this._dispatchMouseEvent(n,"dblclick",!0,-1,i,e)),r&&r._handleDoubleClick(e,t||n&&this)},t._dispatchMouseEvent=function(e,t,n,r,i,s,o){if(e&&(n||e.hasEventListener(t))){var u=new createjs.MouseEvent(t,n,!1,i.x,i.y,s,r,r===this._primaryPointerID||-1===r,i.rawX,i.rawY,o);e.dispatchEvent(u)}},createjs.Stage=createjs.promote(e,"Container")}(),this.createjs=this.createjs||{},function(){function e(e){this.DisplayObject_constructor(),"string"==typeof e?(this.image=document.createElement("img"),this.image.src=e):this.image=e,this.sourceRect=null}var t=createjs.extend(e,createjs.DisplayObject);t.initialize=e,t.isVisible=function(){var e=this.image,t=this.cacheCanvas||e&&(e.naturalWidth||e.getContext||e.readyState>=2);return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},t.draw=function(e,t){if(this.DisplayObject_draw(e,t)||!this.image)return!0;var n=this.image,r=this.sourceRect;if(r){var i=r.x,s=r.y,o=i+r.width,u=s+r.height,a=0,f=0,l=n.width,c=n.height;0>i&&(a-=i,i=0),o>l&&(o=l),0>s&&(f-=s,s=0),u>c&&(u=c),e.drawImage(n,i,s,o-i,u-s,a,f,o-i,u-s)}else e.drawImage(n,0,0);return!0},t.getBounds=function(){var e=this.DisplayObject_getBounds();if(e)return e;var t=this.image,n=this.sourceRect||t,r=t&&(t.naturalWidth||t.getContext||t.readyState>=2);return r?this._rectangle.setValues(0,0,n.width,n.height):null},t.clone=function(){var t=new e(this.image);return this.sourceRect&&(t.sourceRect=this.sourceRect.clone()),this._cloneProps(t),t},t.toString=function(){return"[Bitmap (name="+this.name+")]"},createjs.Bitmap=createjs.promote(e,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.DisplayObject_constructor(),this.currentFrame=0,this.currentAnimation=null,this.paused=!0,this.spriteSheet=e,this.currentAnimationFrame=0,this.framerate=0,this._animation=null,this._currentFrame=null,this._skipAdvance=!1,null!=t&&this.gotoAndPlay(t)}var t=createjs.extend(e,createjs.DisplayObject);t.initialize=e,t.isVisible=function(){var e=this.cacheCanvas||this.spriteSheet.complete;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},t.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;this._normalizeFrame();var n=this.spriteSheet.getFrame(0|this._currentFrame);if(!n)return!1;var r=n.rect;return r.width&&r.height&&e.drawImage(n.image,r.x,r.y,r.width,r.height,-n.regX,-n.regY,r.width,r.height),!0},t.play=function(){this.paused=!1},t.stop=function(){this.paused=!0},t.gotoAndPlay=function(e){this.paused=!1,this._skipAdvance=!0,this._goto(e)},t.gotoAndStop=function(e){this.paused=!0,this._goto(e)},t.advance=function(e){var t=this.framerate||this.spriteSheet.framerate,n=t&&null!=e?e/(1e3/t):1;this._normalizeFrame(n)},t.getBounds=function(){return this.DisplayObject_getBounds()||this.spriteSheet.getFrameBounds(this.currentFrame,this._rectangle)},t.clone=function(){return this._cloneProps(new e(this.spriteSheet))},t.toString=function(){return"[Sprite (name="+this.name+")]"},t._cloneProps=function(e){return this.DisplayObject__cloneProps(e),e.currentFrame=this.currentFrame,e.currentAnimation=this.currentAnimation,e.paused=this.paused,e.currentAnimationFrame=this.currentAnimationFrame,e.framerate=this.framerate,e._animation=this._animation,e._currentFrame=this._currentFrame,e._skipAdvance=this._skipAdvance,e},t._tick=function(e){this.paused||(this._skipAdvance||this.advance(e&&e.delta),this._skipAdvance=!1),this.DisplayObject__tick(e)},t._normalizeFrame=function(e){e=e||0;var t,n=this._animation,r=this.paused,i=this._currentFrame;if(n){var s=n.speed||1,o=this.currentAnimationFrame;if(t=n.frames.length,o+e*s>=t){var u=n.next;if(this._dispatchAnimationEnd(n,i,r,u,t-1))return;if(u)return this._goto(u,e-(t-o)/s);this.paused=!0,o=n.frames.length-1}else o+=e*s;this.currentAnimationFrame=o,this._currentFrame=n.frames[0|o]}else if(i=this._currentFrame+=e,t=this.spriteSheet.getNumFrames(),i>=t&&t>0&&!this._dispatchAnimationEnd(n,i,r,t-1)&&(this._currentFrame-=t)>=t)return this._normalizeFrame();i=0|this._currentFrame,this.currentFrame!=i&&(this.currentFrame=i,this.dispatchEvent("change"))},t._dispatchAnimationEnd=function(e,t,n,r,i){var s=e?e.name:null;if(this.hasEventListener("animationend")){var o=new createjs.Event("animationend");o.name=s,o.next=r,this.dispatchEvent(o)}var u=this._animation!=e||this._currentFrame!=t;return u||n||!this.paused||(this.currentAnimationFrame=i,u=!0),u},t._goto=function(e,t){if(this.currentAnimationFrame=0,isNaN(e)){var n=this.spriteSheet.getAnimation(e);n&&(this._animation=n,this.currentAnimation=e,this._normalizeFrame(t))}else this.currentAnimation=this._animation=null,this._currentFrame=e,this._normalizeFrame()},createjs.Sprite=createjs.promote(e,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.DisplayObject_constructor(),this.graphics=e?e:new createjs.Graphics}var t=createjs.extend(e,createjs.DisplayObject);t.isVisible=function(){var e=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},t.draw=function(e,t){return this.DisplayObject_draw(e,t)?!0:(this.graphics.draw(e,this),!0)},t.clone=function(t){var n=t&&this.graphics?this.graphics.clone():this.graphics;return this._cloneProps(new e(n))},t.toString=function(){return"[Shape (name="+this.name+")]"},createjs.Shape=createjs.promote(e,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n){this.DisplayObject_constructor(),this.text=e,this.font=t,this.color=n,this.textAlign="left",this.textBaseline="top",this.maxWidth=null,this.outline=0,this.lineHeight=0,this.lineWidth=null}var t=createjs.extend(e,createjs.DisplayObject),n=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");n.getContext&&(e._workingContext=n.getContext("2d"),n.width=n.height=1),e.H_OFFSETS={start:0,left:0,center:-0.5,end:-1,right:-1},e.V_OFFSETS={top:0,hanging:-0.01,middle:-0.4,alphabetic:-0.8,ideographic:-0.85,bottom:-1},t.isVisible=function(){var e=this.cacheCanvas||null!=this.text&&""!==this.text;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},t.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;var n=this.color||"#000";return this.outline?(e.strokeStyle=n,e.lineWidth=1*this.outline):e.fillStyle=n,this._drawText(this._prepContext(e)),!0},t.getMeasuredWidth=function(){return this._getMeasuredWidth(this.text)},t.getMeasuredLineHeight=function(){return 1.2*this._getMeasuredWidth("M")},t.getMeasuredHeight=function(){return this._drawText(null,{}).height},t.getBounds=function(){var t=this.DisplayObject_getBounds();if(t)return t;if(null==this.text||""===this.text)return null;var n=this._drawText(null,{}),r=this.maxWidth&&this.maxWidth<n.width?this.maxWidth:n.width,i=r*e.H_OFFSETS[this.textAlign||"left"],s=this.lineHeight||this.getMeasuredLineHeight(),o=s*e.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.setValues(i,o,r,n.height)},t.getMetrics=function(){var t={lines:[]};return t.lineHeight=this.lineHeight||this.getMeasuredLineHeight(),t.vOffset=t.lineHeight*e.V_OFFSETS[this.textBaseline||"top"],this._drawText(null,t,t.lines)},t.clone=function(){return this._cloneProps(new e(this.text,this.font,this.color))},t.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},t._cloneProps=function(e){return this.DisplayObject__cloneProps(e),e.textAlign=this.textAlign,e.textBaseline=this.textBaseline,e.maxWidth=this.maxWidth,e.outline=this.outline,e.lineHeight=this.lineHeight,e.lineWidth=this.lineWidth,e},t._prepContext=function(e){return e.font=this.font||"10px sans-serif",e.textAlign=this.textAlign||"left",e.textBaseline=this.textBaseline||"top",e},t._drawText=function(t,n,r){var i=!!t;i||(t=e._workingContext,t.save(),this._prepContext(t));for(var s=this.lineHeight||this.getMeasuredLineHeight(),o=0,u=0,f=String(this.text).split(/(?:\r\n|\r|\n)/),l=0,c=f.length;c>l;l++){var h=f[l],p=null;if(null!=this.lineWidth&&(p=t.measureText(h).width)>this.lineWidth){var d=h.split(/(\s)/);h=d[0],p=t.measureText(h).width;for(var v=1,m=d.length;m>v;v+=2){var g=t.measureText(d[v]+d[v+1]).width;p+g>this.lineWidth?(i&&this._drawTextLine(t,h,u*s),r&&r.push(h),p>o&&(o=p),h=d[v+1],p=t.measureText(h).width,u++):(h+=d[v]+d[v+1],p+=g)}}i&&this._drawTextLine(t,h,u*s),r&&r.push(h),n&&null==p&&(p=t.measureText(h).width),p>o&&(o=p),u++}return n&&(n.width=o,n.height=u*s),i||t.restore(),n},t._drawTextLine=function(e,t,n){this.outline?e.strokeText(t,0,n,this.maxWidth||65535):e.fillText(t,0,n,this.maxWidth||65535)},t._getMeasuredWidth=function(t){var n=e._workingContext;n.save();var r=this._prepContext(n).measureText(t).width;return n.restore(),r},createjs.Text=createjs.promote(e,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.Container_constructor(),this.text=e||"",this.spriteSheet=t,this.lineHeight=0,this.letterSpacing=0,this.spaceWidth=0,this._oldProps={text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0}}var t=createjs.extend(e,createjs.Container);e.maxPoolSize=100,e._spritePool=[],t.draw=function(e,t){this.DisplayObject_draw(e,t)||(this._updateText(),this.Container_draw(e,t))},t.getBounds=function(){return this._updateText(),this.Container_getBounds()},t.isVisible=function(){var e=this.cacheCanvas||this.spriteSheet&&this.spriteSheet.complete&&this.text;return!!(this.visible&&this.alpha>0&&0!==this.scaleX&&0!==this.scaleY&&e)},t.clone=function(){return this._cloneProps(new e(this.text,this.spriteSheet))},t.addChild=t.addChildAt=t.removeChild=t.removeChildAt=t.removeAllChildren=function(){},t._cloneProps=function(e){return this.Container__cloneProps(e),e.lineHeight=this.lineHeight,e.letterSpacing=this.letterSpacing,e.spaceWidth=this.spaceWidth,e},t._getFrameIndex=function(e,t){var n,r=t.getAnimation(e);return r||(e!=(n=e.toUpperCase())||e!=(n=e.toLowerCase())||(n=null),n&&(r=t.getAnimation(n))),r&&r.frames[0]},t._getFrame=function(e,t){var n=this._getFrameIndex(e,t);return null==n?n:t.getFrame(n)},t._getLineHeight=function(e){var t=this._getFrame("1",e)||this._getFrame("T",e)||this._getFrame("L",e)||e.getFrame(0);return t?t.rect.height:1},t._getSpaceWidth=function(e){var t=this._getFrame("1",e)||this._getFrame("l",e)||this._getFrame("e",e)||this._getFrame("a",e)||e.getFrame(0);return t?t.rect.width:1},t._updateText=function(){var t,n=0,r=0,i=this._oldProps,s=!1,o=this.spaceWidth,u=this.lineHeight,f=this.spriteSheet,l=e._spritePool,c=this.children,h=0,p=c.length;for(var d in i)i[d]!=this[d]&&(i[d]=this[d],s=!0);if(s){var v=!!this._getFrame(" ",f);v||o||(o=this._getSpaceWidth(f)),u||(u=this._getLineHeight(f));for(var m=0,g=this.text.length;g>m;m++){var y=this.text.charAt(m);if(" "!=y||v)if("\n"!=y&&"\r"!=y){var b=this._getFrameIndex(y,f);null!=b&&(p>h?t=c[h]:(c.push(t=l.length?l.pop():new createjs.Sprite),t.parent=this,p++),t.spriteSheet=f,t.gotoAndStop(b),t.x=n,t.y=r,h++,n+=t.getBounds().width+this.letterSpacing)}else"\r"==y&&"\n"==this.text.charAt(m+1)&&m++,n=0,r+=u;else n+=o}for(;p>h;)l.push(t=c.pop()),t.parent=null,p--;l.length>e.maxPoolSize&&(l.length=e.maxPoolSize)}},createjs.BitmapText=createjs.promote(e,"Container")}(),this.createjs=this.createjs||{},function(){"use strict";function e(){throw"SpriteSheetUtils cannot be instantiated"}var t=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");t.getContext&&(e._workingCanvas=t,e._workingContext=t.getContext("2d"),t.width=t.height=1),e.addFlippedFrames=function(t,n,r,i){if(n||r||i){var s=0;n&&e._flip(t,++s,!0,!1),r&&e._flip(t,++s,!1,!0),i&&e._flip(t,++s,!0,!0)}},e.extractFrame=function(t,n){isNaN(n)&&(n=t.getAnimation(n).frames[0]);var r=t.getFrame(n);if(!r)return null;var i=r.rect,s=e._workingCanvas;s.width=i.width,s.height=i.height,e._workingContext.drawImage(r.image,i.x,i.y,i.width,i.height,0,0,i.width,i.height);var o=document.createElement("img");return o.src=s.toDataURL("image/png"),o},e.mergeAlpha=function(e,t,n){n||(n=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),n.width=Math.max(t.width,e.width),n.height=Math.max(t.height,e.height);var r=n.getContext("2d");return r.save(),r.drawImage(e,0,0),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),r.restore(),n},e._flip=function(t,n,r,i){for(var s=t._images,o=e._workingCanvas,u=e._workingContext,f=s.length/n,l=0;f>l;l++){var c=s[l];c.__tmp=l,u.setTransform(1,0,0,1,0,0),u.clearRect(0,0,o.width+1,o.height+1),o.width=c.width,o.height=c.height,u.setTransform(r?-1:1,0,0,i?-1:1,r?c.width:0,i?c.height:0),u.drawImage(c,0,0);var h=document.createElement("img");h.src=o.toDataURL("image/png"),h.width=c.width,h.height=c.height,s.push(h)}var p=t._frames,d=p.length/n;for(l=0;d>l;l++){c=p[l];var v=c.rect.clone();h=s[c.image.__tmp+f*n];var m={image:h,rect:v,regX:c.regX,regY:c.regY};r&&(v.x=h.width-v.x-v.width,m.regX=v.width-c.regX),i&&(v.y=h.height-v.y-v.height,m.regY=v.height-c.regY),p.push(m)}var g="_"+(r?"h":"")+(i?"v":""),y=t._animations,b=t._data,w=y.length/n;for(l=0;w>l;l++){var E=y[l];c=b[E];var S={name:E+g,speed:c.speed,next:c.next,frames:[]};c.next&&(S.next+=g),p=c.frames;for(var x=0,T=p.length;T>x;x++)S.frames.push(p[x]+d*n);b[S.name]=S,y.push(S.name)}},createjs.SpriteSheetUtils=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(){this.EventDispatcher_constructor(),this.maxWidth=2048,this.maxHeight=2048,this.spriteSheet=null,this.scale=1,this.padding=1,this.timeSlice=.3,this.progress=-1,this._frames=[],this._animations={},this._data=null,this._nextFrameIndex=0,this._index=0,this._timerID=null,this._scale=1}var t=createjs.extend(e,createjs.EventDispatcher);e.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",e.ERR_RUNNING="a build is already running",t.addFrame=function(t,n,r,i,s){if(this._data)throw e.ERR_RUNNING;var o=n||t.bounds||t.nominalBounds;return!o&&t.getBounds&&(o=t.getBounds()),o?(r=r||1,this._frames.push({source:t,sourceRect:o,scale:r,funct:i,data:s,index:this._frames.length,height:o.height*r})-1):null},t.addAnimation=function(t,n,r,i){if(this._data)throw e.ERR_RUNNING;this._animations[t]={frames:n,next:r,frequency:i}},t.addMovieClip=function(t,n,r,i,s,o){if(this._data)throw e.ERR_RUNNING;var u=t.frameBounds,f=n||t.bounds||t.nominalBounds;if(!f&&t.getBounds&&(f=t.getBounds()),f||u){var l,c,h=this._frames.length,p=t.timeline.duration;for(l=0;p>l;l++){var d=u&&u[l]?u[l]:f;this.addFrame(t,d,r,this._setupMovieClipFrame,{i:l,f:i,d:s})}var v=t.timeline._labels,m=[];for(var g in v)m.push({index:v[g],label:g});if(m.length)for(m.sort(function(e,t){return e.index-t.index}),l=0,c=m.length;c>l;l++){for(var y=m[l].label,b=h+m[l].index,w=h+(l==c-1?p:m[l+1].index),E=[],S=b;w>S;S++)E.push(S);(!o||(y=o(y,t,b,w)))&&this.addAnimation(y,E,!0)}}},t.build=function(){if(this._data)throw e.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},t.buildAsync=function(t){if(this._data)throw e.ERR_RUNNING;this.timeSlice=t,this._startBuild();var n=this;this._timerID=setTimeout(function(){n._run()},50-50*Math.max(.01,Math.min(.99,this.timeSlice||.3)))},t.stopAsync=function(){clearTimeout(this._timerID),this._data=null},t.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},t.toString=function(){return"[SpriteSheetBuilder]"},t._startBuild=function(){var t=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var n=[];this._data={images:[],frames:n,animations:this._animations};var r=this._frames.slice();if(r.sort(function(e,t){return e.height<=t.height?-1:1}),r[r.length-1].height+2*t>this.maxHeight)throw e.ERR_DIMENSIONS;for(var i=0,s=0,o=0;r.length;){var u=this._fillRow(r,i,o,n,t);if(u.w>s&&(s=u.w),i+=u.h,!u.h||!r.length){var f=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");f.width=this._getSize(s,this.maxWidth),f.height=this._getSize(i,this.maxHeight),this._data.images[o]=f,u.h||(s=i=0,o++)}}},t._setupMovieClipFrame=function(e,t){var n=e.actionsEnabled;e.actionsEnabled=!1,e.gotoAndStop(t.i),e.actionsEnabled=n,t.f&&t.f(e,t.d,t.i)},t._getSize=function(e,t){for(var n=4;Math.pow(2,++n)<e;);return Math.min(t,Math.pow(2,n))},t._fillRow=function(t,n,r,i,s){var o=this.maxWidth,u=this.maxHeight;n+=s;for(var f=u-n,l=s,c=0,h=t.length-1;h>=0;h--){var p=t[h],d=this._scale*p.scale,v=p.sourceRect,m=p.source,g=Math.floor(d*v.x-s),y=Math.floor(d*v.y-s),b=Math.ceil(d*v.height+2*s),w=Math.ceil(d*v.width+2*s);if(w>o)throw e.ERR_DIMENSIONS;b>f||l+w>o||(p.img=r,p.rect=new createjs.Rectangle(l,n,w,b),c=c||b,t.splice(h,1),i[p.index]=[l,n,w,b,r,Math.round(-g+d*m.regX-s),Math.round(-y+d*m.regY-s)],l+=w)}return{w:l,h:c}},t._endBuild=function(){this.spriteSheet=new createjs.SpriteSheet(this._data),this._data=null,this.progress=1,this.dispatchEvent("complete")},t._run=function(){for(var e=50*Math.max(.01,Math.min(.99,this.timeSlice||.3)),t=(new Date).getTime()+e,n=!1;t>(new Date).getTime();)if(!this._drawNext()){n=!0;break}if(n)this._endBuild();else{var r=this;this._timerID=setTimeout(function(){r._run()},50-e)}var i=this.progress=this._index/this._frames.length;if(this.hasEventListener("progress")){var s=new createjs.Event("progress");s.progress=i,this.dispatchEvent(s)}},t._drawNext=function(){var e=this._frames[this._index],t=e.scale*this._scale,n=e.rect,r=e.sourceRect,i=this._data.images[e.img],s=i.getContext("2d");return e.funct&&e.funct(e.source,e.data),s.save(),s.beginPath(),s.rect(n.x,n.y,n.width,n.height),s.clip(),s.translate(Math.ceil(n.x-r.x*t),Math.ceil(n.y-r.y*t)),s.scale(t,t),e.source.draw(s),s.restore(),++this._index<this._frames.length},createjs.SpriteSheetBuilder=createjs.promote(e,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.DisplayObject_constructor(),"string"==typeof e&&(e=document.getElementById(e)),this.mouseEnabled=!1;var t=e.style;t.position="absolute",t.transformOrigin=t.WebkitTransformOrigin=t.msTransformOrigin=t.MozTransformOrigin=t.OTransformOrigin="0% 0%",this.htmlElement=e,this._oldProps=null}var t=createjs.extend(e,createjs.DisplayObject);t.isVisible=function(){return null!=this.htmlElement},t.draw=function(){return!0},t.cache=function(){},t.uncache=function(){},t.updateCache=function(){},t.hitTest=function(){},t.localToGlobal=function(){},t.globalToLocal=function(){},t.localToLocal=function(){},t.clone=function(){throw"DOMElement cannot be cloned."},t.toString=function(){return"[DOMElement (name="+this.name+")]"},t._tick=function(e){var t=this.getStage();t&&t.on("drawend",this._handleDrawEnd,this,!0),this.DisplayObject__tick(e)},t._handleDrawEnd=function(){var e=this.htmlElement;if(e){var t=e.style,n=this.getConcatenatedDisplayProps(this._props),r=n.matrix,i=n.visible?"visible":"hidden";if(i!=t.visibility&&(t.visibility=i),n.visible){var s=this._oldProps,o=s&&s.matrix,u=1e4;if(!o||!o.equals(r)){var a="matrix("+(r.a*u|0)/u+","+(r.b*u|0)/u+","+(r.c*u|0)/u+","+(r.d*u|0)/u+","+(r.tx+.5|0);t.transform=t.WebkitTransform=t.OTransform=t.msTransform=a+","+(r.ty+.5|0)+")",t.MozTransform=a+"px,"+(r.ty+.5|0)+"px)",s||(s=this._oldProps=new createjs.DisplayProps(!0,0/0)),s.matrix.copy(r)}s.alpha!=n.alpha&&(t.opacity=""+(n.alpha*u|0)/u,s.alpha=n.alpha)}}},createjs.DOMElement=createjs.promote(e,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function e(){}var t=e.prototype;t.getBounds=function(e){return e},t.applyFilter=function(e,t,n,r,i,s,o,u){s=s||e,null==o&&(o=t),null==u&&(u=n);try{var a=e.getImageData(t,n,r,i)}catch(f){return!1}return this._applyFilter(a)?(s.putImageData(a,o,u),!0):!1},t.toString=function(){return"[Filter]"},t.clone=function(){return new e},t._applyFilter=function(){return!0},createjs.Filter=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n){(isNaN(e)||0>e)&&(e=0),(isNaN(t)||0>t)&&(t=0),(isNaN(n)||1>n)&&(n=1),this.blurX=0|e,this.blurY=0|t,this.quality=0|n}var t=createjs.extend(e,createjs.Filter);e.MUL_TABLE=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],e.SHG_TABLE=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9],t.getBounds=function(e){var t=0|this.blurX,n=0|this.blurY;if(0>=t&&0>=n)return e;var r=Math.pow(this.quality,.2);return(e||new createjs.Rectangle).pad(t*r+1,n*r+1,t*r+1,n*r+1)},t.clone=function(){return new e(this.blurX,this.blurY,this.quality)},t.toString=function(){return"[BlurFilter]"},t._applyFilter=function(t){var n=this.blurX>>1;if(isNaN(n)||0>n)return!1;var r=this.blurY>>1;if(isNaN(r)||0>r)return!1;if(0==n&&0==r)return!1;var i=this.quality;(isNaN(i)||1>i)&&(i=1),i|=0,i>3&&(i=3),1>i&&(i=1);var s=t.data,o=0,u=0,f=0,l=0,c=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=n+n+1|0,x=r+r+1|0,T=0|t.width,N=0|t.height,C=T-1|0,k=N-1|0,L=n+1|0,A=r+1|0,O={r:0,b:0,g:0,a:0},M=O;for(f=1;S>f;f++)M=M.n={r:0,b:0,g:0,a:0};M.n=O;var _={r:0,b:0,g:0,a:0},D=_;for(f=1;x>f;f++)D=D.n={r:0,b:0,g:0,a:0};D.n=_;for(var P=null,H=0|e.MUL_TABLE[n],B=0|e.SHG_TABLE[n],j=0|e.MUL_TABLE[r],F=0|e.SHG_TABLE[r];i-->0;){p=h=0;var I=H,q=B;for(u=N;--u>-1;){for(d=L*(y=s[0|h]),v=L*(b=s[h+1|0]),m=L*(w=s[h+2|0]),g=L*(E=s[h+3|0]),M=O,f=L;--f>-1;)M.r=y,M.g=b,M.b=w,M.a=E,M=M.n;for(f=1;L>f;f++)l=h+((f>C?C:f)<<2)|0,d+=M.r=s[l],v+=M.g=s[l+1],m+=M.b=s[l+2],g+=M.a=s[l+3],M=M.n;for(P=O,o=0;T>o;o++)s[h++]=d*I>>>q,s[h++]=v*I>>>q,s[h++]=m*I>>>q,s[h++]=g*I>>>q,l=p+((l=o+n+1)<C?l:C)<<2,d-=P.r-(P.r=s[l]),v-=P.g-(P.g=s[l+1]),m-=P.b-(P.b=s[l+2]),g-=P.a-(P.a=s[l+3]),P=P.n;p+=T}for(I=j,q=F,o=0;T>o;o++){for(h=o<<2|0,d=A*(y=s[h])|0,v=A*(b=s[h+1|0])|0,m=A*(w=s[h+2|0])|0,g=A*(E=s[h+3|0])|0,D=_,f=0;A>f;f++)D.r=y,D.g=b,D.b=w,D.a=E,D=D.n;for(c=T,f=1;r>=f;f++)h=c+o<<2,d+=D.r=s[h],v+=D.g=s[h+1],m+=D.b=s[h+2],g+=D.a=s[h+3],D=D.n,k>f&&(c+=T);if(h=o,P=_,i>0)for(u=0;N>u;u++)l=h<<2,s[l+3]=E=g*I>>>q,E>0?(s[l]=d*I>>>q,s[l+1]=v*I>>>q,s[l+2]=m*I>>>q):s[l]=s[l+1]=s[l+2]=0,l=o+((l=u+A)<k?l:k)*T<<2,d-=P.r-(P.r=s[l]),v-=P.g-(P.g=s[l+1]),m-=P.b-(P.b=s[l+2]),g-=P.a-(P.a=s[l+3]),P=P.n,h+=T;else for(u=0;N>u;u++)l=h<<2,s[l+3]=E=g*I>>>q,E>0?(E=255/E,s[l]=(d*I>>>q)*E,s[l+1]=(v*I>>>q)*E,s[l+2]=(m*I>>>q)*E):s[l]=s[l+1]=s[l+2]=0,l=o+((l=u+A)<k?l:k)*T<<2,d-=P.r-(P.r=s[l]),v-=P.g-(P.g=s[l+1]),m-=P.b-(P.b=s[l+2]),g-=P.a-(P.a=s[l+3]),P=P.n,h+=T}}return!0},createjs.BlurFilter=createjs.promote(e,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.alphaMap=e,this._alphaMap=null,this._mapData=null}var t=createjs.extend(e,createjs.Filter);t.clone=function(){var t=new e(this.alphaMap);return t._alphaMap=this._alphaMap,t._mapData=this._mapData,t},t.toString=function(){return"[AlphaMapFilter]"},t._applyFilter=function(e){if(!this.alphaMap)return!0;if(!this._prepAlphaMap())return!1;for(var t=e.data,n=this._mapData,r=0,i=t.length;i>r;r+=4)t[r+3]=n[r]||0;return!0},t._prepAlphaMap=function(){if(!this.alphaMap)return!1;if(this.alphaMap==this._alphaMap&&this._mapData)return!0;this._mapData=null;var e,t=this._alphaMap=this.alphaMap,n=t;t instanceof HTMLCanvasElement?e=n.getContext("2d"):(n=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"),n.width=t.width,n.height=t.height,e=n.getContext("2d"),e.drawImage(t,0,0));try{var r=e.getImageData(0,0,t.width,t.height)}catch(i){return!1}return this._mapData=r.data,!0},createjs.AlphaMapFilter=createjs.promote(e,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.mask=e}var t=createjs.extend(e,createjs.Filter);t.applyFilter=function(e,t,n,r,i,s,o,u){return this.mask?(s=s||e,null==o&&(o=t),null==u&&(u=n),s.save(),e!=s?!1:(s.globalCompositeOperation="destination-in",s.drawImage(this.mask,o,u),s.restore(),!0)):!0},t.clone=function(){return new e(this.mask)},t.toString=function(){return"[AlphaMaskFilter]"},createjs.AlphaMaskFilter=createjs.promote(e,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n,r,i,s,o,u){this.redMultiplier=null!=e?e:1,this.greenMultiplier=null!=t?t:1,this.blueMultiplier=null!=n?n:1,this.alphaMultiplier=null!=r?r:1,this.redOffset=i||0,this.greenOffset=s||0,this.blueOffset=o||0,this.alphaOffset=u||0}var t=createjs.extend(e,createjs.Filter);t.toString=function(){return"[ColorFilter]"},t.clone=function(){return new e(this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)},t._applyFilter=function(e){for(var t=e.data,n=t.length,r=0;n>r;r+=4)t[r]=t[r]*this.redMultiplier+this.redOffset,t[r+1]=t[r+1]*this.greenMultiplier+this.greenOffset,t[r+2]=t[r+2]*this.blueMultiplier+this.blueOffset,t[r+3]=t[r+3]*this.alphaMultiplier+this.alphaOffset;return!0},createjs.ColorFilter=createjs.promote(e,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n,r){this.setColor(e,t,n,r)}var t=e.prototype;e.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],e.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],e.LENGTH=e.IDENTITY_MATRIX.length,t.setColor=function(e,t,n,r){return this.reset().adjustColor(e,t,n,r)},t.reset=function(){return this.copy(e.IDENTITY_MATRIX)},t.adjustColor=function(e,t,n,r){return this.adjustHue(r),this.adjustContrast(t),this.adjustBrightness(e),this.adjustSaturation(n)},t.adjustBrightness=function(e){return 0==e||isNaN(e)?this:(e=this._cleanValue(e,255),this._multiplyMatrix([1,0,0,0,e,0,1,0,0,e,0,0,1,0,e,0,0,0,1,0,0,0,0,0,1]),this)},t.adjustContrast=function(t){if(0==t||isNaN(t))return this;t=this._cleanValue(t,100);var n;return 0>t?n=127+t/100*127:(n=t%1,n=0==n?e.DELTA_INDEX[t]:e.DELTA_INDEX[t<<0]*(1-n)+e.DELTA_INDEX[(t<<0)+1]*n,n=127*n+127),this._multiplyMatrix([n/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1]),this},t.adjustSaturation=function(e){if(0==e||isNaN(e))return this;e=this._cleanValue(e,100);var t=1+(e>0?3*e/100:e/100),n=.3086,r=.6094,i=.082;return this._multiplyMatrix([n*(1-t)+t,r*(1-t),i*(1-t),0,0,n*(1-t),r*(1-t)+t,i*(1-t),0,0,n*(1-t),r*(1-t),i*(1-t)+t,0,0,0,0,0,1,0,0,0,0,0,1]),this},t.adjustHue=function(e){if(0==e||isNaN(e))return this;e=this._cleanValue(e,180)/180*Math.PI;var t=Math.cos(e),n=Math.sin(e),r=.213,i=.715,s=.072;return this._multiplyMatrix([r+t*(1-r)+n*-r,i+t*-i+n*-i,s+t*-s+n*(1-s),0,0,r+t*-r+.143*n,i+t*(1-i)+.14*n,s+t*-s+n*-0.283,0,0,r+t*-r+n*-(1-r),i+t*-i+n*i,s+t*(1-s)+n*s,0,0,0,0,0,1,0,0,0,0,0,1]),this},t.concat=function(t){return t=this._fixMatrix(t),t.length!=e.LENGTH?this:(this._multiplyMatrix(t),this)},t.clone=function(){return(new e).copy(this)},t.toArray=function(){for(var t=[],n=0,r=e.LENGTH;r>n;n++)t[n]=this[n];return t},t.copy=function(t){for(var n=e.LENGTH,r=0;n>r;r++)this[r]=t[r];return this},t.toString=function(){return"[ColorMatrix]"},t._multiplyMatrix=function(e){var t,n,r,i=[];for(t=0;5>t;t++){for(n=0;5>n;n++)i[n]=this[n+5*t];for(n=0;5>n;n++){var s=0;for(r=0;5>r;r++)s+=e[n+5*r]*i[r];this[n+5*t]=s}}},t._cleanValue=function(e,t){return Math.min(t,Math.max(-t,e))},t._fixMatrix=function(t){return t instanceof e&&(t=t.toArray()),t.length<e.LENGTH?t=t.slice(0,t.length).concat(e.IDENTITY_MATRIX.slice(t.length,e.LENGTH)):t.length>e.LENGTH&&(t=t.slice(0,e.LENGTH)),t},createjs.ColorMatrix=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.matrix=e}var t=createjs.extend(e,createjs.Filter);t.toString=function(){return"[ColorMatrixFilter]"},t.clone=function(){return new e(this.matrix)},t._applyFilter=function(e){for(var t,n,r,i,s=e.data,o=s.length,u=this.matrix,a=u[0],f=u[1],l=u[2],c=u[3],h=u[4],p=u[5],d=u[6],v=u[7],m=u[8],g=u[9],y=u[10],b=u[11],w=u[12],E=u[13],S=u[14],x=u[15],T=u[16],N=u[17],C=u[18],k=u[19],L=0;o>L;L+=4)t=s[L],n=s[L+1],r=s[L+2],i=s[L+3],s[L]=t*a+n*f+r*l+i*c+h,s[L+1]=t*p+n*d+r*v+i*m+g,s[L+2]=t*y+n*b+r*w+i*E+S,s[L+3]=t*x+n*T+r*N+i*C+k;return!0},createjs.ColorMatrixFilter=createjs.promote(e,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function e(){throw"Touch cannot be instantiated"}e.isSupported=function(){return!!("ontouchstart"in window||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0)},e.enable=function(t,n,r){return t&&t.canvas&&e.isSupported()?t.__touch?!0:(t.__touch={pointers:{},multitouch:!n,preventDefault:!r,count:0},"ontouchstart"in window?e._IOS_enable(t):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&e._IE_enable(t),!0):!1},e.disable=function(t){t&&("ontouchstart"in window?e._IOS_disable(t):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&e._IE_disable(t),delete t.__touch)},e._IOS_enable=function(t){var n=t.canvas,r=t.__touch.f=function(n){e._IOS_handleEvent(t,n)};n.addEventListener("touchstart",r,!1),n.addEventListener("touchmove",r,!1),n.addEventListener("touchend",r,!1),n.addEventListener("touchcancel",r,!1)},e._IOS_disable=function(e){var t=e.canvas;if(t){var n=e.__touch.f;t.removeEventListener("touchstart",n,!1),t.removeEventListener("touchmove",n,!1),t.removeEventListener("touchend",n,!1),t.removeEventListener("touchcancel",n,!1)}},e._IOS_handleEvent=function(e,t){if(e){e.__touch.preventDefault&&t.preventDefault&&t.preventDefault();for(var n=t.changedTouches,r=t.type,i=0,s=n.length;s>i;i++){var o=n[i],u=o.identifier;o.target==e.canvas&&("touchstart"==r?this._handleStart(e,u,t,o.pageX,o.pageY):"touchmove"==r?this._handleMove(e,u,t,o.pageX,o.pageY):("touchend"==r||"touchcancel"==r)&&this._handleEnd(e,u,t))}}},e._IE_enable=function(t){var n=t.canvas,r=t.__touch.f=function(n){e._IE_handleEvent(t,n)};void 0===window.navigator.pointerEnabled?(n.addEventListener("MSPointerDown",r,!1),window.addEventListener("MSPointerMove",r,!1),window.addEventListener("MSPointerUp",r,!1),window.addEventListener("MSPointerCancel",r,!1),t.__touch.preventDefault&&(n.style.msTouchAction="none")):(n.addEventListener("pointerdown",r,!1),window.addEventListener("pointermove",r,!1),window.addEventListener("pointerup",r,!1),window.addEventListener("pointercancel",r,!1),t.__touch.preventDefault&&(n.style.touchAction="none")),t.__touch.activeIDs={}},e._IE_disable=function(e){var t=e.__touch.f;void 0===window.navigator.pointerEnabled?(window.removeEventListener("MSPointerMove",t,!1),window.removeEventListener("MSPointerUp",t,!1),window.removeEventListener("MSPointerCancel",t,!1),e.canvas&&e.canvas.removeEventListener("MSPointerDown",t,!1)):(window.removeEventListener("pointermove",t,!1),window.removeEventListener("pointerup",t,!1),window.removeEventListener("pointercancel",t,!1),e.canvas&&e.canvas.removeEventListener("pointerdown",t,!1))},e._IE_handleEvent=function(e,t){if(e){e.__touch.preventDefault&&t.preventDefault&&t.preventDefault();var n=t.type,r=t.pointerId,i=e.__touch.activeIDs;if("MSPointerDown"==n||"pointerdown"==n){if(t.srcElement!=e.canvas)return;i[r]=!0,this._handleStart(e,r,t,t.pageX,t.pageY)}else i[r]&&("MSPointerMove"==n||"pointermove"==n?this._handleMove(e,r,t,t.pageX,t.pageY):("MSPointerUp"==n||"MSPointerCancel"==n||"pointerup"==n||"pointercancel"==n)&&(delete i[r],this._handleEnd(e,r,t)))}},e._handleStart=function(e,t,n,r,i){var s=e.__touch;if(s.multitouch||!s.count){var o=s.pointers;o[t]||(o[t]=!0,s.count++,e._handlePointerDown(t,n,r,i))}},e._handleMove=function(e,t,n,r,i){e.__touch.pointers[t]&&e._handlePointerMove(t,n,r,i)},e._handleEnd=function(e,t,n){var r=e.__touch,i=r.pointers;i[t]&&(r.count--,e._handlePointerUp(t,n,!0),delete i[t])},createjs.Touch=e}(),this.createjs=this.createjs||{},function(){"use strict";var e=createjs.EaselJS=createjs.EaselJS||{};e.version="0.8.1",e.buildDate="Thu, 21 May 2015 16:17:39 GMT"}(),this.createjs=this.createjs||{},function(){"use strict";var e=createjs.PreloadJS=createjs.PreloadJS||{};e.version="0.6.1",e.buildDate="Thu, 21 May 2015 16:17:37 GMT"}(),this.createjs=this.createjs||{},function(){"use strict";createjs.proxy=function(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){return e.apply(t,Array.prototype.slice.call(arguments,0).concat(n))}}}(),this.createjs=this.createjs||{},function(){"use strict";function e(){throw"BrowserDetect cannot be instantiated"}var t=e.agent=window.navigator.userAgent;e.isWindowPhone=t.indexOf("IEMobile")>-1||t.indexOf("Windows Phone")>-1,e.isFirefox=t.indexOf("Firefox")>-1,e.isOpera=null!=window.opera,e.isChrome=t.indexOf("Chrome")>-1,e.isIOS=(t.indexOf("iPod")>-1||t.indexOf("iPhone")>-1||t.indexOf("iPad")>-1)&&!e.isWindowPhone,e.isAndroid=t.indexOf("Android")>-1&&!e.isWindowPhone,e.isBlackberry=t.indexOf("Blackberry")>-1,createjs.BrowserDetect=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n){this.Event_constructor("error"),this.title=e,this.message=t,this.data=n}var t=createjs.extend(e,createjs.Event);t.clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)},createjs.ErrorEvent=createjs.promote(e,"Event")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.Event_constructor("progress"),this.loaded=e,this.total=null==t?1:t,this.progress=0==t?0:this.loaded/this.total}var t=createjs.extend(e,createjs.Event);t.clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)},createjs.ProgressEvent=createjs.promote(e,"Event")}(window),function(){function e(t,r){function s(e){if(s[e]!==g)return s[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=s("json-stringify")&&s("json-parse");else{var n,i='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var a=r.stringify,l="function"==typeof a&&w;if(l){(n=function(){return 1}).toJSON=n;try{l="0"===a(0)&&"0"===a(new o)&&'""'==a(new u)&&a(b)===g&&a(g)===g&&a()===g&&"1"===a(n)&&"[1]"==a([n])&&"[null]"==a([g])&&"null"==a(null)&&"[null,null,null]"==a([g,b,null])&&a({a:[n,!0,!1,null,"\0\b\n\f\r	"]})==i&&"1"===a(null,n)&&"[\n 1,\n 2\n]"==a([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==a(new f(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==a(new f(864e13))&&'"-000001-01-01T00:00:00.000Z"'==a(new f(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==a(new f(-1))}catch(c){l=!1}}t=l}if("json-parse"==e){var h=r.parse;if("function"==typeof h)try{if(0===h("0")&&!h(!1)){n=h(i);var p=5==n.a.length&&1===n.a[0];if(p){try{p=!h('"	"')}catch(c){}if(p)try{p=1!==h("01")}catch(c){}if(p)try{p=1!==h("1.")}catch(c){}}}}catch(c){p=!1}t=p}}return s[e]=!!t}t||(t=i.Object()),r||(r=i.Object());var o=t.Number||i.Number,u=t.String||i.String,a=t.Object||i.Object,f=t.Date||i.Date,l=t.SyntaxError||i.SyntaxError,h=t.TypeError||i.TypeError,p=t.Math||i.Math,d=t.JSON||i.JSON;"object"==typeof d&&d&&(r.stringify=d.stringify,r.parse=d.parse);var v,m,g,y=a.prototype,b=y.toString,w=new f(-0xc782b5b800cec);try{w=-109252==w.getUTCFullYear()&&0===w.getUTCMonth()&&1===w.getUTCDate()&&10==w.getUTCHours()&&37==w.getUTCMinutes()&&6==w.getUTCSeconds()&&708==w.getUTCMilliseconds()}catch(E){}if(!s("json")){var S="[object Function]",x="[object Date]",T="[object Number]",N="[object String]",C="[object Array]",k="[object Boolean]",L=s("bug-string-char-index");if(!w)var A=p.floor,O=[0,31,59,90,120,151,181,212,243,273,304,334],M=function(e,t){return O[t]+365*(e-1970)+A((e-1969+(t=+(t>1)))/4)-A((e-1901+t)/100)+A((e-1601+t)/400)};if((v=y.hasOwnProperty)||(v=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=b?v=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,v=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,v.call(this,e)}),m=function(e,t){var r,i,s,o=0;(r=function(){this.valueOf=0}).prototype.valueOf=0,i=new r;for(s in i)v.call(i,s)&&o++;return r=i=null,o?m=2==o?function(e,t){var n,r={},i=b.call(e)==S;for(n in e)i&&"prototype"==n||v.call(r,n)||!(r[n]=1)||!v.call(e,n)||t(n)}:function(e,t){var n,r,i=b.call(e)==S;for(n in e)i&&"prototype"==n||!v.call(e,n)||(r="constructor"===n)||t(n);(r||v.call(e,n="constructor"))&&t(n)}:(i=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],m=function(e,t){var r,s,o=b.call(e)==S,u=!o&&"function"!=typeof e.constructor&&n[typeof e.hasOwnProperty]&&e.hasOwnProperty||v;for(r in e)o&&"prototype"==r||!u.call(e,r)||t(r);for(s=i.length;r=i[--s];u.call(e,r)&&t(r));}),m(e,t)},!s("json-stringify")){var _={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},D="000000",P=function(e,t){return(D+(t||0)).slice(-e)},H="\\u00",B=function(e){for(var t='"',n=0,r=e.length,i=!L||r>10,s=i&&(L?e.split(""):e);r>n;n++){var o=e.charCodeAt(n);switch(o){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=_[o];break;default:if(32>o){t+=H+P(2,o.toString(16));break}t+=i?s[n]:e.charAt(n)}}return t+'"'},j=function(e,t,n,r,i,s,o){var u,a,f,l,c,p,d,y,w,E,S,L,O,_,D,H;try{u=t[e]}catch(F){}if("object"==typeof u&&u)if(a=b.call(u),a!=x||v.call(u,"toJSON"))"function"==typeof u.toJSON&&(a!=T&&a!=N&&a!=C||v.call(u,"toJSON"))&&(u=u.toJSON(e));else if(u>-1/0&&1/0>u){if(M){for(c=A(u/864e5),f=A(c/365.2425)+1970-1;M(f+1,0)<=c;f++);for(l=A((c-M(f,0))/30.42);M(f,l+1)<=c;l++);c=1+c-M(f,l),p=(u%864e5+864e5)%864e5,d=A(p/36e5)%24,y=A(p/6e4)%60,w=A(p/1e3)%60,E=p%1e3}else f=u.getUTCFullYear(),l=u.getUTCMonth(),c=u.getUTCDate(),d=u.getUTCHours(),y=u.getUTCMinutes(),w=u.getUTCSeconds(),E=u.getUTCMilliseconds();u=(0>=f||f>=1e4?(0>f?"-":"+")+P(6,0>f?-f:f):P(4,f))+"-"+P(2,l+1)+"-"+P(2,c)+"T"+P(2,d)+":"+P(2,y)+":"+P(2,w)+"."+P(3,E)+"Z"}else u=null;if(n&&(u=n.call(t,e,u)),null===u)return"null";if(a=b.call(u),a==k)return""+u;if(a==T)return u>-1/0&&1/0>u?""+u:"null";if(a==N)return B(""+u);if("object"==typeof u){for(_=o.length;_--;)if(o[_]===u)throw h();if(o.push(u),S=[],D=s,s+=i,a==C){for(O=0,_=u.length;_>O;O++)L=j(O,u,n,r,i,s,o),S.push(L===g?"null":L);H=S.length?i?"[\n"+s+S.join(",\n"+s)+"\n"+D+"]":"["+S.join(",")+"]":"[]"}else m(r||u,function(e){var t=j(e,u,n,r,i,s,o);t!==g&&S.push(B(e)+":"+(i?" ":"")+t)}),H=S.length?i?"{\n"+s+S.join(",\n"+s)+"\n"+D+"}":"{"+S.join(",")+"}":"{}";return o.pop(),H}};r.stringify=function(e,t,r){var i,s,o,u;if(n[typeof t]&&t)if((u=b.call(t))==S)s=t;else if(u==C){o={};for(var a,f=0,l=t.length;l>f;a=t[f++],u=b.call(a),(u==N||u==T)&&(o[a]=1));}if(r)if((u=b.call(r))==T){if((r-=r%1)>0)for(i="",r>10&&(r=10);i.length<r;i+=" ");}else u==N&&(i=r.length<=10?r:r.slice(0,10));return j("",(a={},a[""]=e,a),s,o,i,"",[])}}if(!s("json-parse")){var F,I,q=u.fromCharCode,R={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},U=function(){throw F=I=null,l()},z=function(){for(var e,t,n,r,i,s=I,o=s.length;o>F;)switch(i=s.charCodeAt(F)){case 9:case 10:case 13:case 32:F++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=L?s.charAt(F):s[F],F++,e;case 34:for(e="@",F++;o>F;)if(i=s.charCodeAt(F),32>i)U();else if(92==i)switch(i=s.charCodeAt(++F)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=R[i],F++;break;case 117:for(t=++F,n=F+4;n>F;F++)i=s.charCodeAt(F),i>=48&&57>=i||i>=97&&102>=i||i>=65&&70>=i||U();e+=q("0x"+s.slice(t,F));break;default:U()}else{if(34==i)break;for(i=s.charCodeAt(F),t=F;i>=32&&92!=i&&34!=i;)i=s.charCodeAt(++F);e+=s.slice(t,F)}if(34==s.charCodeAt(F))return F++,e;U();default:if(t=F,45==i&&(r=!0,i=s.charCodeAt(++F)),i>=48&&57>=i){for(48==i&&(i=s.charCodeAt(F+1),i>=48&&57>=i)&&U(),r=!1;o>F&&(i=s.charCodeAt(F),i>=48&&57>=i);F++);if(46==s.charCodeAt(F)){for(n=++F;o>n&&(i=s.charCodeAt(n),i>=48&&57>=i);n++);n==F&&U(),F=n}if(i=s.charCodeAt(F),101==i||69==i){for(i=s.charCodeAt(++F),(43==i||45==i)&&F++,n=F;o>n&&(i=s.charCodeAt(n),i>=48&&57>=i);n++);n==F&&U(),F=n}return+s.slice(t,F)}if(r&&U(),"true"==s.slice(F,F+4))return F+=4,!0;if("false"==s.slice(F,F+5))return F+=5,!1;if("null"==s.slice(F,F+4))return F+=4,null;U()}return"$"},W=function(e){var t,n;if("$"==e&&U(),"string"==typeof e){if("@"==(L?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=z(),"]"!=e;n||(n=!0))n&&(","==e?(e=z(),"]"==e&&U()):U()),","==e&&U(),t.push(W(e));return t}if("{"==e){for(t={};e=z(),"}"!=e;n||(n=!0))n&&(","==e?(e=z(),"}"==e&&U()):U()),(","==e||"string"!=typeof e||"@"!=(L?e.charAt(0):e[0])||":"!=z())&&U(),t[e.slice(1)]=W(z());return t}U()}return e},X=function(e,t,n){var r=V(e,t,n);r===g?delete e[t]:e[t]=r},V=function(e,t,n){var r,i=e[t];if("object"==typeof i&&i)if(b.call(i)==C)for(r=i.length;r--;)X(i,r,n);else m(i,function(e){X(i,e,n)});return n.call(e,t,i)};r.parse=function(e,t){var n,r;return F=0,I=""+e,n=W(z()),"$"!=z()&&U(),F=I=null,t&&b.call(t)==S?V((r={},r[""]=n,r),"",t):n}}}return r.runInContext=e,r}var t="function"==typeof define&&define.amd,n={"function":!0,object:!0},r=n[typeof exports]&&exports&&!exports.nodeType&&exports,i=n[typeof window]&&window||this,s=r&&n[typeof module]&&module&&!module.nodeType&&"object"==typeof global&&global;if(!s||s.global!==s&&s.window!==s&&s.self!==s||(i=s),r&&!t)e(i,r);else{var o=i.JSON,u=i.JSON3,a=!1,f=e(i,i.JSON3={noConflict:function(){return a||(a=!0,i.JSON=o,i.JSON3=u,o=u=null),f}});i.JSON={parse:f.parse,stringify:f.stringify}}t&&define("../../../lib/createjs-2015.05.21.min",[],function(){return f})}.call(this),function(){var e={};e.appendToHead=function(t){e.getHead().appendChild(t)},e.getHead=function(){return document.head||document.getElementsByTagName("head")[0]},e.getBody=function(){return document.body||document.getElementsByTagName("body")[0]},createjs.DomUtils=e}(),function(){var e={};e.parseXML=function(e,t){var n=null;try{if(window.DOMParser){var r=new DOMParser;n=r.parseFromString(e,t)}}catch(i){}if(!n)try{n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e)}catch(i){n=null}return n},e.parseJSON=function(e){if(null==e)return null;try{return JSON.parse(e)}catch(t){throw t}},createjs.DataUtils=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=createjs.LoadItem.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin=null,this.loadTimeout=n.LOAD_TIMEOUT_DEFAULT}var t=e.prototype={},n=e;n.LOAD_TIMEOUT_DEFAULT=8e3,n.create=function(t){if("string"==typeof t){var r=new e;return r.src=t,r}if(t instanceof n)return t;if(t instanceof Object&&t.src)return null==t.loadTimeout&&(t.loadTimeout=n.LOAD_TIMEOUT_DEFAULT),t;throw new Error("Type not recognized.")},t.set=function(e){for(var t in e)this[t]=e[t];return this},createjs.LoadItem=n}(),function(){var e={};e.ABSOLUTE_PATT=/^(?:\w+:)?\/{2}/i,e.RELATIVE_PATT=/^[./]*?\//i,e.EXTENSION_PATT=/\/?[^/]+\.(\w{1,5})$/i,e.parseURI=function(t){var n={absolute:!1,relative:!1};if(null==t)return n;var r=t.indexOf("?");r>-1&&(t=t.substr(0,r));var i;return e.ABSOLUTE_PATT.test(t)?n.absolute=!0:e.RELATIVE_PATT.test(t)&&(n.relative=!0),(i=t.match(e.EXTENSION_PATT))&&(n.extension=i[1].toLowerCase()),n},e.formatQueryString=function(e,t){if(null==e)throw new Error("You must specify data.");var n=[];for(var r in e)n.push(r+"="+escape(e[r]));return t&&(n=n.concat(t)),n.join("&")},e.buildPath=function(e,t){if(null==t)return e;var n=[],r=e.indexOf("?");if(-1!=r){var i=e.slice(r+1);n=n.concat(i.split("&"))}return-1!=r?e.slice(0,r)+"?"+this._formatQueryString(t,n):e+"?"+this._formatQueryString(t,n)},e.isCrossDomain=function(e){var t=document.createElement("a");t.href=e.src;var n=document.createElement("a");n.href=location.href;var r=""!=t.hostname&&(t.port!=n.port||t.protocol!=n.protocol||t.hostname!=n.hostname);return r},e.isLocal=function(e){var t=document.createElement("a");return t.href=e.src,""==t.hostname&&"file:"==t.protocol},e.isBinary=function(e){switch(e){case createjs.AbstractLoader.IMAGE:case createjs.AbstractLoader.BINARY:return!0;default:return!1}},e.isImageTag=function(e){return e instanceof HTMLImageElement},e.isAudioTag=function(e){return window.HTMLAudioElement?e instanceof HTMLAudioElement:!1},e.isVideoTag=function(e){return window.HTMLVideoElement?e instanceof HTMLVideoElement:!1},e.isText=function(e){switch(e){case createjs.AbstractLoader.TEXT:case createjs.AbstractLoader.JSON:case createjs.AbstractLoader.MANIFEST:case createjs.AbstractLoader.XML:case createjs.AbstractLoader.CSS:case createjs.AbstractLoader.SVG:case createjs.AbstractLoader.JAVASCRIPT:case createjs.AbstractLoader.SPRITESHEET:return!0;default:return!1}},e.getTypeByExtension=function(e){if(null==e)return createjs.AbstractLoader.TEXT;switch(e.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.AbstractLoader.IMAGE;case"ogg":case"mp3":case"webm":return createjs.AbstractLoader.SOUND;case"mp4":case"webm":case"ts":return createjs.AbstractLoader.VIDEO;case"json":return createjs.AbstractLoader.JSON;case"xml":return createjs.AbstractLoader.XML;case"css":return createjs.AbstractLoader.CSS;case"js":return createjs.AbstractLoader.JAVASCRIPT;case"svg":return createjs.AbstractLoader.SVG;default:return createjs.AbstractLoader.TEXT}},createjs.RequestUtils=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=n,this.resultFormatter=null,this._item=e?createjs.LoadItem.create(e):null,this._preferXHR=t,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var t=createjs.extend(e,createjs.EventDispatcher),n=e;n.POST="POST",n.GET="GET",n.BINARY="binary",n.CSS="css",n.IMAGE="image",n.JAVASCRIPT="javascript",n.JSON="json",n.JSONP="jsonp",n.MANIFEST="manifest",n.SOUND="sound",n.VIDEO="video",n.SPRITESHEET="spritesheet",n.SVG="svg",n.TEXT="text",n.XML="xml",t.getItem=function(){return this._item},t.getResult=function(e){return e?this._rawResult:this._result},t.getTag=function(){return this._tag},t.setTag=function(e){this._tag=e},t.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var e=new createjs.Event("initialize");e.loader=this._request,this.dispatchEvent(e),this._request.load()},t.cancel=function(){this.canceled=!0,this.destroy()},t.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},t.getLoadedItems=function(){return this._loadedItems},t._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},t._createTag=function(){return null},t._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},t._sendProgress=function(e){if(!this._isCanceled()){var t=null;"number"==typeof e?(this.progress=e,t=new createjs.ProgressEvent(this.progress)):(t=e,this.progress=e.loaded/e.total,t.progress=this.progress,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(t)}},t._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var e=new createjs.Event("complete");e.rawResult=this._rawResult,null!=this._result&&(e.result=this._result),this.dispatchEvent(e)}},t._sendError=function(e){!this._isCanceled()&&this.hasEventListener("error")&&(null==e&&(e=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(e))},t._isCanceled=function(){return null==window.createjs||this.canceled?!0:!1},t.resultFormatter=null,t.handleEvent=function(e){switch(e.type){case"complete":this._rawResult=e.target._response;var t=this.resultFormatter&&this.resultFormatter(this),n=this;t instanceof Function?t(function(e){n._result=e,n._sendComplete()}):(this._result=t||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(e);break;case"error":this._sendError(e);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(e.type)}},t.buildPath=function(e,t){return createjs.RequestUtils.buildPath(e,t)},t.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=createjs.promote(e,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n){this.AbstractLoader_constructor(e,t,n),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src"}var t=createjs.extend(e,createjs.AbstractLoader);t.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},t._createTag=function(){},t._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},t._formatResult=function(e){return this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR&&(e.getTag().src=e.getResult(!0)),e.getTag()},createjs.AbstractMediaLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";var e=function(e){this._item=e},t=createjs.extend(e,createjs.EventDispatcher);t.load=function(){},t.destroy=function(){},t.cancel=function(){},createjs.AbstractRequest=createjs.promote(e,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n){this.AbstractRequest_constructor(e),this._tag=t,this._tagSrcAttribute=n,this._loadedHandler=createjs.proxy(this._handleTagComplete,this),this._addedToDOM=!1,this._startTagVisibility=null}var t=createjs.extend(e,createjs.AbstractRequest);t.load=function(){this._tag.onload=createjs.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this),this._tag.onerror=createjs.proxy(this._handleError,this);var e=new createjs.Event("initialize");e.loader=this._tag,this.dispatchEvent(e),this._hideTag(),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag[this._tagSrcAttribute]=this._item.src,null==this._tag.parentNode&&(window.document.body.appendChild(this._tag),this._addedToDOM=!0)},t.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},t._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var e=this._tag;("loaded"==e.readyState||"complete"==e.readyState)&&this._handleTagComplete()},t._handleError=function(){this._clean(),this.dispatchEvent("error")},t._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this._showTag(),this.dispatchEvent("complete")},t._handleTimeout=function(){this._clean(),this.dispatchEvent(new createjs.Event("timeout"))},t._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._tag.onerror=null,this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag),clearTimeout(this._loadTimeout)},t._hideTag=function(){this._startTagVisibility=this._tag.style.visibility,this._tag.style.visibility="hidden"},t._showTag=function(){this._tag.style.visibility=this._startTagVisibility},t._handleStalled=function(){},createjs.TagRequest=createjs.promote(e,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n){this.AbstractRequest_constructor(e),this._tag=t,this._tagSrcAttribute=n,this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var t=createjs.extend(e,createjs.TagRequest);t.load=function(){var e=createjs.proxy(this._handleStalled,this);this._stalledCallback=e;var t=createjs.proxy(this._handleProgress,this);this._handleProgress=t,this._tag.addEventListener("stalled",e),this._tag.addEventListener("progress",t),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},t._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var e=this._tag;("loaded"==e.readyState||"complete"==e.readyState)&&this._handleTagComplete()},t._handleStalled=function(){},t._handleProgress=function(e){if(e&&!(e.loaded>0&&0==e.total)){var t=new createjs.ProgressEvent(e.loaded,e.total);this.dispatchEvent(t)}},t._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.removeEventListener("stalled",this._stalledCallback),this._tag.removeEventListener("progress",this._progressCallback),this.TagRequest__clean()},createjs.MediaTagRequest=createjs.promote(e,"TagRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.AbstractRequest_constructor(e),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this),this._handleProgressProxy=createjs.proxy(this._handleProgress,this),this._handleAbortProxy=createjs.proxy(this._handleAbort,this),this._handleErrorProxy=createjs.proxy(this._handleError,this),this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this),this._handleLoadProxy=createjs.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this),!this._createXHR(e)}var t=createjs.extend(e,createjs.AbstractRequest);e.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],t.getResult=function(e){return e&&this._rawResponse?this._rawResponse:this._response},t.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},t.load=function(){if(null==this._request)return void this._handleError();null!=this._request.addEventListener?(this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1)):(this._request.onloadstart=this._handleLoadStartProxy,this._request.onprogress=this._handleProgressProxy,this._request.onabort=this._handleAbortProxy,this._request.onerror=this._handleErrorProxy,this._request.ontimeout=this._handleTimeoutProxy,this._request.onload=this._handleLoadProxy,this._request.onreadystatechange=this._handleReadyStateChangeProxy),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values&&this._item.method!=createjs.AbstractLoader.GET?this._item.method==createjs.AbstractLoader.POST&&this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)):this._request.send()}catch(e){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,e))}},t.setResponseType=function(e){"blob"===e&&(e=window.URL?"blob":"arraybuffer",this._responseType=e),this._request.responseType=e},t.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},t.getResponseHeader=function(e){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(e):null},t._handleProgress=function(e){if(e&&!(e.loaded>0&&0==e.total)){var t=new createjs.ProgressEvent(e.loaded,e.total);this.dispatchEvent(t)}},t._handleLoadStart=function(){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},t._handleAbort=function(e){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,e))},t._handleError=function(e){this._clean(),this.dispatchEvent(new createjs.ErrorEvent(e.message))},t._handleReadyStateChange=function(){4==this._request.readyState&&this._handleLoad()},t._handleLoad=function(){if(!this.loaded){this.loaded=!0;var e=this._checkError();if(e)return void this._handleError(e);if(this._response=this._getResponse(),"arraybuffer"===this._responseType)try{this._response=new Blob([this._response])}catch(t){if(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,"TypeError"===t.name&&window.BlobBuilder){var n=new BlobBuilder;n.append(this._response),this._response=n.getBlob()}}this._clean(),this.dispatchEvent(new createjs.Event("complete"))}},t._handleTimeout=function(e){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,e))},t._checkError=function(){var e=parseInt(this._request.status);switch(e){case 404:case 0:return new Error(e)}return null},t._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(e){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(e){}return null},t._createXHR=function(e){var t=createjs.RequestUtils.isCrossDomain(e),n={},r=null;if(window.XMLHttpRequest)r=new XMLHttpRequest,t&&void 0===r.withCredentials&&window.XDomainRequest&&(r=new XDomainRequest);else{for(var i=0,o=s.ACTIVEX_VERSIONS.length;o>i;i++){var u=s.ACTIVEX_VERSIONS[i];try{r=new ActiveXObject(u);break}catch(a){}}if(null==r)return!1}null==e.mimeType&&createjs.RequestUtils.isText(e.type)&&(e.mimeType="text/plain; charset=utf-8"),e.mimeType&&r.overrideMimeType&&r.overrideMimeType(e.mimeType),this._xhrLevel="string"==typeof r.responseType?2:1;var f=null;if(f=e.method==createjs.AbstractLoader.GET?createjs.RequestUtils.buildPath(e.src,e.values):e.src,r.open(e.method||createjs.AbstractLoader.GET,f,!0),t&&r instanceof XMLHttpRequest&&1==this._xhrLevel&&(n.Origin=location.origin),e.values&&e.method==createjs.AbstractLoader.POST&&(n["Content-Type"]="application/x-www-form-urlencoded"),t||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),e.headers)for(var l in e.headers)n[l]=e.headers[l];for(l in n)r.setRequestHeader(l,n[l]);return r instanceof XMLHttpRequest&&void 0!==e.withCredentials&&(r.withCredentials=e.withCredentials),this._request=r,!0},t._clean=function(){clearTimeout(this._loadTimeout),null!=this._request.removeEventListener?(this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)):(this._request.onloadstart=null,this._request.onprogress=null,this._request.onabort=null,this._request.onerror=null,this._request.ontimeout=null,this._request.onload=null,this._request.onreadystatechange=null)},t.toString=function(){return"[PreloadJS XHRRequest]"},createjs.XHRRequest=createjs.promote(e,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n){this.AbstractLoader_constructor(),this._plugins=[],this._typeCallbacks={},this._extensionCallbacks={},this.next=null,this.maintainScriptOrder=!0,this.stopOnError=!1,this._maxConnections=1,this._availableLoaders=[createjs.ImageLoader,createjs.JavaScriptLoader,createjs.CSSLoader,createjs.JSONLoader,createjs.JSONPLoader,createjs.SoundLoader,createjs.ManifestLoader,createjs.SpriteSheetLoader,createjs.XMLLoader,createjs.SVGLoader,createjs.BinaryLoader,createjs.VideoLoader,createjs.TextLoader],this._defaultLoaderLength=this._availableLoaders.length,this.init(e,t,n)}var t=createjs.extend(e,createjs.AbstractLoader),n=e;t.init=function(e,t,n){this.useXHR=!0,this.preferXHR=!0,this._preferXHR=!0,this.setPreferXHR(e),this._paused=!1,this._basePath=t,this._crossOrigin=n,this._loadStartWasDispatched=!1,this._currentlyLoadingScript=null,this._currentLoads=[],this._loadQueue=[],this._loadQueueBackup=[],this._loadItemsById={},this._loadItemsBySrc={},this._loadedResults={},this._loadedRawResults={},this._numItems=0,this._numItemsLoaded=0,this._scriptOrder=[],this._loadedScripts=[],this._lastProgress=0/0},n.loadTimeout=8e3,n.LOAD_TIMEOUT=0,n.BINARY=createjs.AbstractLoader.BINARY,n.CSS=createjs.AbstractLoader.CSS,n.IMAGE=createjs.AbstractLoader.IMAGE,n.JAVASCRIPT=createjs.AbstractLoader.JAVASCRIPT,n.JSON=createjs.AbstractLoader.JSON,n.JSONP=createjs.AbstractLoader.JSONP,n.MANIFEST=createjs.AbstractLoader.MANIFEST,n.SOUND=createjs.AbstractLoader.SOUND,n.VIDEO=createjs.AbstractLoader.VIDEO,n.SVG=createjs.AbstractLoader.SVG,n.TEXT=createjs.AbstractLoader.TEXT,n.XML=createjs.AbstractLoader.XML,n.POST=createjs.AbstractLoader.POST,n.GET=createjs.AbstractLoader.GET,t.registerLoader=function(e){if(!e||!e.canLoadItem)throw new Error("loader is of an incorrect type.");if(-1!=this._availableLoaders.indexOf(e))throw new Error("loader already exists.");this._availableLoaders.unshift(e)},t.unregisterLoader=function(e){var t=this._availableLoaders.indexOf(e);-1!=t&&t<this._defaultLoaderLength-1&&this._availableLoaders.splice(t,1)},t.setUseXHR=function(e){return this.setPreferXHR(e)},t.setPreferXHR=function(e){return this.preferXHR=0!=e&&null!=window.XMLHttpRequest,this.preferXHR},t.removeAll=function(){this.remove()},t.remove=function(e){var t=null;if(!e||e instanceof Array){if(e)t=e;else if(arguments.length>0)return}else t=[e];var n=!1;if(t){for(;t.length;){var r=t.pop(),i=this.getResult(r);for(s=this._loadQueue.length-1;s>=0;s--)if(o=this._loadQueue[s].getItem(),o.id==r||o.src==r){this._loadQueue.splice(s,1)[0].cancel();break}for(s=this._loadQueueBackup.length-1;s>=0;s--)if(o=this._loadQueueBackup[s].getItem(),o.id==r||o.src==r){this._loadQueueBackup.splice(s,1)[0].cancel();break}if(i)this._disposeItem(this.getItem(r));else for(var s=this._currentLoads.length-1;s>=0;s--){var o=this._currentLoads[s].getItem();if(o.id==r||o.src==r){this._currentLoads.splice(s,1)[0].cancel(),n=!0;break}}}n&&this._loadNext()}else{this.close();for(var u in this._loadItemsById)this._disposeItem(this._loadItemsById[u]);this.init(this.preferXHR,this._basePath)}},t.reset=function(){this.close();for(var e in this._loadItemsById)this._disposeItem(this._loadItemsById[e]);for(var t=[],n=0,r=this._loadQueueBackup.length;r>n;n++)t.push(this._loadQueueBackup[n].getItem());this.loadManifest(t,!1)},t.installPlugin=function(e){if(null!=e&&null!=e.getPreloadHandlers){this._plugins.push(e);var t=e.getPreloadHandlers();if(t.scope=e,null!=t.types)for(var n=0,r=t.types.length;r>n;n++)this._typeCallbacks[t.types[n]]=t;if(null!=t.extensions)for(n=0,r=t.extensions.length;r>n;n++)this._extensionCallbacks[t.extensions[n]]=t}},t.setMaxConnections=function(e){this._maxConnections=e,!this._paused&&this._loadQueue.length>0&&this._loadNext()},t.loadFile=function(e,t,n){if(null==e){var r=new createjs.ErrorEvent("PRELOAD_NO_FILE");return void this._sendError(r)}this._addItem(e,null,n),this.setPaused(t!==!1?!1:!0)},t.loadManifest=function(e,t,r){var i=null,s=null;if(e instanceof Array){if(0==e.length){var o=new createjs.ErrorEvent("PRELOAD_MANIFEST_EMPTY");return void this._sendError(o)}i=e}else if("string"==typeof e)i=[{src:e,type:n.MANIFEST}];else{if("object"!=typeof e){var o=new createjs.ErrorEvent("PRELOAD_MANIFEST_NULL");return void this._sendError(o)}if(void 0!==e.src){if(null==e.type)e.type=n.MANIFEST;else if(e.type!=n.MANIFEST){var o=new createjs.ErrorEvent("PRELOAD_MANIFEST_TYPE");this._sendError(o)}i=[e]}else void 0!==e.manifest&&(i=e.manifest,s=e.path)}for(var u=0,a=i.length;a>u;u++)this._addItem(i[u],s,r);this.setPaused(t!==!1?!1:!0)},t.load=function(){this.setPaused(!1)},t.getItem=function(e){return this._loadItemsById[e]||this._loadItemsBySrc[e]},t.getResult=function(e,t){var n=this._loadItemsById[e]||this._loadItemsBySrc[e];if(null==n)return null;var r=n.id;return t&&this._loadedRawResults[r]?this._loadedRawResults[r]:this._loadedResults[r]},t.getItems=function(e){var t=[];for(var n in this._loadItemsById){var r=this._loadItemsById[n],i=this.getResult(n);(e!==!0||null!=i)&&t.push({item:r,result:i,rawResult:this.getResult(n,!0)})}return t},t.setPaused=function(e){this._paused=e,this._paused||this._loadNext()},t.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0,this.loadStartWasDispatched=!1,this._itemCount=0,this._lastProgress=0/0},t._addItem=function(e,t,n){var r=this._createLoadItem(e,t,n);if(null!=r){var i=this._createLoader(r);null!=i&&("plugins"in i&&(i.plugins=this._plugins),r._loader=i,this._loadQueue.push(i),this._loadQueueBackup.push(i),this._numItems++,this._updateProgress(),(this.maintainScriptOrder&&r.type==createjs.LoadQueue.JAVASCRIPT||r.maintainOrder===!0)&&(this._scriptOrder.push(r),this._loadedScripts.push(null)))}},t._createLoadItem=function(e,t,n){var r=createjs.LoadItem.create(e);if(null==r)return null;var i="",s=n||this._basePath;if(r.src instanceof Object){if(!r.type)return null;if(t){i=t;var o=createjs.RequestUtils.parseURI(t);null==s||o.absolute||o.relative||(i=s+i)}else null!=s&&(i=s)}else{var u=createjs.RequestUtils.parseURI(r.src);u.extension&&(r.ext=u.extension),null==r.type&&(r.type=createjs.RequestUtils.getTypeByExtension(r.ext));var a=r.src;if(!u.absolute&&!u.relative)if(t){i=t;var o=createjs.RequestUtils.parseURI(t);a=t+a,null==s||o.absolute||o.relative||(i=s+i)}else null!=s&&(i=s);r.src=i+r.src}r.path=i,(void 0===r.id||null===r.id||""===r.id)&&(r.id=a);var f=this._typeCallbacks[r.type]||this._extensionCallbacks[r.ext];if(f){var l=f.callback.call(f.scope,r,this);if(l===!1)return null;l===!0||null!=l&&(r._loader=l),u=createjs.RequestUtils.parseURI(r.src),null!=u.extension&&(r.ext=u.extension)}return this._loadItemsById[r.id]=r,this._loadItemsBySrc[r.src]=r,null==r.crossOrigin&&(r.crossOrigin=this._crossOrigin),r},t._createLoader=function(e){if(null!=e._loader)return e._loader;for(var t=this.preferXHR,n=0;n<this._availableLoaders.length;n++){var r=this._availableLoaders[n];if(r&&r.canLoadItem(e))return new r(e,t)}return null},t._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded?(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load()):this.loaded=!1;for(var e=0;e<this._loadQueue.length&&!(this._currentLoads.length>=this._maxConnections);e++){var t=this._loadQueue[e];this._canStartLoad(t)&&(this._loadQueue.splice(e,1),e--,this._loadItem(t))}}},t._loadItem=function(e){e.on("fileload",this._handleFileLoad,this),e.on("progress",this._handleProgress,this),e.on("complete",this._handleFileComplete,this),e.on("error",this._handleError,this),e.on("fileerror",this._handleFileError,this),this._currentLoads.push(e),this._sendFileStart(e.getItem()),e.load()},t._handleFileLoad=function(e){e.target=null,this.dispatchEvent(e)},t._handleFileError=function(e){var t=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,e.item);this._sendError(t)},t._handleError=function(e){var t=e.target;this._numItemsLoaded++,this._finishOrderedItem(t,!0),this._updateProgress();var n=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,t.getItem());this._sendError(n),this.stopOnError?this.setPaused(!0):(this._removeLoadItem(t),this._cleanLoadItem(t),this._loadNext())},t._handleFileComplete=function(e){var t=e.target,n=t.getItem(),r=t.getResult();this._loadedResults[n.id]=r;var i=t.getResult(!0);null!=i&&i!==r&&(this._loadedRawResults[n.id]=i),this._saveLoadedItems(t),this._removeLoadItem(t),this._finishOrderedItem(t)||this._processFinishedLoad(n,t),this._cleanLoadItem(t)},t._saveLoadedItems=function(e){var t=e.getLoadedItems();if(null!==t)for(var n=0;n<t.length;n++){var r=t[n].item;this._loadItemsBySrc[r.src]=r,this._loadItemsById[r.id]=r,this._loadedResults[r.id]=t[n].result,this._loadedRawResults[r.id]=t[n].rawResult}},t._finishOrderedItem=function(e,t){var n=e.getItem();if(this.maintainScriptOrder&&n.type==createjs.LoadQueue.JAVASCRIPT||n.maintainOrder){e instanceof createjs.JavaScriptLoader&&(this._currentlyLoadingScript=!1);var r=createjs.indexOf(this._scriptOrder,n);return-1==r?!1:(this._loadedScripts[r]=t===!0?!0:n,this._checkScriptLoadOrder(),!0)}return!1},t._checkScriptLoadOrder=function(){for(var e=this._loadedScripts.length,t=0;e>t;t++){var n=this._loadedScripts[t];if(null===n)break;if(n!==!0){var r=this._loadedResults[n.id];n.type==createjs.LoadQueue.JAVASCRIPT&&createjs.DomUtils.appendToHead(r);var i=n._loader;this._processFinishedLoad(n,i),this._loadedScripts[t]=!0}}},t._processFinishedLoad=function(e,t){this._numItemsLoaded++,this.maintainScriptOrder||e.type!=createjs.LoadQueue.JAVASCRIPT||createjs.DomUtils.appendToHead(e.result),this._updateProgress(),this._sendFileComplete(e,t),this._loadNext()},t._canStartLoad=function(e){if(!this.maintainScriptOrder||e.preferXHR)return!0;var t=e.getItem();if(t.type!=createjs.LoadQueue.JAVASCRIPT)return!0;if(this._currentlyLoadingScript)return!1;for(var n=this._scriptOrder.indexOf(t),r=0;n>r;){var i=this._loadedScripts[r];if(null==i)return!1;r++}return this._currentlyLoadingScript=!0,!0},t._removeLoadItem=function(e){for(var t=this._currentLoads.length,n=0;t>n;n++)if(this._currentLoads[n]==e){this._currentLoads.splice(n,1);break}},t._cleanLoadItem=function(e){var t=e.getItem();t&&delete t._loader},t._handleProgress=function(e){var t=e.target;this._sendFileProgress(t.getItem(),t.progress),this._updateProgress()},t._updateProgress=function(){var e=this._numItemsLoaded/this._numItems,t=this._numItems-this._numItemsLoaded;if(t>0){for(var n=0,r=0,i=this._currentLoads.length;i>r;r++)n+=this._currentLoads[r].progress;e+=n/t*(t/this._numItems)}this._lastProgress!=e&&(this._sendProgress(e),this._lastProgress=e)},t._disposeItem=function(e){delete this._loadedResults[e.id],delete this._loadedRawResults[e.id],delete this._loadItemsById[e.id],delete this._loadItemsBySrc[e.src]},t._sendFileProgress=function(e,t){if(!this._isCanceled()&&!this._paused&&this.hasEventListener("fileprogress")){var n=new createjs.Event("fileprogress");n.progress=t,n.loaded=t,n.total=1,n.item=e,this.dispatchEvent(n)}},t._sendFileComplete=function(e,t){if(!this._isCanceled()&&!this._paused){var n=new createjs.Event("fileload");n.loader=t,n.item=e,n.result=this._loadedResults[e.id],n.rawResult=this._loadedRawResults[e.id],e.completeHandler&&e.completeHandler(n),this.hasEventListener("fileload")&&this.dispatchEvent(n)}},t._sendFileStart=function(e){var t=new createjs.Event("filestart");t.item=e,this.hasEventListener("filestart")&&this.dispatchEvent(t)},t.toString=function(){return"[PreloadJS LoadQueue]"},createjs.LoadQueue=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.AbstractLoader_constructor(e,!0,createjs.AbstractLoader.TEXT)}var t=(createjs.extend(e,createjs.AbstractLoader),e);t.canLoadItem=function(e){return e.type==createjs.AbstractLoader.TEXT},createjs.TextLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.AbstractLoader_constructor(e,!0,createjs.AbstractLoader.BINARY),this.on("initialize",this._updateXHR,this)}var t=createjs.extend(e,createjs.AbstractLoader),n=e;n.canLoadItem=function(e){return e.type==createjs.AbstractLoader.BINARY},t._updateXHR=function(e){e.loader.setResponseType("arraybuffer")},createjs.BinaryLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.AbstractLoader_constructor(e,t,createjs.AbstractLoader.CSS),this.resultFormatter=this._formatResult,this._tagSrcAttribute="href",this._tag=document.createElement(t?"style":"link"),this._tag.rel="stylesheet",this._tag.type="text/css"}var t=createjs.extend(e,createjs.AbstractLoader),n=e;n.canLoadItem=function(e){return e.type==createjs.AbstractLoader.CSS},t._formatResult=function(e){if(this._preferXHR){var t=e.getTag();if(t.styleSheet)t.styleSheet.cssText=e.getResult(!0);else{var n=document.createTextNode(e.getResult(!0));t.appendChild(n)}}else t=this._tag;return createjs.DomUtils.appendToHead(t),t},createjs.CSSLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.AbstractLoader_constructor(e,t,createjs.AbstractLoader.IMAGE),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",createjs.RequestUtils.isImageTag(e)?this._tag=e:createjs.RequestUtils.isImageTag(e.src)?this._tag=e.src:createjs.RequestUtils.isImageTag(e.tag)&&(this._tag=e.tag),null!=this._tag?this._preferXHR=!1:this._tag=document.createElement("img"),this.on("initialize",this._updateXHR,this)}var t=createjs.extend(e,createjs.AbstractLoader),n=e;n.canLoadItem=function(e){return e.type==createjs.AbstractLoader.IMAGE},t.load=function(){if(""!=this._tag.src&&this._tag.complete)return void this._sendComplete();var e=this._item.crossOrigin;1==e&&(e="Anonymous"),null==e||createjs.RequestUtils.isLocal(this._item.src)||(this._tag.crossOrigin=e),this.AbstractLoader_load()},t._updateXHR=function(e){e.loader.mimeType="text/plain; charset=x-user-defined-binary",e.loader.setResponseType&&e.loader.setResponseType("blob")},t._formatResult=function(e){var t=this;return function(n){var r=t._tag,i=window.URL||window.webkitURL;if(t._preferXHR)if(i){var s=i.createObjectURL(e.getResult(!0));r.src=s,r.onload=function(){i.revokeObjectURL(t.src)}}else r.src=e.getItem().src;r.complete?n(r):r.onload=function(){n(this)}}},createjs.ImageLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.AbstractLoader_constructor(e,t,createjs.AbstractLoader.JAVASCRIPT),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.setTag(document.createElement("script"))}var t=createjs.extend(e,createjs.AbstractLoader),n=e;n.canLoadItem=function(e){return e.type==createjs.AbstractLoader.JAVASCRIPT},t._formatResult=function(e){var t=e.getTag();return this._preferXHR&&(t.text=e.getResult(!0)),t},createjs.JavaScriptLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.AbstractLoader_constructor(e,!0,createjs.AbstractLoader.JSON),this.resultFormatter=this._formatResult}var t=createjs.extend(e,createjs.AbstractLoader),n=e;n.canLoadItem=function(e){return e.type==createjs.AbstractLoader.JSON&&!e._loadAsJSONP},t._formatResult=function(e){var t=null;try{t=createjs.DataUtils.parseJSON(e.getResult(!0))}catch(n){var r=new createjs.ErrorEvent("JSON_FORMAT",null,n);return this._sendError(r),n}return t},createjs.JSONLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.AbstractLoader_constructor(e,!1,createjs.AbstractLoader.JSONP),this.setTag(document.createElement("script")),this.getTag().type="text/javascript"}var t=createjs.extend(e,createjs.AbstractLoader),n=e;n.canLoadItem=function(e){return e.type==createjs.AbstractLoader.JSONP||e._loadAsJSONP},t.cancel=function(){this.AbstractLoader_cancel(),this._dispose()},t.load=function(){if(null==this._item.callback)throw new Error("callback is required for loading JSONP requests.");if(null!=window[this._item.callback])throw new Error("JSONP callback '"+this._item.callback+"' already exists on window. You need to specify a different callback or re-name the current one.");window[this._item.callback]=createjs.proxy(this._handleLoad,this),window.document.body.appendChild(this._tag),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag.src=this._item.src},t._handleLoad=function(e){this._result=this._rawResult=e,this._sendComplete(),this._dispose()},t._handleTimeout=function(){this._dispose(),this.dispatchEvent(new createjs.ErrorEvent("timeout"))},t._dispose=function(){window.document.body.removeChild(this._tag),delete window[this._item.callback],clearTimeout(this._loadTimeout)},createjs.JSONPLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.AbstractLoader_constructor(e,null,createjs.AbstractLoader.MANIFEST),this.plugins=null,this._manifestQueue=null}var t=createjs.extend(e,createjs.AbstractLoader),n=e;n.MANIFEST_PROGRESS=.25,n.canLoadItem=function(e){return e.type==createjs.AbstractLoader.MANIFEST},t.load=function(){this.AbstractLoader_load()},t._createRequest=function(){var e=this._item.callback;this._request=null!=e?new createjs.JSONPLoader(this._item):new createjs.JSONLoader(this._item)},t.handleEvent=function(e){switch(e.type){case"complete":return this._rawResult=e.target.getResult(!0),this._result=e.target.getResult(),this._sendProgress(n.MANIFEST_PROGRESS),void this._loadManifest(this._result);case"progress":return e.loaded*=n.MANIFEST_PROGRESS,this.progress=e.loaded/e.total,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0),void this._sendProgress(e)}this.AbstractLoader_handleEvent(e)},t.destroy=function(){this.AbstractLoader_destroy(),this._manifestQueue.close()},t._loadManifest=function(e){if(e&&e.manifest){var t=this._manifestQueue=new createjs.LoadQueue;t.on("fileload",this._handleManifestFileLoad,this),t.on("progress",this._handleManifestProgress,this),t.on("complete",this._handleManifestComplete,this,!0),t.on("error",this._handleManifestError,this,!0);for(var n=0,r=this.plugins.length;r>n;n++)t.installPlugin(this.plugins[n]);t.loadManifest(e)}else this._sendComplete()},t._handleManifestFileLoad=function(e){e.target=null,this.dispatchEvent(e)},t._handleManifestComplete=function(){this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},t._handleManifestProgress=function(e){this.progress=e.progress*(1-n.MANIFEST_PROGRESS)+n.MANIFEST_PROGRESS,this._sendProgress(this.progress)},t._handleManifestError=function(e){var t=new createjs.Event("fileerror");t.item=e.data,this.dispatchEvent(t)},createjs.ManifestLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.AbstractMediaLoader_constructor(e,t,createjs.AbstractLoader.SOUND),createjs.RequestUtils.isAudioTag(e)?this._tag=e:createjs.RequestUtils.isAudioTag(e.src)?this._tag=e:createjs.RequestUtils.isAudioTag(e.tag)&&(this._tag=createjs.RequestUtils.isAudioTag(e)?e:e.src),null!=this._tag&&(this._preferXHR=!1)}var t=createjs.extend(e,createjs.AbstractMediaLoader),n=e;n.canLoadItem=function(e){return e.type==createjs.AbstractLoader.SOUND},t._createTag=function(e){var t=document.createElement("audio");return t.autoplay=!1,t.preload="none",t.src=e,t},createjs.SoundLoader=createjs.promote(e,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.AbstractMediaLoader_constructor(e,t,createjs.AbstractLoader.VIDEO),createjs.RequestUtils.isVideoTag(e)||createjs.RequestUtils.isVideoTag(e.src)?(this.setTag(createjs.RequestUtils.isVideoTag(e)?e:e.src),this._preferXHR=!1):this.setTag(this._createTag())}var t=createjs.extend(e,createjs.AbstractMediaLoader),n=e;t._createTag=function(){return document.createElement("video")},n.canLoadItem=function(e){return e.type==createjs.AbstractLoader.VIDEO},createjs.VideoLoader=createjs.promote(e,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.AbstractLoader_constructor(e,null,createjs.AbstractLoader.SPRITESHEET),this._manifestQueue=null}var t=createjs.extend(e,createjs.AbstractLoader),n=e;n.SPRITESHEET_PROGRESS=.25,n.canLoadItem=function(e){return e.type==createjs.AbstractLoader.SPRITESHEET},t.destroy=function(){this.AbstractLoader_destroy,this._manifestQueue.close()},t._createRequest=function(){var e=this._item.callback;this._request=null!=e&&e instanceof Function?new createjs.JSONPLoader(this._item):new createjs.JSONLoader(this._item)},t.handleEvent=function(e){switch(e.type){case"complete":return this._rawResult=e.target.getResult(!0),this._result=e.target.getResult(),this._sendProgress(n.SPRITESHEET_PROGRESS),void this._loadManifest(this._result);case"progress":return e.loaded*=n.SPRITESHEET_PROGRESS,this.progress=e.loaded/e.total,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0),void this._sendProgress(e)}this.AbstractLoader_handleEvent(e)},t._loadManifest=function(e){if(e&&e.images){var t=this._manifestQueue=new createjs.LoadQueue;t.on("complete",this._handleManifestComplete,this,!0),t.on("fileload",this._handleManifestFileLoad,this),t.on("progress",this._handleManifestProgress,this),t.on("error",this._handleManifestError,this,!0),t.loadManifest(e.images)}},t._handleManifestFileLoad=function(e){var t=e.result;if(null!=t){var n=this.getResult().images,r=n.indexOf(e.item.src);n[r]=t}},t._handleManifestComplete=function(){this._result=new createjs.SpriteSheet(this._result),this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},t._handleManifestProgress=function(e){this.progress=e.progress*(1-n.SPRITESHEET_PROGRESS)+n.SPRITESHEET_PROGRESS,this._sendProgress(this.progress)},t._handleManifestError=function(e){var t=new createjs.Event("fileerror");t.item=e.data,this.dispatchEvent(t)},createjs.SpriteSheetLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.AbstractLoader_constructor(e,t,createjs.AbstractLoader.SVG),this.resultFormatter=this._formatResult,this._tagSrcAttribute="data",t?this.setTag(document.createElement("svg")):(this.setTag(document.createElement("object")),this.getTag().type="image/svg+xml")}var t=createjs.extend(e,createjs.AbstractLoader),n=e;n.canLoadItem=function(e){return e.type==createjs.AbstractLoader.SVG},t._formatResult=function(e){var t=createjs.DataUtils.parseXML(e.getResult(!0),"text/xml"),n=e.getTag();return!this._preferXHR&&document.body.contains(n)&&document.body.removeChild(n),null!=t.documentElement?(n.appendChild(t.documentElement),n.style.visibility="visible",n):t},createjs.SVGLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.AbstractLoader_constructor(e,!0,createjs.AbstractLoader.XML),this.resultFormatter=this._formatResult}var t=createjs.extend(e,createjs.AbstractLoader),n=e;n.canLoadItem=function(e){return e.type==createjs.AbstractLoader.XML},t._formatResult=function(e){return createjs.DataUtils.parseXML(e.getResult(!0),"text/xml")},createjs.XMLLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){var e=createjs.SoundJS=createjs.SoundJS||{};e.version="0.6.1",e.buildDate="Thu, 21 May 2015 16:17:37 GMT"}(),this.createjs=this.createjs||{},createjs.indexOf=function(e,t){"use strict";for(var n=0,r=e.length;r>n;n++)if(t===e[n])return n;return-1},this.createjs=this.createjs||{},function(){"use strict";createjs.proxy=function(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){return e.apply(t,Array.prototype.slice.call(arguments,0).concat(n))}}}(),this.createjs=this.createjs||{},function(){"use strict";var e=function(){this.interrupt=null,this.delay=null,this.offset=null,this.loop=null,this.volume=null,this.pan=null,this.startTime=null,this.duration=null},t=e.prototype={},n=e;n.create=function(e){if(e instanceof n||e instanceof Object){var t=new createjs.PlayPropsConfig;return t.set(e),t}throw new Error("Type not recognized.")},t.set=function(e){for(var t in e)this[t]=e[t];return this},t.toString=function(){return"[PlayPropsConfig]"},createjs.PlayPropsConfig=n}(),this.createjs=this.createjs||{},function(){"use strict";function e(){throw"Sound cannot be instantiated"}function t(e,t){this.init(e,t)}var n=e;n.INTERRUPT_ANY="any",n.INTERRUPT_EARLY="early",n.INTERRUPT_LATE="late",n.INTERRUPT_NONE="none",n.PLAY_INITED="playInited",n.PLAY_SUCCEEDED="playSucceeded",n.PLAY_INTERRUPTED="playInterrupted",n.PLAY_FINISHED="playFinished",n.PLAY_FAILED="playFailed",n.SUPPORTED_EXTENSIONS=["mp3","ogg","opus","mpeg","wav","m4a","mp4","aiff","wma","mid"],n.EXTENSION_MAP={m4a:"mp4"},n.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/,n.defaultInterruptBehavior=n.INTERRUPT_NONE,n.alternateExtensions=[],n.activePlugin=null,n._masterVolume=1,Object.defineProperty(n,"volume",{get:function(){return this._masterVolume},set:function(e){if(null==Number(e))return!1;if(e=Math.max(0,Math.min(1,e)),n._masterVolume=e,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(e))for(var t=this._instances,r=0,i=t.length;i>r;r++)t[r].setMasterVolume(e)}}),n._masterMute=!1,Object.defineProperty(n,"muted",{get:function(){return this._masterMute},set:function(e){if(null==e)return!1;if(this._masterMute=e,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(e))for(var t=this._instances,n=0,r=t.length;r>n;n++)t[n].setMasterMute(e);return!0}}),Object.defineProperty(n,"capabilities",{get:function(){return null==n.activePlugin?null:n.activePlugin._capabilities},set:function(){return!1}}),n._pluginsRegistered=!1,n._lastID=0,n._instances=[],n._idHash={},n._preloadHash={},n._defaultPlayPropsHash={},n.addEventListener=null,n.removeEventListener=null,n.removeAllEventListeners=null,n.dispatchEvent=null,n.hasEventListener=null,n._listeners=null,createjs.EventDispatcher.initialize(n),n.getPreloadHandlers=function(){return{callback:createjs.proxy(n.initLoad,n),types:["sound"],extensions:n.SUPPORTED_EXTENSIONS}},n._handleLoadComplete=function(e){var t=e.target.getItem().src;if(n._preloadHash[t])for(var r=0,i=n._preloadHash[t].length;i>r;r++){var s=n._preloadHash[t][r];if(n._preloadHash[t][r]=!0,n.hasEventListener("fileload")){var e=new createjs.Event("fileload");e.src=s.src,e.id=s.id,e.data=s.data,e.sprite=s.sprite,n.dispatchEvent(e)}}},n._handleLoadError=function(e){var t=e.target.getItem().src;if(n._preloadHash[t])for(var r=0,i=n._preloadHash[t].length;i>r;r++){var s=n._preloadHash[t][r];if(n._preloadHash[t][r]=!1,n.hasEventListener("fileerror")){var e=new createjs.Event("fileerror");e.src=s.src,e.id=s.id,e.data=s.data,e.sprite=s.sprite,n.dispatchEvent(e)}}},n._registerPlugin=function(e){return e.isSupported()?(n.activePlugin=new e,!0):!1},n.registerPlugins=function(e){n._pluginsRegistered=!0;for(var t=0,r=e.length;r>t;t++)if(n._registerPlugin(e[t]))return!0;return!1},n.initializeDefaultPlugins=function(){return null!=n.activePlugin?!0:n._pluginsRegistered?!1:n.registerPlugins([createjs.WebAudioPlugin,createjs.HTMLAudioPlugin])?!0:!1},n.isReady=function(){return null!=n.activePlugin},n.getCapabilities=function(){return null==n.activePlugin?null:n.activePlugin._capabilities},n.getCapability=function(e){return null==n.activePlugin?null:n.activePlugin._capabilities[e]},n.initLoad=function(e){return n._registerSound(e)},n._registerSound=function(e){if(!n.initializeDefaultPlugins())return!1;var r;if(e.src instanceof Object?(r=n._parseSrc(e.src),r.src=e.path+r.src):r=n._parsePath(e.src),null==r)return!1;e.src=r.src,e.type="sound";var i=e.data,s=null;if(null!=i&&(isNaN(i.channels)?isNaN(i)||(s=parseInt(i)):s=parseInt(i.channels),i.audioSprite))for(var o,u=i.audioSprite.length;u--;)o=i.audioSprite[u],n._idHash[o.id]={src:e.src,startTime:parseInt(o.startTime),duration:parseInt(o.duration)},o.defaultPlayProps&&(n._defaultPlayPropsHash[o.id]=createjs.PlayPropsConfig.create(o.defaultPlayProps));null!=e.id&&(n._idHash[e.id]={src:e.src});var a=n.activePlugin.register(e);return t.create(e.src,s),null!=i&&isNaN(i)?e.data.channels=s||t.maxPerChannel():e.data=s||t.maxPerChannel(),a.type&&(e.type=a.type),e.defaultPlayProps&&(n._defaultPlayPropsHash[e.src]=createjs.PlayPropsConfig.create(e.defaultPlayProps)),a},n.registerSound=function(e,t,r,i,s){var o={src:e,id:t,data:r,defaultPlayProps:s};e instanceof Object&&e.src&&(i=t,o=e),o=createjs.LoadItem.create(o),o.path=i,null==i||o.src instanceof Object||(o.src=i+e);var u=n._registerSound(o);if(!u)return!1;if(n._preloadHash[o.src]||(n._preloadHash[o.src]=[]),n._preloadHash[o.src].push(o),1==n._preloadHash[o.src].length)u.on("complete",createjs.proxy(this._handleLoadComplete,this)),u.on("error",createjs.proxy(this._handleLoadError,this)),n.activePlugin.preload(u);else if(1==n._preloadHash[o.src][0])return!0;return o},n.registerSounds=function(e,t){var n=[];e.path&&(t?t+=e.path:t=e.path,e=e.manifest);for(var r=0,i=e.length;i>r;r++)n[r]=createjs.Sound.registerSound(e[r].src,e[r].id,e[r].data,t,e[r].defaultPlayProps);return n},n.removeSound=function(e,r){if(null==n.activePlugin)return!1;e instanceof Object&&e.src&&(e=e.src);var i;if(e instanceof Object?i=n._parseSrc(e):(e=n._getSrcById(e).src,i=n._parsePath(e)),null==i)return!1;e=i.src,null!=r&&(e=r+e);for(var s in n._idHash)n._idHash[s].src==e&&delete n._idHash[s];return t.removeSrc(e),delete n._preloadHash[e],n.activePlugin.removeSound(e),!0},n.removeSounds=function(e,t){var n=[];e.path&&(t?t+=e.path:t=e.path,e=e.manifest);for(var r=0,i=e.length;i>r;r++)n[r]=createjs.Sound.removeSound(e[r].src,t);return n},n.removeAllSounds=function(){n._idHash={},n._preloadHash={},t.removeAll(),n.activePlugin&&n.activePlugin.removeAllSounds()},n.loadComplete=function(e){if(!n.isReady())return!1;var t=n._parsePath(e);return e=t?n._getSrcById(t.src).src:n._getSrcById(e).src,void 0==n._preloadHash[e]?!1:1==n._preloadHash[e][0]},n._parsePath=function(e){"string"!=typeof e&&(e=e.toString());var t=e.match(n.FILE_PATTERN);if(null==t)return!1;for(var r=t[4],i=t[5],s=n.capabilities,o=0;!s[i];)if(i=n.alternateExtensions[o++],o>n.alternateExtensions.length)return null;e=e.replace("."+t[5],"."+i);var u={name:r,src:e,extension:i};return u},n._parseSrc=function(e){var t={name:void 0,src:void 0,extension:void 0},r=n.capabilities;for(var i in e)if(e.hasOwnProperty(i)&&r[i]){t.src=e[i],t.extension=i;break}if(!t.src)return!1;var s=t.src.lastIndexOf("/");return t.name=-1!=s?t.src.slice(s+1):t.src,t},n.play=function(e,t,r,i,s,o,u,a,f){var l;l=createjs.PlayPropsConfig.create(t instanceof Object||t instanceof createjs.PlayPropsConfig?t:{interrupt:t,delay:r,offset:i,loop:s,volume:o,pan:u,startTime:a,duration:f});var h=n.createInstance(e,l.startTime,l.duration),p=n._playInstance(h,l);return p||h._playFailed(),h},n.createInstance=function(e,r,i){if(!n.initializeDefaultPlugins())return new createjs.DefaultSoundInstance(e,r,i);var s=n._defaultPlayPropsHash[e];e=n._getSrcById(e);var o=n._parsePath(e.src),u=null;return null!=o&&null!=o.src?(t.create(o.src),null==r&&(r=e.startTime),u=n.activePlugin.create(o.src,r,i||e.duration),s=s||n._defaultPlayPropsHash[o.src],s&&u.applyPlayProps(s)):u=new createjs.DefaultSoundInstance(e,r,i),u.uniqueId=n._lastID++,u},n.stop=function(){for(var e=this._instances,t=e.length;t--;)e[t].stop()},n.setVolume=function(e){if(null==Number(e))return!1;if(e=Math.max(0,Math.min(1,e)),n._masterVolume=e,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(e))for(var t=this._instances,r=0,i=t.length;i>r;r++)t[r].setMasterVolume(e)},n.getVolume=function(){return this._masterVolume},n.setMute=function(e){if(null==e)return!1;if(this._masterMute=e,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(e))for(var t=this._instances,n=0,r=t.length;r>n;n++)t[n].setMasterMute(e);return!0},n.getMute=function(){return this._masterMute},n.setDefaultPlayProps=function(e,t){e=n._getSrcById(e),n._defaultPlayPropsHash[n._parsePath(e.src).src]=createjs.PlayPropsConfig.create(t)},n.getDefaultPlayProps=function(e){return e=n._getSrcById(e),n._defaultPlayPropsHash[n._parsePath(e.src).src]},n._playInstance=function(e,t){var r=n._defaultPlayPropsHash[e.src]||{};if(null==t.interrupt&&(t.interrupt=r.interrupt||n.defaultInterruptBehavior),null==t.delay&&(t.delay=r.delay||0),null==t.offset&&(t.offset=e.getPosition()),null==t.loop&&(t.loop=e.loop),null==t.volume&&(t.volume=e.volume),null==t.pan&&(t.pan=e.pan),0==t.delay){var i=n._beginPlaying(e,t);if(!i)return!1}else{var s=setTimeout(function(){n._beginPlaying(e,t)},t.delay);e.delayTimeoutId=s}return this._instances.push(e),!0},n._beginPlaying=function(e,n){if(!t.add(e,n.interrupt))return!1;var r=e._beginPlaying(n);if(!r){var i=createjs.indexOf(this._instances,e);return i>-1&&this._instances.splice(i,1),!1}return!0},n._getSrcById=function(e){return n._idHash[e]||{src:e}},n._playFinished=function(e){t.remove(e);var n=createjs.indexOf(this._instances,e);n>-1&&this._instances.splice(n,1)},createjs.Sound=e,t.channels={},t.create=function(e,n){var r=t.get(e);return null==r?(t.channels[e]=new t(e,n),!0):!1},t.removeSrc=function(e){var n=t.get(e);return null==n?!1:(n._removeAll(),delete t.channels[e],!0)},t.removeAll=function(){for(var e in t.channels)t.channels[e]._removeAll();t.channels={}},t.add=function(e,n){var r=t.get(e.src);return null==r?!1:r._add(e,n)},t.remove=function(e){var n=t.get(e.src);return null==n?!1:(n._remove(e),!0)},t.maxPerChannel=function(){return r.maxDefault},t.get=function(e){return t.channels[e]};var r=t.prototype;r.constructor=t,r.src=null,r.max=null,r.maxDefault=100,r.length=0,r.init=function(e,t){this.src=e,this.max=t||this.maxDefault,-1==this.max&&(this.max=this.maxDefault),this._instances=[]},r._get=function(e){return this._instances[e]},r._add=function(e,t){return this._getSlot(t,e)?(this._instances.push(e),this.length++,!0):!1},r._remove=function(e){var t=createjs.indexOf(this._instances,e);return-1==t?!1:(this._instances.splice(t,1),this.length--,!0)},r._removeAll=function(){for(var e=this.length-1;e>=0;e--)this._instances[e].stop()},r._getSlot=function(t){var n,r;if(t!=e.INTERRUPT_NONE&&(r=this._get(0),null==r))return!0;for(var i=0,s=this.max;s>i;i++){if(n=this._get(i),null==n)return!0;if(n.playState==e.PLAY_FINISHED||n.playState==e.PLAY_INTERRUPTED||n.playState==e.PLAY_FAILED){r=n;break}t!=e.INTERRUPT_NONE&&(t==e.INTERRUPT_EARLY&&n.getPosition()<r.getPosition()||t==e.INTERRUPT_LATE&&n.getPosition()>r.getPosition())&&(r=n)}return null!=r?(r._interrupt(),this._remove(r),!0):!1},r.toString=function(){return"[Sound SoundChannel]"}}(),this.createjs=this.createjs||{},function(){"use strict";var e=function(e,t,n,r){this.EventDispatcher_constructor(),this.src=e,this.uniqueId=-1,this.playState=null,this.delayTimeoutId=null,this._volume=1,Object.defineProperty(this,"volume",{get:this.getVolume,set:this.setVolume}),this._pan=0,Object.defineProperty(this,"pan",{get:this.getPan,set:this.setPan}),this._startTime=Math.max(0,t||0),Object.defineProperty(this,"startTime",{get:this.getStartTime,set:this.setStartTime}),this._duration=Math.max(0,n||0),Object.defineProperty(this,"duration",{get:this.getDuration,set:this.setDuration}),this._playbackResource=null,Object.defineProperty(this,"playbackResource",{get:this.getPlaybackResource,set:this.setPlaybackResource}),r!==!1&&r!==!0&&this.setPlaybackResource(r),this._position=0,Object.defineProperty(this,"position",{get:this.getPosition,set:this.setPosition}),this._loop=0,Object.defineProperty(this,"loop",{get:this.getLoop,set:this.setLoop}),this._muted=!1,Object.defineProperty(this,"muted",{get:this.getMuted,set:this.setMuted}),this._paused=!1,Object.defineProperty(this,"paused",{get:this.getPaused,set:this.setPaused})},t=createjs.extend(e,createjs.EventDispatcher);t.play=function(e,t,n,r,i,s){var o;return o=createjs.PlayPropsConfig.create(e instanceof Object||e instanceof createjs.PlayPropsConfig?e:{interrupt:e,delay:t,offset:n,loop:r,volume:i,pan:s}),this.playState==createjs.Sound.PLAY_SUCCEEDED?(this.applyPlayProps(o),void (this._paused&&this.setPaused(!1))):(this._cleanUp(),createjs.Sound._playInstance(this,o),this)},t.stop=function(){return this._position=0,this._paused=!1,this._handleStop(),this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this},t.destroy=function(){this._cleanUp(),this.src=null,this.playbackResource=null,this.removeAllEventListeners()},t.applyPlayProps=function(e){return null!=e.offset&&this.setPosition(e.offset),null!=e.loop&&this.setLoop(e.loop),null!=e.volume&&this.setVolume(e.volume),null!=e.pan&&this.setPan(e.pan),null!=e.startTime&&(this.setStartTime(e.startTime),this.setDuration(e.duration)),this},t.toString=function(){return"[AbstractSoundInstance]"},t.getPaused=function(){return this._paused},t.setPaused=function(e){return e!==!0&&e!==!1||this._paused==e||1==e&&this.playState!=createjs.Sound.PLAY_SUCCEEDED?void 0:(this._paused=e,e?this._pause():this._resume(),clearTimeout(this.delayTimeoutId),this)},t.setVolume=function(e){return e==this._volume?this:(this._volume=Math.max(0,Math.min(1,e)),this._muted||this._updateVolume(),this)},t.getVolume=function(){return this._volume},t.setMuted=function(e){return e===!0||e===!1?(this._muted=e,this._updateVolume(),this):void 0},t.getMuted=function(){return this._muted},t.setPan=function(e){return e==this._pan?this:(this._pan=Math.max(-1,Math.min(1,e)),this._updatePan(),this)},t.getPan=function(){return this._pan},t.getPosition=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED||(this._position=this._calculateCurrentPosition()),this._position},t.setPosition=function(e){return this._position=Math.max(0,e),this.playState==createjs.Sound.PLAY_SUCCEEDED&&this._updatePosition(),this},t.getStartTime=function(){return this._startTime},t.setStartTime=function(e){return e==this._startTime?this:(this._startTime=Math.max(0,e||0),this._updateStartTime(),this)},t.getDuration=function(){return this._duration},t.setDuration=function(e){return e==this._duration?this:(this._duration=Math.max(0,e||0),this._updateDuration(),this)},t.setPlaybackResource=function(e){return this._playbackResource=e,0==this._duration&&this._setDurationFromSource(),this},t.getPlaybackResource=function(){return this._playbackResource},t.getLoop=function(){return this._loop},t.setLoop=function(e){null!=this._playbackResource&&(0!=this._loop&&0==e?this._removeLooping(e):0==this._loop&&0!=e&&this._addLooping(e)),this._loop=e},t._sendEvent=function(e){var t=new createjs.Event(e);this.dispatchEvent(t)},t._cleanUp=function(){clearTimeout(this.delayTimeoutId),this._handleCleanUp(),this._paused=!1,createjs.Sound._playFinished(this)},t._interrupt=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_INTERRUPTED,this._sendEvent("interrupted")},t._beginPlaying=function(e){return this.setPosition(e.offset),this.setLoop(e.loop),this.setVolume(e.volume),this.setPan(e.pan),null!=e.startTime&&(this.setStartTime(e.startTime),this.setDuration(e.duration)),null!=this._playbackResource&&this._position<this._duration?(this._paused=!1,this._handleSoundReady(),this.playState=createjs.Sound.PLAY_SUCCEEDED,this._sendEvent("succeeded"),!0):(this._playFailed(),!1)},t._playFailed=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_FAILED,this._sendEvent("failed")},t._handleSoundComplete=function(){return this._position=0,0!=this._loop?(this._loop--,this._handleLoop(),void this._sendEvent("loop")):(this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,void this._sendEvent("complete"))},t._handleSoundReady=function(){},t._updateVolume=function(){},t._updatePan=function(){},t._updateStartTime=function(){},t._updateDuration=function(){},t._setDurationFromSource=function(){},t._calculateCurrentPosition=function(){},t._updatePosition=function(){},t._removeLooping=function(){},t._addLooping=function(){},t._pause=function(){},t._resume=function(){},t._handleStop=function(){},t._handleCleanUp=function(){},t._handleLoop=function(){},createjs.AbstractSoundInstance=createjs.promote(e,"EventDispatcher"),createjs.DefaultSoundInstance=createjs.AbstractSoundInstance}(),this.createjs=this.createjs||{},function(){"use strict";var e=function(){this._capabilities=null,this._loaders={},this._audioSources={},this._soundInstances={},this._volume=1,this._loaderClass,this._soundInstanceClass},t=e.prototype;e._capabilities=null,e.isSupported=function(){return!0},t.register=function(e){var t=this._loaders[e.src];return t&&!t.canceled?this._loaders[e.src]:(this._audioSources[e.src]=!0,this._soundInstances[e.src]=[],t=new this._loaderClass(e),t.on("complete",createjs.proxy(this._handlePreloadComplete,this)),this._loaders[e.src]=t,t)},t.preload=function(e){e.on("error",createjs.proxy(this._handlePreloadError,this)),e.load()},t.isPreloadStarted=function(e){return null!=this._audioSources[e]},t.isPreloadComplete=function(e){return null!=this._audioSources[e]&&1!=this._audioSources[e]},t.removeSound=function(e){if(this._soundInstances[e]){for(var t=this._soundInstances[e].length;t--;){var n=this._soundInstances[e][t];n.destroy()}delete this._soundInstances[e],delete this._audioSources[e],this._loaders[e]&&this._loaders[e].destroy(),delete this._loaders[e]}},t.removeAllSounds=function(){for(var e in this._audioSources)this.removeSound(e)},t.create=function(e,t,n){this.isPreloadStarted(e)||this.preload(this.register(e));var r=new this._soundInstanceClass(e,t,n,this._audioSources[e]);return this._soundInstances[e].push(r),r},t.setVolume=function(e){return this._volume=e,this._updateVolume(),!0},t.getVolume=function(){return this._volume},t.setMute=function(){return this._updateVolume(),!0},t.toString=function(){return"[AbstractPlugin]"},t._handlePreloadComplete=function(e){var t=e.target.getItem().src;this._audioSources[t]=e.result;for(var n=0,r=this._soundInstances[t].length;r>n;n++){var i=this._soundInstances[t][n];i.setPlaybackResource(this._audioSources[t])}},t._handlePreloadError=function(){},t._updateVolume=function(){},createjs.AbstractPlugin=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.AbstractLoader_constructor(e,!0,createjs.AbstractLoader.SOUND)}var t=createjs.extend(e,createjs.AbstractLoader);e.context=null,t.toString=function(){return"[WebAudioLoader]"},t._createRequest=function(){this._request=new createjs.XHRRequest(this._item,!1),this._request.setResponseType("arraybuffer")},t._sendComplete=function(){e.context.decodeAudioData(this._rawResult,createjs.proxy(this._handleAudioDecoded,this),createjs.proxy(this._sendError,this))},t._handleAudioDecoded=function(e){this._result=e,this.AbstractLoader__sendComplete()},createjs.WebAudioLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,r,i){this.AbstractSoundInstance_constructor(e,t,r,i),this.gainNode=n.context.createGain(),this.panNode=n.context.createPanner(),this.panNode.panningModel=n._panningModel,this.panNode.connect(this.gainNode),this.sourceNode=null,this._soundCompleteTimeout=null,this._sourceNodeNext=null,this._playbackStartTime=0,this._endedHandler=createjs.proxy(this._handleSoundComplete,this)}var t=createjs.extend(e,createjs.AbstractSoundInstance),n=e;n.context=null,n.destinationNode=null,n._panningModel="equalpower",t.destroy=function(){this.AbstractSoundInstance_destroy(),this.panNode.disconnect(0),this.panNode=null,this.gainNode.disconnect(0),this.gainNode=null},t.toString=function(){return"[WebAudioSoundInstance]"},t._updatePan=function(){this.panNode.setPosition(this._pan,0,-0.5)},t._removeLooping=function(){this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)},t._addLooping=function(){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},t._setDurationFromSource=function(){this._duration=1e3*this.playbackResource.duration},t._handleCleanUp=function(){this.sourceNode&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout),this._playbackStartTime=0},t._cleanUpAudioNode=function(e){return e&&(e.stop(0),e.disconnect(0),e=null),e},t._handleSoundReady=function(){this.gainNode.connect(n.destinationNode);var e=.001*this._duration,t=.001*this._position;t>e&&(t=e),this.sourceNode=this._createAndPlayAudioNode(n.context.currentTime-e,t),this._playbackStartTime=this.sourceNode.startTime-t,this._soundCompleteTimeout=setTimeout(this._endedHandler,1e3*(e-t)),0!=this._loop&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},t._createAndPlayAudioNode=function(e,t){var r=n.context.createBufferSource();r.buffer=this.playbackResource,r.connect(this.panNode);var i=.001*this._duration;return r.startTime=e+i,r.start(r.startTime,t+.001*this._startTime,i-t),r},t._pause=function(){this._position=1e3*(n.context.currentTime-this._playbackStartTime),this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout)},t._resume=function(){this._handleSoundReady()},t._updateVolume=function(){var e=this._muted?0:this._volume;e!=this.gainNode.gain.value&&(this.gainNode.gain.value=e)},t._calculateCurrentPosition=function(){return 1e3*(n.context.currentTime-this._playbackStartTime)},t._updatePosition=function(){this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),clearTimeout(this._soundCompleteTimeout),this._paused||this._handleSoundReady()},t._handleLoop=function(){this._cleanUpAudioNode(this.sourceNode),this.sourceNode=this._sourceNodeNext,this._playbackStartTime=this.sourceNode.startTime,this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0),this._soundCompleteTimeout=setTimeout(this._endedHandler,this._duration)},t._updateDuration=function(){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._pause(),this._resume())},createjs.WebAudioSoundInstance=createjs.promote(e,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){"use strict";function e(){this.AbstractPlugin_constructor(),this._panningModel=n._panningModel,this.context=n.context,this.dynamicsCompressorNode=this.context.createDynamicsCompressor(),this.dynamicsCompressorNode.connect(this.context.destination),this.gainNode=this.context.createGain(),this.gainNode.connect(this.dynamicsCompressorNode),createjs.WebAudioSoundInstance.destinationNode=this.gainNode,this._capabilities=n._capabilities,this._loaderClass=createjs.WebAudioLoader,this._soundInstanceClass=createjs.WebAudioSoundInstance,this._addPropsToClasses()}var t=createjs.extend(e,createjs.AbstractPlugin),n=e;n._capabilities=null,n._panningModel="equalpower",n.context=null,n.isSupported=function(){var e=createjs.BrowserDetect.isIOS||createjs.BrowserDetect.isAndroid||createjs.BrowserDetect.isBlackberry;return"file:"!=location.protocol||e||this._isFileXHRSupported()?(n._generateCapabilities(),null==n.context?!1:!0):!1},n.playEmptySound=function(){if(null!=n.context){var e=n.context.createBufferSource();e.buffer=n.context.createBuffer(1,1,22050),e.connect(n.context.destination),e.start(0,0,0)}},n._isFileXHRSupported=function(){var e=!0,t=new XMLHttpRequest;try{t.open("GET","WebAudioPluginTest.fail",!1)}catch(n){return e=!1}t.onerror=function(){e=!1},t.onload=function(){e=404==this.status||200==this.status||0==this.status&&""!=this.response};try{t.send()}catch(n){e=!1}return e},n._generateCapabilities=function(){if(null==n._capabilities){var e=document.createElement("audio");if(null==e.canPlayType)return null;if(null==n.context)if(window.AudioContext)n.context=new AudioContext;else{if(!window.webkitAudioContext)return null;n.context=new webkitAudioContext}n._compatibilitySetUp(),n.playEmptySound(),n._capabilities={panning:!0,volume:!0,tracks:-1};for(var t=createjs.Sound.SUPPORTED_EXTENSIONS,r=createjs.Sound.EXTENSION_MAP,i=0,s=t.length;s>i;i++){var o=t[i],u=r[o]||o;n._capabilities[o]="no"!=e.canPlayType("audio/"+o)&&""!=e.canPlayType("audio/"+o)||"no"!=e.canPlayType("audio/"+u)&&""!=e.canPlayType("audio/"+u)}n.context.destination.numberOfChannels<2&&(n._capabilities.panning=!1)}},n._compatibilitySetUp=function(){if(n._panningModel="equalpower",!n.context.createGain){n.context.createGain=n.context.createGainNode;var e=n.context.createBufferSource();e.__proto__.start=e.__proto__.noteGrainOn,e.__proto__.stop=e.__proto__.noteOff,n._panningModel=0}},t.toString=function(){return"[WebAudioPlugin]"},t._addPropsToClasses=function(){var e=this._soundInstanceClass;e.context=this.context,e.destinationNode=this.gainNode,e._panningModel=this._panningModel,this._loaderClass.context=this.context},t._updateVolume=function(){var e=createjs.Sound._masterMute?0:this._volume;e!=this.gainNode.gain.value&&(this.gainNode.gain.value=e)},createjs.WebAudioPlugin=createjs.promote(e,"AbstractPlugin")}(),this.createjs=this.createjs||{},function(){"use strict";function e(){throw"HTMLAudioTagPool cannot be instantiated"}function t(){this._tags=[]}var n=e;n._tags={},n._tagPool=new t,n._tagUsed={},n.get=function(e){var t=n._tags[e];return null==t?(t=n._tags[e]=n._tagPool.get(),t.src=e):n._tagUsed[e]?(t=n._tagPool.get(),t.src=e):n._tagUsed[e]=!0,t},n.set=function(e,t){t==n._tags[e]?n._tagUsed[e]=!1:n._tagPool.set(t)},n.remove=function(e){var t=n._tags[e];return null==t?!1:(n._tagPool.set(t),delete n._tags[e],delete n._tagUsed[e],!0)},n.getDuration=function(e){var t=n._tags[e];return null==t?0:1e3*t.duration},createjs.HTMLAudioTagPool=e;var r=t.prototype;r.constructor=t,r.get=function(){var e;return e=0==this._tags.length?this._createTag():this._tags.pop(),null==e.parentNode&&document.body.appendChild(e),e},r.set=function(e){var t=createjs.indexOf(this._tags,e);-1==t&&(this._tags.src=null,this._tags.push(e))},r.toString=function(){return"[TagPool]"},r._createTag=function(){var e=document.createElement("audio");return e.autoplay=!1,e.preload="none",e}}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n,r){this.AbstractSoundInstance_constructor(e,t,n,r),this._audioSpriteStopTime=null,this._delayTimeoutId=null,this._endedHandler=createjs.proxy(this._handleSoundComplete,this),this._readyHandler=createjs.proxy(this._handleTagReady,this),this._stalledHandler=createjs.proxy(this._playFailed,this),this._audioSpriteEndHandler=createjs.proxy(this._handleAudioSpriteLoop,this),this._loopHandler=createjs.proxy(this._handleSoundComplete,this),n?this._audioSpriteStopTime=.001*(t+n):this._duration=createjs.HTMLAudioTagPool.getDuration(this.src)}var t=createjs.extend(e,createjs.AbstractSoundInstance);t.setMasterVolume=function(){this._updateVolume()},t.setMasterMute=function(){this._updateVolume()},t.toString=function(){return"[HTMLAudioSoundInstance]"},t._removeLooping=function(){null!=this._playbackResource&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},t._addLooping=function(){null==this._playbackResource||this._audioSpriteStopTime||(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)},t._handleCleanUp=function(){var e=this._playbackResource;if(null!=e){e.pause(),e.loop=!1,e.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),e.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),e.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),e.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),e.removeEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1);try{e.currentTime=this._startTime}catch(t){}createjs.HTMLAudioTagPool.set(this.src,e),this._playbackResource=null}},t._beginPlaying=function(e){return this._playbackResource=createjs.HTMLAudioTagPool.get(this.src),this.AbstractSoundInstance__beginPlaying(e)},t._handleSoundReady=function(){if(4!==this._playbackResource.readyState){var e=this._playbackResource;return e.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),e.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),e.preload="auto",void e.load()}this._updateVolume(),this._playbackResource.currentTime=.001*(this._startTime+this._position),this._audioSpriteStopTime?this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1):(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),0!=this._loop&&(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)),this._playbackResource.play()},t._handleTagReady=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),this._handleSoundReady()},t._pause=function(){this._playbackResource.pause()},t._resume=function(){this._playbackResource.play()},t._updateVolume=function(){if(null!=this._playbackResource){var e=this._muted||createjs.Sound._masterMute?0:this._volume*createjs.Sound._masterVolume;e!=this._playbackResource.volume&&(this._playbackResource.volume=e)}},t._calculateCurrentPosition=function(){return 1e3*this._playbackResource.currentTime-this._startTime},t._updatePosition=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1);try{this._playbackResource.currentTime=.001*(this._position+this._startTime)}catch(e){this._handleSetPositionSeek(null)}},t._handleSetPositionSeek=function(){null!=this._playbackResource&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},t._handleAudioSpriteLoop=function(){this._playbackResource.currentTime<=this._audioSpriteStopTime||(this._playbackResource.pause(),0==this._loop?this._handleSoundComplete(null):(this._position=0,this._loop--,this._playbackResource.currentTime=.001*this._startTime,this._paused||this._playbackResource.play(),this._sendEvent("loop")))},t._handleLoop=function(){0==this._loop&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},t._updateStartTime=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},t._updateDuration=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},createjs.HTMLAudioSoundInstance=createjs.promote(e,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){"use strict";function e(){this.AbstractPlugin_constructor(),this.defaultNumChannels=2,this._capabilities=n._capabilities,this._loaderClass=createjs.SoundLoader,this._soundInstanceClass=createjs.HTMLAudioSoundInstance}var t=createjs.extend(e,createjs.AbstractPlugin),n=e;n.MAX_INSTANCES=30,n._AUDIO_READY="canplaythrough",n._AUDIO_ENDED="ended",n._AUDIO_SEEKED="seeked",n._AUDIO_STALLED="stalled",n._TIME_UPDATE="timeupdate",n._capabilities=null,n.isSupported=function(){return n._generateCapabilities(),null!=n._capabilities},n._generateCapabilities=function(){if(null==n._capabilities){var e=document.createElement("audio");if(null==e.canPlayType)return null;n._capabilities={panning:!1,volume:!0,tracks:-1};for(var t=createjs.Sound.SUPPORTED_EXTENSIONS,r=createjs.Sound.EXTENSION_MAP,i=0,s=t.length;s>i;i++){var o=t[i],u=r[o]||o;n._capabilities[o]="no"!=e.canPlayType("audio/"+o)&&""!=e.canPlayType("audio/"+o)||"no"!=e.canPlayType("audio/"+u)&&""!=e.canPlayType("audio/"+u)}}},t.register=function(e){var t=createjs.HTMLAudioTagPool.get(e.src),n=this.AbstractPlugin_register(e);return n.setTag(t),n},t.removeSound=function(e){this.AbstractPlugin_removeSound(e),createjs.HTMLAudioTagPool.remove(e)},t.create=function(e,t,n){var r=this.AbstractPlugin_create(e,t,n);return r.setPlaybackResource(null),r},t.toString=function(){return"[HTMLAudioPlugin]"},t.setVolume=t.getVolume=t.setMute=null,createjs.HTMLAudioPlugin=createjs.promote(e,"AbstractPlugin")}(),this.createjs=this.createjs||{},function(){"use strict";function e(t,n,r){this.ignoreGlobalPause=!1,this.loop=!1,this.duration=0,this.pluginData=r||{},this.target=t,this.position=null,this.passive=!1,this._paused=!1,this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],this._prevPosition=0,this._stepPosition=0,this._prevPos=-1,this._target=t,this._useTicks=!1,this._inited=!1,this._registered=!1,n&&(this._useTicks=n.useTicks,this.ignoreGlobalPause=n.ignoreGlobalPause,this.loop=n.loop,n.onChange&&this.addEventListener("change",n.onChange),n.override&&e.removeTweens(t)),n&&n.paused?this._paused=!0:createjs.Tween._register(this,!0),n&&null!=n.position&&this.setPosition(n.position,e.NONE)}var t=createjs.extend(e,createjs.EventDispatcher);e.NONE=0,e.LOOP=1,e.REVERSE=2,e.IGNORE={},e._tweens=[],e._plugins={},e.get=function(t,n,r,i){return i&&e.removeTweens(t),new e(t,n,r)},e.tick=function(t,n){for(var r=e._tweens.slice(),i=r.length-1;i>=0;i--){var s=r[i];n&&!s.ignoreGlobalPause||s._paused||s.tick(s._useTicks?1:t)}},e.handleEvent=function(e){"tick"==e.type&&this.tick(e.delta,e.paused)},e.removeTweens=function(t){if(t.tweenjs_count){for(var n=e._tweens,r=n.length-1;r>=0;r--){var i=n[r];i._target==t&&(i._paused=!0,n.splice(r,1))}t.tweenjs_count=0}},e.removeAllTweens=function(){for(var t=e._tweens,n=0,r=t.length;r>n;n++){var i=t[n];i._paused=!0,i.target&&(i.target.tweenjs_count=0)}t.length=0},e.hasActiveTweens=function(t){return t?null!=t.tweenjs_count&&!!t.tweenjs_count:e._tweens&&!!e._tweens.length},e.installPlugin=function(t,n){var r=t.priority;null==r&&(t.priority=r=0);for(var i=0,s=n.length,o=e._plugins;s>i;i++){var u=n[i];if(o[u]){for(var f=o[u],l=0,c=f.length;c>l&&!(r<f[l].priority);l++);o[u].splice(l,0,t)}else o[u]=[t]}},e._register=function(t,n){var r=t._target,i=e._tweens;if(n&&!t._registered)r&&(r.tweenjs_count=r.tweenjs_count?r.tweenjs_count+1:1),i.push(t),!e._inited&&createjs.Ticker&&(createjs.Ticker.addEventListener("tick",e),e._inited=!0);else if(!n&&t._registered){r&&r.tweenjs_count--;for(var s=i.length;s--;)if(i[s]==t){i.splice(s,1);break}}t._registered=n},t.wait=function(e,t){if(null==e||0>=e)return this;var n=this._cloneProps(this._curQueueProps);return this._addStep({d:e,p0:n,e:this._linearEase,p1:n,v:t})},t.to=function(e,t,n){return(isNaN(t)||0>t)&&(t=0),this._addStep({d:t||0,p0:this._cloneProps(this._curQueueProps),e:n,p1:this._cloneProps(this._appendQueueProps(e))})},t.call=function(e,t,n){return this._addAction({f:e,p:t?t:[this],o:n?n:this._target})},t.set=function(e,t){return this._addAction({f:this._set,o:this,p:[e,t?t:this._target]})},t.play=function(e){return e||(e=this),this.call(e.setPaused,[!1],e)},t.pause=function(e){return e||(e=this),this.call(e.setPaused,[!0],e)},t.setPosition=function(e,t){0>e&&(e=0),null==t&&(t=1);var n=e,r=!1;if(n>=this.duration&&(this.loop?n%=this.duration:(n=this.duration,r=!0)),n==this._prevPos)return r;var i=this._prevPos;if(this.position=this._prevPos=n,this._prevPosition=e,this._target)if(r)this._updateTargetProps(null,1);else if(this._steps.length>0){for(var s=0,o=this._steps.length;o>s&&!(this._steps[s].t>n);s++);var u=this._steps[s-1];this._updateTargetProps(u,(this._stepPosition=n-u.t)/u.d)}return 0!=t&&this._actions.length>0&&(this._useTicks?this._runActions(n,n):1==t&&i>n?(i!=this.duration&&this._runActions(i,this.duration),this._runActions(0,n,!0)):this._runActions(i,n)),r&&this.setPaused(!0),this.dispatchEvent("change"),r},t.tick=function(e){this._paused||this.setPosition(this._prevPosition+e)},t.setPaused=function(t){return this._paused===!!t?this:(this._paused=!!t,e._register(this,!t),this)},t.w=t.wait,t.t=t.to,t.c=t.call,t.s=t.set,t.toString=function(){return"[Tween]"},t.clone=function(){throw"Tween can not be cloned."},t._updateTargetProps=function(t,n){var r,i,s,o,u,f;if(t||1!=n){if(this.passive=!!t.v,this.passive)return;t.e&&(n=t.e(n,0,1,1)),r=t.p0,i=t.p1}else this.passive=!1,r=i=this._curQueueProps;for(var l in this._initQueueProps){null==(o=r[l])&&(r[l]=o=this._initQueueProps[l]),null==(u=i[l])&&(i[l]=u=o),s=o==u||0==n||1==n||"number"!=typeof o?1==n?u:o:o+(u-o)*n;var c=!1;if(f=e._plugins[l])for(var h=0,p=f.length;p>h;h++){var d=f[h].tween(this,l,s,r,i,n,!!t&&r==i,!t);d==e.IGNORE?c=!0:s=d}c||(this._target[l]=s)}},t._runActions=function(e,t,n){var r=e,i=t,s=-1,o=this._actions.length,u=1;for(e>t&&(r=t,i=e,s=o,o=u=-1);(s+=u)!=o;){var a=this._actions[s],f=a.t;(f==i||f>r&&i>f||n&&f==e)&&a.f.apply(a.o,a.p)}},t._appendQueueProps=function(t){var n,r,i,s,o;for(var u in t)if(void 0===this._initQueueProps[u]){if(r=this._target[u],n=e._plugins[u])for(i=0,s=n.length;s>i;i++)r=n[i].init(this,u,r);this._initQueueProps[u]=this._curQueueProps[u]=void 0===r?null:r}else r=this._curQueueProps[u];for(var u in t){if(r=this._curQueueProps[u],n=e._plugins[u])for(o=o||{},i=0,s=n.length;s>i;i++)n[i].step&&n[i].step(this,u,r,t[u],o);this._curQueueProps[u]=t[u]}return o&&this._appendQueueProps(o),this._curQueueProps},t._cloneProps=function(e){var t={};for(var n in e)t[n]=e[n];return t},t._addStep=function(e){return e.d>0&&(this._steps.push(e),e.t=this.duration,this.duration+=e.d),this},t._addAction=function(e){return e.t=this.duration,this._actions.push(e),this},t._set=function(e,t){for(var n in e)t[n]=e[n]},createjs.Tween=createjs.promote(e,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n){this.EventDispatcher_constructor(),this.ignoreGlobalPause=!1,this.duration=0,this.loop=!1,this.position=null,this._paused=!1,this._tweens=[],this._labels=null,this._labelList=null,this._prevPosition=0,this._prevPos=-1,this._useTicks=!1,this._registered=!1,n&&(this._useTicks=n.useTicks,this.loop=n.loop,this.ignoreGlobalPause=n.ignoreGlobalPause,n.onChange&&this.addEventListener("change",n.onChange)),e&&this.addTween.apply(this,e),this.setLabels(t),n&&n.paused?this._paused=!0:createjs.Tween._register(this,!0),n&&null!=n.position&&this.setPosition(n.position,createjs.Tween.NONE)}var t=createjs.extend(e,createjs.EventDispatcher);t.addTween=function(e){var t=arguments.length;if(t>1){for(var n=0;t>n;n++)this.addTween(arguments[n]);return arguments[0]}return 0==t?null:(this.removeTween(e),this._tweens.push(e),e.setPaused(!0),e._paused=!1,e._useTicks=this._useTicks,e.duration>this.duration&&(this.duration=e.duration),this._prevPos>=0&&e.setPosition(this._prevPos,createjs.Tween.NONE),e)},t.removeTween=function(e){var t=arguments.length;if(t>1){for(var n=!0,r=0;t>r;r++)n=n&&this.removeTween(arguments[r]);return n}if(0==t)return!1;for(var i=this._tweens,r=i.length;r--;)if(i[r]==e)return i.splice(r,1),e.duration>=this.duration&&this.updateDuration(),!0;return!1},t.addLabel=function(e,t){this._labels[e]=t;var n=this._labelList;if(n){for(var r=0,i=n.length;i>r&&!(t<n[r].position);r++);n.splice(r,0,{label:e,position:t})}},t.setLabels=function(e){this._labels=e?e:{}},t.getLabels=function(){var e=this._labelList;if(!e){e=this._labelList=[];var t=this._labels;for(var n in t)e.push({label:n,position:t[n]});e.sort(function(e,t){return e.position-t.position})}return e},t.getCurrentLabel=function(){var e=this.getLabels(),t=this.position,n=e.length;if(n){for(var r=0;n>r&&!(t<e[r].position);r++);return 0==r?null:e[r-1].label}return null},t.gotoAndPlay=function(e){this.setPaused(!1),this._goto(e)},t.gotoAndStop=function(e){this.setPaused(!0),this._goto(e)},t.setPosition=function(e,t){var n=this._calcPosition(e),r=!this.loop&&e>=this.duration;if(n==this._prevPos)return r;this._prevPosition=e,this.position=this._prevPos=n;for(var i=0,s=this._tweens.length;s>i;i++)if(this._tweens[i].setPosition(n,t),n!=this._prevPos)return!1;return r&&this.setPaused(!0),this.dispatchEvent("change"),r},t.setPaused=function(e){this._paused=!!e,createjs.Tween._register(this,!e)},t.updateDuration=function(){this.duration=0;for(var e=0,t=this._tweens.length;t>e;e++){var n=this._tweens[e];n.duration>this.duration&&(this.duration=n.duration)}},t.tick=function(e){this.setPosition(this._prevPosition+e)},t.resolve=function(e){var t=Number(e);return isNaN(t)&&(t=this._labels[e]),t},t.toString=function(){return"[Timeline]"},t.clone=function(){throw"Timeline can not be cloned."},t._goto=function(e){var t=this.resolve(e);null!=t&&this.setPosition(t)},t._calcPosition=function(e){return 0>e?0:e<this.duration?e:this.loop?e%this.duration:this.duration},createjs.Timeline=createjs.promote(e,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function e(){throw"Ease cannot be instantiated."}e.linear=function(e){return e},e.none=e.linear,e.get=function(e){return-1>e&&(e=-1),e>1&&(e=1),function(t){return 0==e?t:0>e?t*(t*-e+1+e):t*((2-t)*e+(1-e))}},e.getPowIn=function(e){return function(t){return Math.pow(t,e)}},e.getPowOut=function(e){return function(t){return 1-Math.pow(1-t,e)}},e.getPowInOut=function(e){return function(t){return(t*=2)<1?.5*Math.pow(t,e):1-.5*Math.abs(Math.pow(2-t,e))}},e.quadIn=e.getPowIn(2),e.quadOut=e.getPowOut(2),e.quadInOut=e.getPowInOut(2),e.cubicIn=e.getPowIn(3),e.cubicOut=e.getPowOut(3),e.cubicInOut=e.getPowInOut(3),e.quartIn=e.getPowIn(4),e.quartOut=e.getPowOut(4),e.quartInOut=e.getPowInOut(4),e.quintIn=e.getPowIn(5),e.quintOut=e.getPowOut(5),e.quintInOut=e.getPowInOut(5),e.sineIn=function(e){return 1-Math.cos(e*Math.PI/2)},e.sineOut=function(e){return Math.sin(e*Math.PI/2)},e.sineInOut=function(e){return-0.5*(Math.cos(Math.PI*e)-1)},e.getBackIn=function(e){return function(t){return t*t*((e+1)*t-e)}},e.backIn=e.getBackIn(1.7),e.getBackOut=function(e){return function(t){return--t*t*((e+1)*t+e)+1}},e.backOut=e.getBackOut(1.7),e.getBackInOut=function(e){return e*=1.525,function(t){return(t*=2)<1?.5*t*t*((e+1)*t-e):.5*((t-=2)*t*((e+1)*t+e)+2)}},e.backInOut=e.getBackInOut(1.7),e.circIn=function(e){return-(Math.sqrt(1-e*e)-1)},e.circOut=function(e){return Math.sqrt(1- --e*e)},e.circInOut=function(e){return(e*=2)<1?-0.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},e.bounceIn=function(t){return 1-e.bounceOut(1-t)},e.bounceOut=function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},e.bounceInOut=function(t){return.5>t?.5*e.bounceIn(2*t):.5*e.bounceOut(2*t-1)+.5},e.getElasticIn=function(e,t){var n=2*Math.PI;return function(r){if(0==r||1==r)return r;var i=t/n*Math.asin(1/e);return-(e*Math.pow(2,10*(r-=1))*Math.sin((r-i)*n/t))}},e.elasticIn=e.getElasticIn(1,.3),e.getElasticOut=function(e,t){var n=2*Math.PI;return function(r){if(0==r||1==r)return r;var i=t/n*Math.asin(1/e);return e*Math.pow(2,-10*r)*Math.sin((r-i)*n/t)+1}},e.elasticOut=e.getElasticOut(1,.3),e.getElasticInOut=function(e,t){var n=2*Math.PI;return function(r){var i=t/n*Math.asin(1/e);return(r*=2)<1?-0.5*e*Math.pow(2,10*(r-=1))*Math.sin((r-i)*n/t):e*Math.pow(2,-10*(r-=1))*Math.sin((r-i)*n/t)*.5+1}},e.elasticInOut=e.getElasticInOut(1,.3*1.5),createjs.Ease=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(){throw"MotionGuidePlugin cannot be instantiated."}e.priority=0,e._rotOffS,e._rotOffE,e._rotNormS,e._rotNormE,e.install=function(){return createjs.Tween.installPlugin(e,["guide","x","y","rotation"]),createjs.Tween.IGNORE},e.init=function(e,t,n){var r=e.target;return r.hasOwnProperty("x")||(r.x=0),r.hasOwnProperty("y")||(r.y=0),r.hasOwnProperty("rotation")||(r.rotation=0),"rotation"==t&&(e.__needsRot=!0),"guide"==t?null:n},e.step=function(t,n,r,i,s){if("rotation"==n&&(t.__rotGlobalS=r,t.__rotGlobalE=i,e.testRotData(t,s)),"guide"!=n)return i;var o,u=i;u.hasOwnProperty("path")||(u.path=[]);var f=u.path;if(u.hasOwnProperty("end")||(u.end=1),u.hasOwnProperty("start")||(u.start=r&&r.hasOwnProperty("end")&&r.path===f?r.end:0),u.hasOwnProperty("_segments")&&u._length)return i;var l=f.length,c=10;if(l>=6&&(l-2)%4==0){u._segments=[],u._length=0;for(var h=2;l>h;h+=4){for(var p,d,v=f[h-2],m=f[h-1],g=f[h+0],y=f[h+1],b=f[h+2],w=f[h+3],E=v,S=m,x=0,T=[],N=1;c>=N;N++){var C=N/c,k=1-C;p=k*k*v+2*k*C*g+C*C*b,d=k*k*m+2*k*C*y+C*C*w,x+=T[T.push(Math.sqrt((o=p-E)*o+(o=d-S)*o))-1],E=p,S=d}u._segments.push(x),u._segments.push(T),u._length+=x}o=u.orient,u.orient=!0;var L={};return e.calc(u,u.start,L),t.__rotPathS=Number(L.rotation.toFixed(5)),e.calc(u,u.end,L),t.__rotPathE=Number(L.rotation.toFixed(5)),u.orient=!1,e.calc(u,u.end,s),u.orient=o,u.orient?(t.__guideData=u,e.testRotData(t,s),i):i}throw"invalid 'path' data, please see documentation for valid paths"},e.testRotData=function(e,t){if(void 0===e.__rotGlobalS||void 0===e.__rotGlobalE){if(e.__needsRot)return;e.__rotGlobalS=e.__rotGlobalE=void 0!==e._curQueueProps.rotation?e._curQueueProps.rotation:t.rotation=e.target.rotation||0}if(void 0!==e.__guideData){var n=e.__guideData,r=e.__rotGlobalE-e.__rotGlobalS,i=e.__rotPathE-e.__rotPathS,s=r-i;if("auto"==n.orient)s>180?s-=360:-180>s&&(s+=360);else if("cw"==n.orient){for(;0>s;)s+=360;0==s&&r>0&&180!=r&&(s+=360)}else if("ccw"==n.orient){for(s=r-(i>180?360-i:i);s>0;)s-=360;0==s&&0>r&&-180!=r&&(s-=360)}n.rotDelta=s,n.rotOffS=e.__rotGlobalS-e.__rotPathS,e.__rotGlobalS=e.__rotGlobalE=e.__guideData=e.__needsRot=void 0}},e.tween=function(t,n,r,i,s,o,u){var f=s.guide;if(void 0==f||f===i.guide)return r;if(f.lastRatio!=o){var l=(f.end-f.start)*(u?f.end:o)+f.start;switch(e.calc(f,l,t.target),f.orient){case"cw":case"ccw":case"auto":t.target.rotation+=f.rotOffS+f.rotDelta*o;break;case"fixed":default:t.target.rotation+=f.rotOffS}f.lastRatio=o}return"rotation"!=n||f.orient&&"false"!=f.orient?t.target[n]:r},e.calc=function(t,n,r){void 0==t._segments&&e.validate(t),void 0==r&&(r={x:0,y:0,rotation:0});for(var i=t._segments,s=t.path,o=t._length*n,u=i.length-2,f=0;o>i[f]&&u>f;)o-=i[f],f+=2;var l=i[f+1],c=0;for(u=l.length-1;o>l[c]&&u>c;)o-=l[c],c++;var h=c/++u+o/(u*l[c]);f=2*f+2;var p=1-h;return r.x=p*p*s[f-2]+2*p*h*s[f+0]+h*h*s[f+2],r.y=p*p*s[f-1]+2*p*h*s[f+1]+h*h*s[f+3],t.orient&&(r.rotation=57.2957795*Math.atan2((s[f+1]-s[f-1])*p+(s[f+3]-s[f+1])*h,(s[f+0]-s[f-2])*p+(s[f+2]-s[f+0])*h)),r},createjs.MotionGuidePlugin=e}(),this.createjs=this.createjs||{},function(){"use strict";var e=createjs.TweenJS=createjs.TweenJS||{};e.version="0.6.1",e.buildDate="Thu, 21 May 2015 16:17:37 GMT"}(),requirejs.config({baseUrl:"assets/js",paths:{app:"gameplay",jquery:"../../../lib/jquery-1.11.3.min",create:"../../../lib/createjs-2015.05.21.min",kinetic:"../../lib/kinetic-v5.1.0.min",globalConstants:"./common/global-constants",playerConstants:"./common/player-constants",enemyConstants:"./common/enemy-constants",gameStateHelper:"./helpers/game-state-helper"}}),window.onload=requirejs(["./common/global-constants","./common/player-constants","./common/enemy-constants","game-objects/characters/hero","game-objects/characters/enemy","game-objects/bullet","health","./helpers/game-state-helper","../../../lib/jquery-1.11.3.min","../../lib/kinetic-v5.1.0.min","../../../lib/createjs-2015.05.21.min"],function(e,t,n,r,i,s,o,u){function N(){createjs.Sound.registerSound("assets/sounds/boom.mp3","bomb"),createjs.Sound.registerSound("assets/sounds/gunfire.mp3","gun")}function C(){a=new Kinetic.Stage({container:"gameplay-container",width:e.STAGE_WIDTH,height:e.STAGE_HEIGHT}),f=new Kinetic.Layer,h=new Kinetic.FastLayer,c=new Kinetic.FastLayer,l=new Kinetic.FastLayer,d=new Kinetic.FastLayer,a.add(h),a.add(c),a.add(d)}function k(){v=new r("assets/images/player.png",t.INITIAL_HEALTH,l,t.ATTACK_SPEED),v.loadToStage(a)}function L(){p=new Image,p.onload=function(){var t=new Kinetic.Image({x:0,y:0,image:p,width:e.STAGE_WIDTH,height:e.STAGE_HEIGHT});f.add(t),a.add(f)},p.src="assets/images/ActionScreenBackground.png"}function A(){function n(e){var n=$("#gameplay-container"),r=e.clientX-n.offset().left,i=e.clientY-n.offset().top,s=v.getCenter().x,o=v.getCenter().y;r<s&&Math.abs(i-o)<Math.tan(.125*Math.PI)*(s-r)&&v.facingDirection!==t.FACING_DIRECTIONS.LEFT&&(v.kineticImage.setCrop({x:t.FACING_DIRECTIONS.LEFT*t.WIDTH,y:0,width:t.WIDTH,height:t.HEIGHT}),v.facingDirection=t.FACING_DIRECTIONS.LEFT),r>s&&Math.abs(i-o)<Math.tan(.125*Math.PI)*(r-s)&&v.facingDirection!==t.FACING_DIRECTIONS.RIGHT&&(v.kineticImage.setCrop({x:t.FACING_DIRECTIONS.RIGHT*t.WIDTH,y:0,width:t.WIDTH,height:t.HEIGHT}),v.facingDirection=t.FACING_DIRECTIONS.RIGHT),i<o&&Math.abs(r-s)<Math.tan(.125*Math.PI)*(o-i)&&v.facingDirection!==t.FACING_DIRECTIONS.DOWN&&(v.kineticImage.setCrop({x:t.FACING_DIRECTIONS.DOWN*t.WIDTH,y:0,width:t.WIDTH,height:t.HEIGHT}),v.facingDirection=t.FACING_DIRECTIONS.DOWN),i>o&&Math.abs(r-s)<Math.tan(.125*Math.PI)*(i-o)&&v.facingDirection!==t.FACING_DIRECTIONS.UP&&(v.kineticImage.setCrop({x:t.FACING_DIRECTIONS.UP*t.WIDTH,y:0,width:t.WIDTH,height:t.HEIGHT}),v.facingDirection=t.FACING_DIRECTIONS.UP),r<s&&o-i>Math.tan(.125*Math.PI)*(s-r)&&o-i<Math.tan(.375*Math.PI)*(s-r)&&v.facingDirection!==t.FACING_DIRECTIONS.UP_LEFT&&(v.kineticImage.setCrop({x:t.FACING_DIRECTIONS.UP_LEFT*t.WIDTH,y:0,width:t.WIDTH,height:t.HEIGHT}),v.facingDirection=t.FACING_DIRECTIONS.UP_LEFT),r<s&&i-o>Math.tan(.125*Math.PI)*(s-r)&&i-o<Math.tan(.375*Math.PI)*(s-r)&&v.facingDirection!==t.FACING_DIRECTIONS.DOWN_LEFT&&(v.kineticImage.setCrop({x:t.FACING_DIRECTIONS.DOWN_LEFT*t.WIDTH,y:0,width:t.WIDTH,height:t.HEIGHT}),v.facingDirection=t.FACING_DIRECTIONS.DOWN_LEFT),r>s&&o-i>Math.tan(.125*Math.PI)*(r-s)&&o-i<Math.tan(.375*Math.PI)*(r-s)&&v.facingDirection!==t.FACING_DIRECTIONS.UP_RIGHT&&(v.kineticImage.setCrop({x:t.FACING_DIRECTIONS.UP_RIGHT*t.WIDTH,y:0,width:t.WIDTH,height:t.HEIGHT}),v.facingDirection=t.FACING_DIRECTIONS.UP_RIGHT),r>s&&i-o>Math.tan(.125*Math.PI)*(r-s)&&i-o<Math.tan(.375*Math.PI)*(r-s)&&v.facingDirection!==t.FACING_DIRECTIONS.DOWN_RIGHT&&(v.kineticImage.setCrop({x:t.FACING_DIRECTIONS.DOWN_RIGHT*t.WIDTH,y:0,width:t.WIDTH,height:t.HEIGHT}),v.facingDirection=t.FACING_DIRECTIONS.DOWN_RIGHT),l.draw()}function r(e){e=e||window.event;var n;"which"in e?n=e.which===3:"button"in e&&(n=e.button===2);if(!n){var r=$("#gameplay-container"),i=e.clientX-r.offset().left,s=e.clientY-r.offset().top,o={};switch(v.facingDirection){case t.FACING_DIRECTIONS.LEFT:o.x=v.kineticImage.getX()+22,o.y=v.kineticImage.getY()+76;break;case t.FACING_DIRECTIONS.RIGHT:o.x=v.kineticImage.getX()+130,o.y=v.kineticImage.getY()+58;break;case t.FACING_DIRECTIONS.UP:o.x=v.kineticImage.getX()+83,o.y=v.kineticImage.getY()+115;break;case t.FACING_DIRECTIONS.DOWN:o.x=v.kineticImage.getX()+68,o.y=v.kineticImage.getY()+10;break;case t.FACING_DIRECTIONS.UP_LEFT:o.x=v.kineticImage.getX()+31,o.y=v.kineticImage.getY()+29;break;case t.FACING_DIRECTIONS.UP_RIGHT:o.x=v.kineticImage.getX()+115,o.y=v.kineticImage.getY()+36;break;case t.FACING_DIRECTIONS.DOWN_LEFT:o.x=v.kineticImage.getX()+24,o.y=v.kineticImage.getY()+106;break;case t.FACING_DIRECTIONS.DOWN_RIGHT:o.x=v.kineticImage.getX()+138,o.y=v.kineticImage.getY()+108}P(o.x,o.y,i,s,w),u.runExplosionAt(o.x,o.y,t.BULLET_SHOT_SCALE,t.BULLET_SHOT_FRAMERATE,d),createjs.Sound.play("gun")}}function i(t){var n=t.keyCode?t.keyCode:t.which,r=$("#qButton"),i=$("#wButton"),s=$("#eButton"),o=$("#aButton"),a=$("#qTimer"),f=$("#wTimer"),l=$("#eTimer"),c=$("#aTimer");n===e.KEYS.Q||n===e.KEYS.W||n===e.KEYS.E,n===e.KEYS.Q?x[0]&&(u.runPoofAt(v.getCenter().x,v.getCenter().y,.4,d),O(a,r,x,0),v.checkDirectionAndTeleport(v.smallTeleportationAmount)):n===e.KEYS.W?x[1]&&(u.runPoofAt(v.getCenter().x,v.getCenter().y,.4,d),O(f,i,x,1),v.checkDirectionAndTeleport(v.averageTeleportationAmount)):n===e.KEYS.E?x[2]&&(u.runPoofAt(v.getCenter().x,v.getCenter().y,.4,d),O(l,s,x,2),v.checkDirectionAndTeleport(v.largeTeleportationAmount)):n===e.KEYS.A&&x[3]&&(O(c,o,x,3),H())}a.addEventListener("mousemove",n),a.addEventListener("mousedown",r),$(document).on("keydown",i)}function O(e,t,n,r){var i=2,s;s=setInterval(function(){i--,i>0&&(n[r]=!1,e.empty(),e.append("<p>'W' Delay: "+i+" s</p>"),t.css({opacity:"0.5"})),i===0&&(e.empty(),t.css({opacity:"1"}),e.append("<p>Ready to use</p>"),n[r]=!0,clearInterval(s))},1e3)}function M(){a.off("mousedown"),a.off("mouseover"),$(document).off("keydown")}function _(e){var t=new i("assets/images/enemy.png",e);t.image.onload=function(){var e=new Kinetic.Image({x:D(50,950-n.WIDTH),y:D(50,600-n.HEIGHT),image:t.image,width:n.WIDTH,height:n.HEIGHT,crop:{x:t.frame,y:0,width:n.WIDTH,height:n.HEIGHT},scale:{x:n.SCALE,y:n.SCALE}});g.push({enemy:e,frame:t.frame,attackPlayer:t.attackPlayer}),c.add(e)}}function D(e,t){return Math.floor(Math.random()*(t-e+1))+e}function P(e,t,n,r,i){var o=new s(e,t,i);o.shoot(n,r,g,v,a,h,d)}function H(){m=v.getCenter(),P(m.x,m.y-b,m.x,m.y-e.STAGE_HEIGHT,E),P(m.x+b/3,m.y-b/3,m.x+e.STAGE_WIDTH/3,m.y-e.STAGE_HEIGHT,E),P(m.x+b/2,m.y-b/2,m.x+e.STAGE_WIDTH/2,m.y-e.STAGE_HEIGHT/2,E),P(m.x+b,m.y,m.x+e.STAGE_WIDTH,m.y,E),P(m.x+b/3,m.y+b/3,m.x+e.STAGE_WIDTH/3,m.y+e.STAGE_HEIGHT,E),P(m.x+b/2,m.y+b/2,m.x+e.STAGE_WIDTH/2,m.y+e.STAGE_HEIGHT/2,E),P(m.x,m.y+b,m.x,m.y+e.STAGE_HEIGHT,E),P(m.x-b/3,m.y+b/3,m.x-e.STAGE_WIDTH/3,m.y+e.STAGE_HEIGHT,E),P(m.x-b/2,m.y+b/2,m.x-e.STAGE_WIDTH/2,m.y+e.STAGE_HEIGHT/2,E),P(m.x-b,m.y,m.x-e.STAGE_WIDTH,m.y,E),P(m.x-b/3,m.y-b/3,m.x-e.STAGE_WIDTH/3,m.y-e.STAGE_HEIGHT,E),P(m.x-b/2,m.y-b/2,m.x-e.STAGE_WIDTH/2,m.y-e.STAGE_HEIGHT/2,E)}function B(){function n(e,t){localStorage.setItem("highestScore",t),localStorage.setItem("highScorerName",e)}$("#scoreSpan").text(v.score);var e=sessionStorage.getItem("heroName");sessionStorage.setItem("playerScore",v.score);if(localStorage.getItem("highestScore")!=="NaN"){var t=+localStorage.getItem("highestScore");+sessionStorage.getItem("playerScore")>=t&&n(e,sessionStorage.getItem("playerScore"))}else n(e,sessionStorage.getItem("playerScore"))}function j(){v.score===T*50&&T++,$("#levelSpan").text(T)}function F(){N(),C(),L(),k(),A()}function I(){var e=setTimeout(function(){var r=requestAnimationFrame(I);v.isDead=v.health<=0,v.isDead&&(M(),cancelAnimationFrame(r),clearTimeout(e),l.clear(),v.kineticImage.remove(),u.runExplosionAt(v.kineticImage.getX()+t.WIDTH/2,v.kineticImage.getY()+t.HEIGHT/2,t.EXPLOSION_SCALE,t.EXPLOSION_FRAME_RATE,d),createjs.Sound.play("bomb"),setTimeout(function(){a.remove(c),window.location.href="../termination/termination.html"},3e3)),y%n.SPAWN_FRAME_INTERVAL===0&&_(y);for(var s=0,p=g.length;s<p;s+=1)if(g[s]){var m=(y-g[s].frame)/3|0;m<n.FRAME_COUNT-1&&g[s].enemy.setCrop({x:m*n.WIDTH,y:0,width:n.WIDTH,height:n.HEIGHT}),i.prototype.attackPlayer.call(g[s].enemy,v.kineticImage);var b=u.checkIfPlayerCollidedWithEnemy(v,g[s].enemy);b&&(o(t.HEALTH_REDUCED_ON_ENEMY_COLLISION,v),u.removeEnemy(g,s))}B(),j(),f.moveToTop(),h.moveToTop(),l.moveToTop(),c.moveToTop(),d.moveToTop(),c.drawScene(),y+=1,h.clearCache(),c.clearCache(),l.clearCache(),f.clearCache(),a.clearCache(),y%50===0&&d.destroyChildren()},1e3/60-S)}var a,f,l,c,h,p,d,v,m,g=[],y=0,b=20,w="assets/images/bullet.png",E="assets/images/bullet-image.png",S=0,x=[!0,!0,!0,!0],T=1;(function(){F(),I()})()}),define("gameplay",function(){});